!function t(e,i,n){function s(r,a){if(!i[r]){if(!e[r]){var h="function"==typeof require&&require;if(!a&&h)return h(r,!0);if(o)return o(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[r]={exports:{}};e[r][0].call(u.exports,function(t){var i=e[r][1][t];return s(i?i:t)},u,u.exports,t,e,i,n)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)s(n[r]);return s}({1:[function(t,e,i){!function(){function i(t){return t<0?-1:1}var n=t("jquery"),s={extend:function(t,e){for(var i in e){i.split(".");e[i]instanceof Array&&e[i].length<100?t[i]=e[i].slice(0):t[i]=e[i]}return t},get$:function(){return n},isAndroid:function(){var t=navigator.userAgent.toLowerCase();return t.indexOf("android")>-1}(),keyCodeToChar:{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause/Break",20:"Caps Lock",27:"Esc",32:"Space",33:"Page Up",34:"Page Down",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Windows",93:"Right Click",96:"Numpad 0",97:"Numpad 1",98:"Numpad 2",99:"Numpad 3",100:"Numpad 4",101:"Numpad 5",102:"Numpad 6",103:"Numpad 7",104:"Numpad 8",105:"Numpad 9",106:"Numpad *",107:"Numpad +",109:"Numpad -",110:"Numpad .",111:"Numpad /",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Num Lock",145:"Scroll Lock",182:"My Computer",183:"My Calculator",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},panels:[],mouseDown:!1,useTouch:"ontouchstart"in document.documentElement,widgets:[]};s.Presets={dictionary:"undefined"==typeof localStorage.interfacejs?{}:JSON.parse(localStorage.interfacejs),save:function(t){for(var e=[],i=0;i<s.panels.length;i++){var n=s.panels[i];e[i]=[];for(var o=0;o<n.children.length;o++){var r=n.children[o];if("object"==typeof r.children){for(var a=[],h=0;h<r.children.length;h++)a[h]=r.children[h].value;e[i][o]=a}else e[i][o]=r.value}this.dictionary[t]=e,localStorage.interfacejs=JSON.stringify(this.dictionary)}},load:function(t){for(var e=this.dictionary[t],i=0;i<s.panels.length;i++)for(var n=s.panels[i],o=0;o<n.children.length;o++){var r=n.children[o];if("object"==typeof r.children)for(var a=0;a<r.children.length;a++)r.children[a].setValue(e[i][o][a]);else r.setValue(e[i][o])}},list:function(){return Object.keys(this.dictionary)}},s.Panel=function(){var t=this,e=arguments.length>=1?arguments[0].container:void 0;s.extend(this,{type:"Panel",active:!0,children:[],shouldDraw:[],fps:30,useRelativeSizesAndPositions:!0,labelSize:"12px",font:"normal 12px Helvetica",serializeMe:["fps","useRelativeSizesAndPositions","labelSize","font","background","fill","stroke","backgroundColor"],container:function(){if("undefined"==typeof e){n("body").css({margin:0,padding:0});var t=n('<div id="container">');return t.css({width:n(window).width(),height:n(window).height(),display:"block",margin:0,padding:0,position:"absolute",left:0,top:0}),n("body").append(t),t}return e}(),canvas:document.createElement("canvas"),touchEvent:function(e){if(t.active){"undefined"==typeof e.changedTouches&&e.originalEvent&&(e.changedTouches=e.originalEvent.changedTouches);for(var i=0;i<e.changedTouches.length;i++)for(var n=e.changedTouches.item(i),s=0;s<t.children.length;s++)n.x=n.pageX-t.x,n.y=n.pageY-t.y,n.type=e.type,t.children[s].touchEvent(n);e.preventDefault()}},mouseEvent:function(e){if(t.active){"mousedown"===e.type?s.mouseDown=!0:"mouseup"===e.type&&(s.mouseDown=!1);for(var i={x:e.offsetX||e.pageX-t.x,y:e.offsetY||e.pageY-t.y,type:e.type},n=0;n<t.children.length;n++)t.children[n].mouseEvent(i)}},init:function(){var t=n(this.container).offset();this.width=n(this.container).width(),this.height=n(this.container).height(),this.x=t.left,this.y=t.top,isNaN(this.x)&&(this.x=0),isNaN(this.y)&&(this.y=0),n(this.canvas).attr({width:this.width,height:this.height}),n(this.container).css({"user-select":"none","-webkit-user-select":"none"}),n(this.container).append(this.canvas),this.ctx=this.canvas.getContext("2d"),this.ctx.translate(.5,.5),this.ctx.lineWidth=1,s.useTouch?(n(this.container).on("touchstart",this.touchEvent),n(this.container).on("touchmove",this.touchEvent),n(this.container).on("touchend",this.touchEvent)):(n(this.container).on("mousedown",this.mouseEvent),n(this.container).on("mousemove",this.mouseEvent),n(this.container).on("mouseup",this.mouseEvent)),n(this.container).css({outline:"none"}),n(this.container).attr("tabindex",5),n(this.container).on("keydown",this.keydown.bind(this)),n(this.container).on("keyup",this.keyup.bind(this))},keydown:function(t){for(var e=0;e<this.children.length;e++)this.children[e].onkeydown&&this.children[e].onkeydown(t)},keyup:function(t){for(var e=0;e<this.children.length;e++)this.children[e].onkeyup&&this.children[e].onkeyup(t)},draw:function(){if(this.active){for(var t=0;t<this.shouldDraw.length;t++)this.shouldDraw[t].draw();this.shouldDraw.length=0}n.publish("/draw")},getWidgetWithName:function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e]},redoBoundaries:function(){var t=n(this.container).offset();this.width=n(this.container).width(),this.height=n(this.container).height(),this.x=t.left,this.y=t.top,isNaN(this.x)&&(this.x=0),isNaN(this.y)&&(this.y=0),n(this.canvas).attr({width:this.width,height:this.height}),this.ctx.translate(.5,.5),this.ctx.lineWidth=1,this.refresh()},refresh:function(){if(this.active){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(var t=0;t<this.children.length;t++)this.children[t].draw()}},add:function(){for(var t=0;t<arguments.length;t++){var e=arguments[t];e.panel=this,e.canvas=this.canvas,e.container=this.container,e.ctx=this.ctx,this.children.push(e),e._init&&!e.added&&e._init(),e.oninit&&!e.added&&e.oninit(),e.draw(),e.added=!0,"function"==typeof e.add&&e.add()}},clear:function(){this.ctx.clearRect(0,0,this.width,this.height),this.children.length=0},remove:function(t){if(this.ctx.clearRect(t._x(),t._y(),t._width(),t._height()),"undefined"!=typeof t.children&&"XY"!==t.type)for(var e=0;e<t.children.length;e++)this.children.splice(this.children.indexOf(t.children[e]),1),s.widgets.splice(s.widgets.indexOf(t.children[e]),1);else this.children.indexOf(t)>-1&&(this.children.splice(this.children.indexOf(t),1),s.widgets.splice(s.widgets.indexOf(t),1),"function"==typeof t.remove&&t.remove())}}),"undefined"!=typeof arguments[0]&&s.extend(this,arguments[0]),this.backgroundColor&&this.setBackgroundColor(this.backgroundColor),this.init(),this.timer=setInterval(function(){t.draw()},Math.round(1e3/this.fps));var i="#000",o="#666",r="#999",a="transparent",t=this,h=this.useRelativeSizesAndPositions;Object.defineProperties(this,{useRelativeSizesAndPositions:{get:function(){return h},set:function(t){if(t!==h)if(h=t,t===!1)for(var e=0;e<this.children.length;e++){var i=this.children[e];i.bounds=[Math.round(i.x*this.width),Math.round(i.y*this.height),Math.round(i.width*this.width),Math.round(i.height*this.height)]}else for(var e=0;e<this.children.length;e++){var i=this.children[e];i.bounds=[i.x/this.width,i.y/this.height,i.width/this.width,i.height/this.height]}this.refresh()}},background:{get:function(){return a},set:function(t){a=t,n(this.container).css({backgroundColor:a})}},childBackground:{get:function(){return i},set:function(e){i=e,t.refresh()}},childStroke:{get:function(){return r},set:function(e){r=e,t.refresh()}},childFill:{get:function(){return o},set:function(e){o=e,t.refresh()}}}),arguments[0]&&(arguments[0].childBackground&&(this.childBackground=arguments[0].childBackground),arguments[0].childFill&&(this.childFill=arguments[0].childFill),arguments[0].childStroke&&(this.childStroke=arguments[0].childStroke)),s.panels.push(this)};var o=function(t){switch(t){case"mousedown":return"touchmousedown";case"mousemove":return"touchmousemove";case"mouseup":return"touchmouseup";default:return t}},r=function(t){switch(t){case"touchstart":return"touchmousedown";case"touchmove":return"touchmousemove";case"touchend":return"touchmouseup";default:return t}},a=0,h={hasFocus:!1,requiresFocus:!0,min:0,max:1,value:0,lastValue:null,name:null,events:{ontouchstart:null,ontouchmove:null,ontouchend:null,onmousedown:null,onmousemove:null,onmouseup:null,ontouchmousedown:null,ontouchmousemove:null,ontouchmouseup:null,onvaluechange:null,onboundschange:null}};s.Widget={init:function(t){this.added=!1,s.extend(this,h),"undefined"==typeof t&&(t={}),this.name=t.name||this.type+"_"+a++,this.target="OSC",this.key="/"+this.name,s.extend(this,t),this.bounds&&(this.x=t.bounds[0],this.y=t.bounds[1],this.width=t.bounds[2],this.height=t.bounds[3]),this.colors&&(this.background=t.colors[0],this.fill=t.colors[1],this.stroke=t.colors[2]),this.focusedTouches=[],this.value&&this.setValue(this.value,!0);var e=this.bounds||[this.x,this.y,this.width,this.height],i=this.x,n=this.y,o=this.width,r=this.height;this.value;Object.defineProperties(this,{bounds:{configurable:!0,get:function(){return e},set:function(t){e=t,this.x=e[0],this.y=e[1],this.width=e[2],this.height=e[3],this.onboundschange&&this.onboundschange()}},x:{configurable:!0,get:function(){return i},set:function(t){this.clear(),i=t,this.onboundschange&&this.onboundschange(),this.refresh()}},y:{configurable:!0,get:function(){return n},set:function(t){this.clear(),n=t,this.onboundschange&&this.onboundschange(),this.refresh()}},width:{configurable:!0,get:function(){return o},set:function(t){this.clear(),o=t,this.onboundschange&&this.onboundschange(),this.refresh()}},height:{configurable:!0,get:function(){return r},set:function(t){this.clear(),r=t,this.onboundschange&&this.onboundschange(),this.refresh()}}}),s.widgets.push(this)},clear:function(){this.panel&&this.panel.ctx.clearRect(this._x(),this._y(),this._width(),this._height())},refresh:function(){this.panel&&this.panel.shouldDraw.indexOf(this)===-1&&this.panel.shouldDraw.push(this)},setValue:function(t,e){var i=this.max-this.min,n=t;this.value=t,0!==this.min||1!==this.max?(n-=this.min,this._value=n/i):this._value=this.value,e||this.refresh()},hitTest:function(t){return t.x>=this._x()&&t.x<=this._x()+this._width()&&t.y>=this._y()&&t.y<=this._y()+this._height()},mouseEvent:function(t){var e=this.hitTest(t),i=o(t.type);(e||this.hasFocus||!this.requiresFocus)&&("mousedown"===t.type&&(this.hasFocus=!0),this[t.type]&&this[t.type](t,e),this["on"+t.type]&&this["on"+t.type](t,e),this["on"+i]&&this["on"+i](t,e)),"mouseup"===t.type&&(this.hasFocus=!1)},touchEvent:function(t){var e=this.hitTest(t),i=r(t.type);if((e||this.hasFocus||!this.requiresFocus)&&("touchstart"===t.type&&(this.focusedTouches.push(t),this.hasFocus=!0),this[t.type]&&this[t.type](t,e),this["on"+t.type]&&this["on"+t.type](t,e),this["on"+i]&&this["on"+i](t,e)),"touchend"===t.type)for(var n=0;n<this.focusedTouches.length;n++)if(this.focusedTouches[n].id===t.id){this.focusedTouches.splice(n,1),0===this.focusedTouches.length&&(this.hasFocus=!1);break}},draw:function(){},sendTargetMessage:function(){if(this.target&&this.key)if("OSC"===this.target){if(s.OSC)if("undefined"==typeof this.values){var t="string"==typeof this.value?"s":"f";s.OSC.send(this.key,t,[this.value])}else if("undefined"==typeof this.sendValues){for(var t="",e=0;e<this.values.length;e++)t+="string"==typeof this.value?"s":"f";s.OSC.send(this.key,t,this.values)}else this.sendValues()}else if("MIDI"===this.target)s.MIDI&&"undefined"==typeof this.values&&s.MIDI.send(this.key[0],this.key[1],this.key[2],this.value);else if("WebSocket"===this.target){var i,n={type:"socket",address:this.key};if(s.Socket){if("undefined"==typeof this.values)i=[this.value];else{if("undefined"!=typeof this.sendValues)return void this.sendValues();i=[this.values]}n.parameters=i,s.Socket.send(JSON.stringify(n))}}else"function"==typeof this.target[this.key]?this.target[this.key](this.values||this.value):this.target[this.key]=this.values||this.value},_background:function(){return this.background||this.panel.childBackground},_stroke:function(){return this.stroke||this.panel.childStroke},_fill:function(){return this.fill||this.panel.childFill},_x:function(){return this.panel.useRelativeSizesAndPositions?Math.floor(this.x*this.panel.width):this.x},_y:function(){return this.panel.useRelativeSizesAndPositions?Math.floor(this.y*this.panel.height):this.y},_width:function(){return this.panel.useRelativeSizesAndPositions?Math.floor(this.width*this.panel.width):this.width},_height:function(){return this.panel.useRelativeSizesAndPositions?Math.floor(this.height*this.panel.height):this.height},_font:function(){var t=this.font||this.panel.font;return t},label:null,_serializeMe:["background","stroke","fill","x","y","width","height","value","label","onmousedown","onmousemove","onmouseup","ontouchmousedown","ontouchmousemove","ontouchmouseup","ontouchstart","ontouchmove","ontouchend","onvaluechange","name","type","target","key"]},s.HBox=function(){s.extend(this,{type:"HBox",children:[],proxyPanel:{active:!0,x:0,y:0,width:1,height:1,shouldDraw:[],useRelativeSizesAndPositions:!0},add:function(){for(var t=0;t<arguments.length;t++){var e=arguments[t];this.children.indexOf(e)===-1&&this.children.push(e),e.panel=this.proxyPanel,e.ctx=this.panel.ctx}this.layout(),this.draw()},layout:function(){for(var t=this.width/this.children.length/this.width,e=0,i=0;i<this.children.length;i++){var n=this.children[i];n.x=e+this.x,n.y=this.y*(1/this.height),n.width=t,n.height=1,e+=t}return this},draw:function(){this.proxyPanel.width=this._width(),this.proxyPanel.height=this._height();for(var t=0;t<this.children.length;t++)this.children[t].draw()},refresh:function(){for(var t=0;t<this.proxyPanel.shouldDraw.length;t++)this.proxyPanel.shouldDraw[t].draw();this.proxyPanel.shouldDraw.length=0},mouseEvent:function(t){for(var e=0;e<this.children.length;e++){this.children[e];this.children[e].mouseEvent(t)}},touchEvent:function(t){for(var e=0;e<this.children.length;e++){this.children[e];this.children[e].touchEvent(t)}},_init:function(){this.useRelativeSizesAndPositions=this.panel.useRelativeSizesAndPositions,this.proxyPanel.width=this._width(),this.proxyPanel.height=this._height(),this.proxyPanel.__proto__=this.panel,n.subscribe("/draw",this.refresh.bind(this)),Object.defineProperties(this,{bounds:{configurable:!0,get:function(){return bounds},set:function(t){bounds=t,this.x=bounds[0],this.y=bounds[1],this.width=bounds[2],this.height=bounds[3],this.layout(),this.draw()}}})}}).init(arguments[0])},s.HBox.prototype=s.Widget,s.VBox=function(){s.extend(this,{type:"VBox",children:[],proxyPanel:{active:!0,x:0,y:0,width:1,height:1,shouldDraw:[],useRelativeSizesAndPositions:!0},add:function(){for(var t=0;t<arguments.length;t++){var e=arguments[t];this.children.push(e),e.panel=this.proxyPanel,e.ctx=this.panel.ctx}this.layout(),this.draw()},layout:function(){for(var t=this.height/this.children.length,e=0,i=0;i<this.children.length;i++){var n=this.children[i];n.x=this.x,n.y=(this.y+e)*(1/this.height),n.width=1,n.height=t*(1/this.height),e+=t}return this},draw:function(){this.proxyPanel.width=this._width(),this.proxyPanel.height=this._height();for(var t=0;t<this.children.length;t++)this.children[t].draw()},refresh:function(){for(var t=0;t<this.proxyPanel.shouldDraw.length;t++)this.proxyPanel.shouldDraw[t].draw();this.proxyPanel.shouldDraw.length=0},mouseEvent:function(t){for(var e=0;e<this.children.length;e++){this.children[e];this.children[e].mouseEvent(t)}},touchEvent:function(t){t.x-=this._x(),t.y-=this._y();for(var e=0;e<this.children.length;e++){this.children[e];this.children[e].touchEvent(t)}},_init:function(){this.useRelativeSizesAndPositions=this.panel.useRelativeSizesAndPositions,this.proxyPanel.width=this._width(),this.proxyPanel.height=this._height(),this.proxyPanel.__proto__=this.panel,n.subscribe("/draw",this.refresh.bind(this)),Object.defineProperties(this,{bounds:{configurable:!0,get:function(){return bounds},set:function(t){bounds=t,this.x=bounds[0],this.y=bounds[1],this.width=bounds[2],this.height=bounds[3],this.layout(),this.draw()}}})}}).init(arguments[0])},s.VBox.prototype=s.Widget,s.Image=function(){s.extend(this,{type:"Image",image:null,path:null,_image:null,load:function(t){this.path=t,this._image=new Image,this._image.src=this.path,this._image.onload=function(){this.image=this._image,this.ctx.drawImage(this.image,this._x(),this._y())}.bind(this)},_init:function(){this.path&&this.load(this.path)},draw:function(){this.image&&this.ctx.drawImage(this.image,this._x(),this._y())}}).init(arguments[0])},s.Image.prototype=s.Widget,s.Slider=function(){s.extend(this,{type:"Slider",isVertical:!0,serializeMe:["isVertical"],draw:function(){var t=this._x(),e=this._y(),i=this._width(),n=this._height();this.ctx.fillStyle=this._background(),this.ctx.fillRect(t,e,i,n),this.ctx.fillStyle=this._fill(),this.isVertical?this.ctx.fillRect(t,e+n-this._value*n,i,this._value*n):this.ctx.fillRect(t,e,i*this._value,n),this.label&&(this.ctx.fillStyle=this._stroke(),this.ctx.textBaseline="middle",this.ctx.textAlign="center",this.ctx.font=this._font(),this.ctx.fillText(this.label,t+i/2,e+n/2)),this.ctx.strokeStyle=this._stroke(),this.ctx.strokeRect(t,e,i,n)},changeValue:function(t,e){!this.hasFocus&&this.requiresFocus||(this._value=this.isVertical?1-e/this._height():t/this._width(),this._value<0?this._value=0:this._value>1&&(this._value=1),this.value=this.min+(this.max-this.min)*this._value,this.value!==this.lastValue&&(this.sendTargetMessage(),this.onvaluechange&&this.onvaluechange(),this.refresh(),this.lastValue=this.value))},mousedown:function(t,e){e&&s.mouseDown&&this.changeValue(t.x-this._x(),t.y-this._y())},mousemove:function(t,e){e&&s.mouseDown&&this.changeValue(t.x-this._x(),t.y-this._y())},mouseup:function(t,e){e&&s.mouseDown&&this.changeValue(t.x-this._x(),t.y-this._y())},touchstart:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())},touchmove:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())},touchend:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())}}).init(arguments[0])},s.Slider.prototype=s.Widget,s.Crossfader=function(){s.extend(this,{type:"Crossfader",crossfaderWidth:30,serializeMe:["crossfaderWidth"],isVertical:!1,_value:.5,draw:function(){var t=this._x(),e=this._y(),i=this._width(),n=this._height();this.ctx.fillStyle=this._background(),this.ctx.fillRect(t,e,i,n),this.ctx.fillStyle=this._fill(),this.isVertical?this.ctx.fillRect(t,e+(n-this.crossfaderWidth)*this._value,i,this.crossfaderWidth):this.ctx.fillRect(t+(i-this.crossfaderWidth)*this._value,e,this.crossfaderWidth,n),this.label&&(this.ctx.fillStyle=this._stroke(),this.ctx.textBaseline="middle",this.ctx.textAlign="center",this.ctx.font=this._font(),this.ctx.fillText(this.label,t+i/2,e+n/2)),this.ctx.strokeStyle=this._stroke(),this.ctx.strokeRect(t,e,i,n)},changeValue:function(t,e){!this.hasFocus&&this.requiresFocus||(this.isVertical?this._value=e/this._height():this._value=t/this._width(),this._value<0?this._value=0:this._value>1&&(this._value=1),this.value=this.min+(this.max-this.min)*this._value,this.isVertical&&(this.value*=-1),this.value!==this.lastValue&&(this.sendTargetMessage(),this.onvaluechange&&this.onvaluechange(),this.refresh(),this.lastValue=this.value))},mousedown:function(t){this.changeValue(t.x-this._x(),t.y-this._y())},mousemove:function(t){this.changeValue(t.x-this._x(),t.y-this._y())},mouseup:function(t){this.changeValue(t.x-this._x(),t.y-this._y())},touchstart:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())},touchmove:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())},touchend:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())}}).init(arguments[0])},s.Crossfader.prototype=s.Widget,s.Button=function(){s.extend(this,{type:"Button",_value:0,serializeMe:["mode","label"],mode:"toggle",isMouseOver:!1,isTouchOver:!1,label:null,requiresFocus:!1,draw:function(){var t=this._x(),e=this._y(),i=this._width(),n=this._height();this._value?this.ctx.fillStyle=this._fill():this.ctx.fillStyle=this._background(),this.ctx.fillRect(t,e,i,n),null!==this.label&&(this.ctx.fillStyle=this._stroke(),this.ctx.textBaseline="middle",this.ctx.textAlign="center",this.ctx.font=this._font(),this.ctx.fillText(this.label,t+i/2,e+n/2)),this.ctx.strokeStyle=this._stroke(),this.ctx.strokeRect(t,e,i,n)},changeValue:function(t,e){!this.hasFocus&&this.requiresFocus||(this._value=!this._value,this.value=this._value?this.max:this.min,this.value===this.lastValue&&"contact"!==this.mode||(this.sendTargetMessage(),this.onvaluechange&&this.onvaluechange(),this.draw(),this.lastValue=this.value))},setValue:function(t,e){var i=this.max-this.min,n=t;this.value=t,0!==this.min||1!==this.max?(n-=this.min,this._value=n/i):this._value=this.value,this.lastValue=this.value,e||"contact"===this.mode||this.refresh()},mousedown:function(t,e){if(e&&s.mouseDown&&(this.isMouseOver=!0,this.changeValue(),"contact"===this.mode)){var i=this;setTimeout(function(){i._value=0,i.draw()},75)}},mousemove:function(t,e){if(!this.requiresFocus&&e&&s.mouseDown&&!this.isMouseOver)if(this.isMouseOver=!0,"contact"!==this.mode)this.changeValue();else{this._value=1,this.draw();var i=this;setTimeout(function(){i._value=0,i.draw()},75)}else!e&&this.isMouseOver&&(console.log("moved off!"),this.isMouseOver=!1)},mouseup:function(t){"momentary"===this.mode&&(this.changeValue(),this.isMouseOver=!1)},touchstart:function(t,e){if(e&&(this.isTouchOver=!0,this.changeValue(),"contact"===this.mode)){var i=this;setTimeout(function(){i._value=0,i.draw()},75)}},touchmove:function(t,e){if(this.requiresFocus||!e||this.isTouchOver)!e&&this.isTouchOver&&(this.isTouchOver=!1);else if(this.isTouchOver=!0,"contact"!==this.mode)this.changeValue();else{this._value=1,this.draw();var i=this;setTimeout(function(){i._value=0,i.draw()},75)}},touchend:function(t){this.isTouchOver=!1,"momentary"===this.mode&&this.changeValue()}}).init(arguments[0])},s.Button.prototype=s.Widget,s.ButtonV=function(){s.extend(this,{type:"ButtonV",_value:0,serializeMe:["mode","label"],mode:"toggle",isMouseOver:!1,isTouchOver:!1,label:null,points:[{x:0,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:0},{x:0,y:0}],textLocation:{x:.5,y:.5},draw:function(){var t=this._x(),e=this._y(),i=0,n=this._width(),s=this._height();for(this._value?this.ctx.fillStyle=this._fill():this.ctx.fillStyle=this._background(),this.ctx.beginPath(),this.ctx.strokeStyle=this._stroke(),i;i<this.points.length;i++)0===i?this.ctx.moveTo(t+this.points[i].x*n,e+this.points[i].y*s):this.ctx.lineTo(t+this.points[i].x*n,e+this.points[i].y*s);this.ctx.lineTo(t+this.points[0].x*n,e+this.points[0].y*s),this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke(),null!==this.label&&(this.ctx.fillStyle=this._stroke(),this.ctx.textBaseline="middle",this.ctx.textAlign="center",this.ctx.font=this._font(),this.ctx.fillText(this.label,t+n*this.textLocation.x,e+s*this.textLocation.y))},changeValue:function(t,e){!this.hasFocus&&this.requiresFocus||(this._value=!this._value,this.value=this._value?this.max:this.min,this.value===this.lastValue&&"contact"!==this.mode||(this.sendTargetMessage(),this.onvaluechange&&this.onvaluechange(),this.draw(),this.lastValue=this.value))},hitTest:function(t){var e=this._width(),i=this._height(),n=this._x(),s=this._y();if(t.x>=n&&t.x<=n+e&&t.y>=s&&t.y<=s+i){var o=0,r=this.points,a=0;for(o;o<r.length-1;o++)if(r[o+1].x>r[o].x){if(r[o].x*e+n<=t.x&&t.x<r[o+1].x*e+n){var h=(r[o+1].y-r[o].y)/(r[o+1].x-r[o].x)*i/e*(t.x-r[o].x*e+n)+r[o].y*i+s;h-t.y<0&&a++}}else if(r[o+1].x<r[o].x&&r[o].x*e+n>=t.x&&t.x>r[o+1].x*e+n){var h=(r[o+1].y-r[o].y)/(r[o+1].x-r[o].x)*i/e*(t.x-r[o].x*e+n)+r[o].y*i+s;h-t.y<0&&a++}if(a%2==1)return!0}return!1},setValue:function(t,e){var i=this.max-this.min,n=t;this.value=t,0!==this.min||1!==this.max?(n-=this.min,this._value=n/i):this._value=this.value,this.lastValue=this.value,e||"contact"===this.mode||this.refresh()},mousedown:function(t,e){if(e&&s.mouseDown&&(this.isMouseOver=!0,this.changeValue(),"contact"===this.mode)){var i=this;setTimeout(function(){i._value=0,i.draw()},75)}},mousemove:function(t,e){if(!this.requiresFocus&&e&&s.mouseDown&&!this.isMouseOver)if(this.isMouseOver=!0,"contact"!==this.mode)this.changeValue();else{this._value=1,this.draw();var i=this;setTimeout(function(){i._value=0,i.draw()},75)}else if(!e&&this.isMouseOver)if(this.isMouseOver=!1,"contact"!==this.mode)this.changeValue();else{this._value=1,this.draw();var i=this;setTimeout(function(){i._value=0,i.draw()},75)}},mouseup:function(t){"momentary"===this.mode&&(this.requiresFocus||!this.requiresFocus&&this.isMouseOver)&&(this.isMouseOver=!1,this.changeValue())},touchstart:function(t,e){if(e&&(this.isTouchOver=!0,this.changeValue(),"contact"===this.mode)){var i=this;setTimeout(function(){i._value=0,i.draw()},75)}},touchmove:function(t,e){if(this.requiresFocus||!e||this.isTouchOver)if(!e&&this.isTouchOver)if(this.isTouchOver=!1,"contact"!==this.mode)this.changeValue();else{this._value=1,this.draw();var i=this;setTimeout(function(){i._value=0,i.draw()},75)}else!e&&this.isTouchOver&&(this.isTouchOver=!1);else if(this.isTouchOver=!0,"contact"!==this.mode)this.changeValue();else{this._value=1,this.draw();var i=this;setTimeout(function(){i._value=0,i.draw()},75)}},touchend:function(t){(this.momentary&&this.requiresFocus||!this.requiresFocus&&this.isTouchOver)&&this.changeValue(),this.isTouchOver=!1}}).init(arguments[0])},s.ButtonV.prototype=s.Widget,s.Piano=function(){s.extend(this,{type:"Piano",_value:0,serializeMe:["mode","label"],mode:"toggle",isMouseOver:!1,isTouchOver:!1,label:null,startletter:"C",startoctave:3,endletter:"C",endoctave:5,target:null,noteLabels:!1,_initialized:!1,keyMap:["Z","S","X","D","C","V","G","B","H","N","J","M",","],children:[],play:function(t,e){isNaN(e)&&(e=4410),"undefined"!=typeof Gibber&&(e=Gibber.Clock.time(e));var i=this.children[t];i&&(i.changeValue(),future(function(){1==i._value&&i.changeValue()},e))},onkeyup:function(t){var e=s.keyCodeToChar[t.keyCode],i=this.keyMap.indexOf(e),n=this.children[i];"undefined"!=typeof n&&1==n._value&&n.changeValue()},onkeydown:function(t){var e=s.keyCodeToChar[t.keyCode],i=this.keyMap.indexOf(e),n=this.children[i];"undefined"!=typeof n&&0==n._value&&n.changeValue()},onvaluechange:function(){this.values=[261.626*Math.pow(2,(this.startnote+12*this.octave-49)/12),this.value]},onboundschange:function(){this._initialized&&this.placeKeys()},draw:function(){for(var t=0;t<this.children.length;t++)this.children[t].refresh();return this},placeKeys:function(){var t=(this._x(),this._y(),this._width(),this._height(),this.startoctave),e=0,i=0,n=["0","C","C#/Db","D","D#/Eb","E","F","F#/Gb","G","G#/Ab","A","A#/Bb","B"],o=["0","C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],r=[0,1,2,2,3,3,4,5,5,6,6,7,7],a=i+12*this.endoctave-(e+12*this.startoctave)+1,h=r[i]+7*this.endoctave-(r[e]+7*this.startoctave)+1,l=0;if(this._initialized){this.clear();for(var u=this.children.length-1;u>=0;u--){var c=this.children.pop();this.panel.remove(c)}}for(var u=1;u<13;u++)this.startletter===o[u]&&(e=u),this.endletter===o[u]&&(i=u);[2,4,7,9,11].indexOf(i)>-1&&h--;for(var u=0;u<a-1;u++){var p,f,d,y,m,v;switch(e){case 1:p=[{x:0,y:0},{x:.6,y:0},{x:.6,y:.625},{x:1,y:.625},{x:1,y:1},{x:0,y:1},{x:0,y:0}],d=this._fill(),f={x:.5,y:.75},y=this._background(),m=[l/h*this.width+this.x,this.y,this.width/h,this.height],v=this.noteLabels?n[e]+t:null;break;case 2:p=[{x:.1,y:0},{x:.7,y:0},{x:.7,y:1},{x:.1,y:1},{x:.1,y:0}],f={x:.3925,y:.5},d=this._background(),y=this._fill(),m=[(l-.5)/h*this.width+this.x,this.y,this.width/h,.625*this.height],v=this.noteLabels?n[e]:null;break;case 3:p=[{x:.2,y:0},{x:.8,y:0},{x:.8,y:.625},{x:1,y:.625},{x:1,y:1},{x:0,y:1},{x:0,y:.625},{x:.2,y:.625},{x:.2,y:0}],f={x:.5,y:.75},d=this._fill(),y=this._background(),m=[l/h*this.width+this.x,this.y,this.width/h,this.height],v=this.noteLabels?n[e]:null;break;case 4:p=[{x:.3,y:0},{x:.9,y:0},{x:.9,y:1},{x:.3,y:1},{x:.3,y:0}],f={x:.6075,y:.5},d=this._background(),y=this._fill(),m=[(l-.5)/h*this.width+this.x,this.y,this.width/h,.625*this.height],v=this.noteLabels?n[e]:null;break;case 5:p=[{x:1,y:0},{x:.4,y:0},{x:.4,y:.625},{x:0,y:.625},{x:0,y:1},{x:1,y:1},{x:1,y:0}],f={x:.5,y:.75},d=this._fill(),y=this._background(),m=[l/h*this.width+this.x,this.y,this.width/h,this.height],v=this.noteLabels?n[e]:null;break;case 6:p=[{x:0,y:0},{x:.57142857,y:0},{x:.57142857,y:.625},{x:1,y:.625},{x:1,y:1},{x:0,y:1},{x:0,y:0}],f={x:.5,y:.75},d=this._fill(),y=this._background(),m=[l/h*this.width+this.x,this.y,this.width/h,this.height],v=this.noteLabels?n[e]:null;break;case 7:p=[{x:.07142857,y:0},{x:.64285714,y:0},{x:.64285714,y:1},{x:.07142857,y:1},{x:.07142857,y:0}],f={x:.3925,y:.5},d=this._background(),y=this._fill(),m=[(l-.5)/h*this.width+this.x,this.y,this.width/h,.625*this.height],v=this.noteLabels?n[e]:null;break;case 8:p=[{x:.14285714,y:0},{x:.71428571,y:0},{x:.71428571,y:.625},{x:1,y:.625},{x:1,y:1},{x:0,y:1},{x:0,y:.625},{x:.14285714,y:.625},{x:.14285714,y:0}],f={x:.5,y:.75},d=this._fill(),y=this._background(),m=[l/h*this.width+this.x,this.y,this.width/h,this.height],v=this.noteLabels?n[e]:null;break;case 9:p=[{x:.21428571,y:0},{x:.78571428,y:0},{x:.78571428,y:1},{x:.21428571,y:1},{x:.21428571,y:0}],d=this._background(),y=this._fill(),m=[(l-.5)/h*this.width+this.x,this.y,this.width/h,.625*this.height],v=this.noteLabels?n[e]:null;break;case 10:p=[{x:.28571428,y:0},{x:.85714285,y:0},{x:.85714285,y:.625},{x:1,y:.625},{x:1,y:1},{x:0,y:1},{x:0,y:.625},{x:.28571428,y:.625},{x:.28571428,y:0}],d=this._fill(),y=this._background(),f={x:.5,y:.75},m=[l/h*this.width+this.x,this.y,this.width/h,this.height],v=this.noteLabels?n[e]:null;break;case 11:p=[{x:.35714285,y:0},{x:.92857142,y:0},{x:.92857142,y:1},{x:.35714285,y:1},{x:.35714285,y:0}],d=this._background(),y=this._fill(),f={x:.6075,y:.5},m=[(l-.5)/h*this.width+this.x,this.y,this.width/h,.625*this.height],v=this.noteLabels?n[e]:null;break;case 12:p=[{x:1,y:0},{x:.42857142,y:0},{x:.42857142,y:.625},{x:0,y:.625},{x:0,y:1},{x:1,y:1},{x:1,y:0}],d=this._fill(),y=this._background(),f={x:.5,y:.75},m=[l/h*this.width+this.x,this.y,this.width/h,this.height],v=this.noteLabels?n[e]:null}var g=new s.ButtonV({points:p,textLocation:f,target:this.target,onvaluechange:this.onvaluechange,startnote:e,octave:t,frequency:261.626*Math.pow(2,(e+12*t-49)/12),background:d,fill:y,stroke:this._stroke(),bounds:m,label:v,requiresFocus:!1,mode:"momentary"});[2,4,7,9,11].indexOf(e)===-1&&l++,this.children.push(g),this.panel.add(g),e++,e>12&&(e=1,t++)}if(2==e||4==e||7==e||9==e||11==e)var _=new s.ButtonV({points:[{x:.166,y:0},{x:.5,y:0},{x:.5,y:1},{x:.166,y:1},{x:.166,y:0}],target:this.target,onvaluechange:this.onvaluechange,background:this._background(),startnote:e,octave:t,frequency:261.626*Math.pow(2,(e+12*t-49)/12),bounds:[(l-.5)/h*this.width+this.x,this.y,this.width/h,.625*this.height],label:this.noteLabels?n[e]:null,stroke:this._stroke(),requiresFocus:!1,mode:"momentary"});else if(1==e)var _=new s.ButtonV({textLocation:{x:.5,y:.75},target:this.target,onvaluechange:this.onvaluechange,startnote:e,octave:t,frequency:261.626*Math.pow(2,(e+12*t-49)/12),background:this._fill(),fill:this._background(),stroke:this._stroke(),bounds:[l/h*this.width+this.x,this.y,this.width/h,this.height],label:this.noteLabels?n[e]+t:null,requiresFocus:!1,mode:"momentary"});else if(4==e)var _=new s.ButtonV({textLocation:{x:.5,y:.75},target:this.target,onvaluechange:this.onvaluechange,startnote:e,octave:t,frequency:261.626*Math.pow(2,(e+12*t-49)/12),background:this._fill(),fill:this._background(),stroke:this._stroke(),bounds:[l/h*this.width+this.x,this.y,this.width/h,this.height],label:this.noteLabels?n[e]:null,requiresFocus:!1,mode:"momentary"});else var _=new s.ButtonV({points:[{x:1,y:0},{x:.33,y:0},{x:.33,y:.625},{x:0,
y:.625},{x:0,y:1},{x:1,y:1},{x:1,y:0}],textLocation:{x:.5,y:.75},target:this.target,onvaluechange:this.onvaluechange,startnote:e,octave:t,frequency:261.626*Math.pow(2,(e+12*t-49)/12),background:this._fill(),fill:this._background(),stroke:this._stroke(),bounds:[l/h*this.width+this.x,this.y,this.width/h,this.height],label:this.noteLabels?n[e]:null,requiresFocus:!1,mode:"momentary"});this.children.push(_),this.panel.add(_),this._initialized=!0},_init:function(){this.placeKeys()}}).init(arguments[0])},s.Piano.prototype=s.Widget,s.Knob=function(){s.extend(this,{type:"Knob",_value:0,serializeMe:["usesRotation","knobBuffer"],knobBuffer:3,lastPosition:0,usesRotation:!0,draw:function(){var t=this._x(),e=this._y(),i=this._width(),n=(this._height(),i/2);this.ctx.clearRect(t,e,2*n,2*n),this.ctx.strokeStyle=this._stroke(),this.ctx.fillStyle=this._background();var s=.6*Math.PI,o=.4*Math.PI;if(this.ctx.beginPath(),this.ctx.arc(t+n,e+n,n-this.knobBuffer,s,o,!1),this.ctx.arc(t+n,e+n,.3*(n-this.knobBuffer),o,s,!0),this.ctx.closePath(),this.ctx.fill(),this.ctx.fillStyle=this._fill(),this.centerZero){var r,a=1.5*Math.PI;r=this._value>=.5?Math.PI*(1.5+1.8*(this._value-.5)):Math.PI*(1.5-.9*(1-2*this._value)),this._value>1.8*Math.PI&&(this._value-=1.8*Math.PI),this.ctx.beginPath(),this.ctx.arc(t+n,e+n,n-this.knobBuffer,a,r,this._value<.5),this.ctx.arc(t+n,e+n,.3*(n-this.knobBuffer),r,a,this._value>.5),this.ctx.closePath(),this.ctx.fill()}else{if(this.isInverted)var h=Math.PI*(.4-1.8*this._value);else{var h=.6*Math.PI+1.8*this._value*Math.PI;h>2*Math.PI&&(h-=2*Math.PI)}this.ctx.beginPath(),this.isInverted?(this.ctx.arc(t+n,e+n,n-this.knobBuffer,o,h,!0),this.ctx.arc(t+n,e+n,.3*(n-this.knobBuffer),h,o,!1)):(this.ctx.arc(t+n,e+n,n-this.knobBuffer,s,h,!1),this.ctx.arc(t+n,e+n,.3*(n-this.knobBuffer),h,s,!0)),this.ctx.closePath(),this.ctx.fill()}this.ctx.beginPath(),this.ctx.arc(t+n,e+n,n-this.knobBuffer,s,o,!1),this.ctx.arc(t+n,e+n,.3*(n-this.knobBuffer),o,s,!0),this.ctx.closePath(),this.ctx.stroke(),null!==this.label&&(this.ctx.fillStyle=this._stroke(),this.ctx.textBaseline="middle",this.ctx.textAlign="center",this.ctx.font=this._font(),this.ctx.fillText(this.label,t+n,e+2.25*n))},setValue:function(t,e){var i=this.max-this.min,n=t;this.lastValue=this.value,this.value=t,0!==this.min||1!==this.max?(n-=this.min,this._value=n/i):this._value=this.value,this.value!==this.lastValue&&(this.sendTargetMessage(),this.onvaluechange&&this.onvaluechange(),this.refresh(),this.lastValue=this.value),e||this.refresh()},changeValue:function(t,e){if(this.hasFocus||!this.requiresFocus){var i=this._width()/2;if(this.lastValue=this.value,this.usesRotation){var n=i-t,s=i-e,o=Math.PI+Math.atan2(s,n);this._value=(o+1.5*Math.PI)%(2*Math.PI)/(2*Math.PI),this.lastRotationValue>.8&&this._value<.2?this._value=1:this.lastRotationValue<.2&&this._value>.8&&(this._value=0)}else this.lastPosition!=-1&&(this._value-=(e-this.lastPosition)/(2*i));this._value>1&&(this._value=1),this._value<0&&(this._value=0),this.lastRotationValue=this._value,this.lastPosition=e;var r=this.max-this.min;this.value=this.min+this._value*r,this.value!==this.lastValue&&(this.sendTargetMessage(),this.onvaluechange&&this.onvaluechange(),this.refresh(),this.lastValue=this.value)}},hitTest:function(t){return t.x>=this._x()&&t.x<this._x()+this._width()&&t.y>=this._y()&&t.y<this._y()+this._width()},mousedown:function(t){this.lastPosition=t.y-this._y(),this.changeValue(t.x-this._x(),t.y-this._y())},mousemove:function(t){this.changeValue(t.x-this._x(),t.y-this._y())},mouseup:function(t){},touchstart:function(t){this.lastPosition=t.y-this._y(),this.changeValue(t.x-this._x(),t.y-this._y())},touchmove:function(t){this.changeValue(t.x-this._x(),t.y-this._y())},touchend:function(t){},_init:function(){var t=this.width,e=this.height;Object.defineProperty(this,"width",{configurable:!0,get:function(){return t},set:function(i){this.clear(),t=e=i,this.refresh()}}),Object.defineProperty(this,"height",{configurable:!0,get:function(){return e},set:function(t){e=t}})}}).init(arguments[0])},s.Knob.prototype=s.Widget,s.XY=function(){var t=this,e={x:0,y:0},n={x:0,y:0},o={x:0,y:0},a=0;s.extend(this,{type:"XY",_value:0,serializeMe:["childWidth","childHeight","numChildren","usePhysics","values","friction","maxVelocity","detectCollisions","fps"],childWidth:25,childHeight:25,children:[],values:[],_values:[],numChildren:1,usePhysics:!0,friction:.9,activeTouch:null,maxVelocity:10,detectCollisions:!0,touchCount:0,timer:null,fps:30,outputInitialValues:!0,rainbow:function(){for(var t=0;t<this.children.length;t++){var e=this.children[t];e.fill=s.XY.colors[t%s.XY.colors.length]}},remove:function(){this.stopAnimation(),s.widgets.splice(s.widgets.indexOf(this),1)},add:function(){this.usePhysics&&this.startAnimation()},startAnimation:function(){null===this.timer&&(this.timer=setInterval(function(){t.refresh()},1/this.fps*1e3))},stopAnimation:function(){clearInterval(this.timer),this.timer=null},animate:function(){for(var t=(this._x(),this._y(),this._width()),e=this._height(),n=!1,s=0;s<this.children.length;s++){var o=(moveY=!1,this.children[s]);o.x+o.vx<t&&o.x+o.vx>0?o.x+=o.vx:o.x+o.vx>=t&&o.vx>0?o.vx*=-1:o.x+o.vx<=0&&o.vx<0?o.vx*=-1:o.x+=o.vx,o.y+o.vy<e&&o.y+o.vy>0?o.y+=o.vy:o.y+o.vy>=e&&o.vy>0?o.vy*=-1:o.y+o.vy<=0&&o.vy<0?o.vy*=-1:o.y+=o.vy,o.vx*=this.friction,o.vy*=this.friction;var r=o.x/t,a=o.y/e,h=this.max-this.min;this.values[o.id].x===r&&this.values[o.id].y===a||(this.values[o.id].x=this.min+h*r,this.values[o.id].y=this.min+h*a,n=!0),this.detectCollisions&&(o.collideFlag?o.collideFlag=!1:this.collisionTest(o)),o.vx=Math.abs(o.vx)>this.maxVelocity?this.maxVelocity*i(o.vx):o.vx,o.vy=Math.abs(o.vy)>this.maxVelocity?this.maxVelocity*i(o.vy):o.vy}n&&(this.sendTargetMessage(),this.onvaluechange&&this.onvaluechange())},sendValues:function(){var t="";this._values.length=0;for(var e=0;e<this.values.length;e++)t+="ff",this._values.push(this.values[e].x),this._values.push(this.values[e].y);"OSC"===this.target?s.OSC&&s.OSC.send(this.key,t,this._values):"WebSocket"===this.target&&s.Socket&&s.Socket.send(JSON.stringify({address:this.key,parameters:this._values}))},collisionTest:function(t){for(var e=2*this.childWidth*(2*this.childWidth),i=0;i<this.children.length;i++){var n=this.children[i];if(t.id!==n.id){var s=Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2);s<e&&this.collide(t,n)}}},collide:function(t,s){e.x=t.x-s.x,e.y=t.y-s.y,n.x=t.vx-s.vx,n.y=t.vy-s.vy,a=Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2)),o.x=e.x/a,o.y=e.y/a;var r=o.x*n.x+o.y*n.y;s.vx=t.vx+r*o.x,s.vy=t.vy+r*o.y,t.vx=s.vx-r*o.x,t.vy=s.vy-r*o.y,s.x-=o.x,s.y-=o.y,t.x+=o.x,t.y+=o.y,t.vx=Math.abs(t.vx)>this.maxVelocity?this.maxVelocity*i(t.vx):t.vx,t.vy=Math.abs(t.vy)>this.maxVelocity?this.maxVelocity*i(t.vy):t.vy,s.vx=Math.abs(s.vx)>this.maxVelocity?this.maxVelocity*i(s.vx):s.vx,s.vy=Math.abs(s.vy)>this.maxVelocity?this.maxVelocity*i(s.vy):s.vy,t.collideFlag=!0,s.collideFlag=!0},draw:function(){var t=this._x(),e=this._y(),i=this._width(),n=this._height();this.usePhysics&&this.animate(),this.ctx.fillStyle=this._background(),this.ctx.strokeStyle=this._stroke(),this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(t,e),this.ctx.lineTo(t+i,e),this.ctx.lineTo(t+i,e+n),this.ctx.lineTo(t,e+n),this.ctx.lineTo(t,e),this.ctx.fill(),this.ctx.stroke(),this.ctx.clip(),this.ctx.fillStyle=this._fill();for(var s=0;s<this.children.length;s++){var o=this.children[s];this.ctx.lineWidth=2,this.ctx.fillStyle=o.fill||this._fill(),this.ctx.beginPath(),this.ctx.arc(t+o.x,e+o.y,this.childWidth,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke(),this.ctx.textBaseline="middle",this.ctx.textAlign="center",this.ctx.fillStyle=this._stroke(),this.ctx.font=this._font(),this.ctx.fillText(o.id,t+o.x,e+o.y)}this.ctx.closePath(),this.ctx.restore()},changeValue:function(t,e,i){!this.hasFocus&&this.requiresFocus||(t.x=e,t.x<0&&(t.x=0),t.x>this._width()&&(t.x=this._width()),t.y=i,t.y<0&&(t.y=0),t.y>this._height()&&(t.y=this._height()),this.values[t.id].x=e/this._width(),this.values[t.id].y=i/this._height(),this.onvaluechange&&this.onvaluechange(),this.usePhysics||(this.sendTargetMessage(),this.refresh()))},makeChildren:function(){for(var t=0;t<this.numChildren;t++){var e=Math.random()*this._width(),i=Math.random()*this._height();this.children.push({id:t,x:e,y:i,vx:0,vy:0,collideFlag:!1,isActive:!1,lastPosition:null}),this.values.push({x:null,y:null})}},touchEvent:function(t){var e=this.hitTest(t),i=r(t.type);e?("touchstart"===t.type?(this.hasFocus=!0,this.touchCount++,this.trackTouch(t.x-this._x(),t.y-this._y(),t)):this[t.type]&&this[t.type](t,e,t.childID),this["on"+t.type]&&this["on"+t.type](t,e,t.childId),this["on"+i]&&this["on"+i](t,e)):"touchend"===t.type&&(this.touchCount--,0===this.touchCount?this.hasFocus=!1:this.touchCount<0&&(this.touchCount=0),this.touchend(t),this["on"+t.type]&&this["on"+t.type](t,e,t.childId),this["on"+i]&&this["on"+i](t,e))},trackMouse:function(t,e,i){for(var n=1e4,s=null,o=null,r=0;r<this.children.length;r++){var a=this.children[r],h=Math.abs(a.x-t),l=Math.abs(a.y-e);h+l<n&&(n=h+l,s=a,o=r)}s.isActive=!0,s.vx=0,s.vy=0,null!=s&&this.changeValue(s,t,e),this.activeTouch=s,this.activeTouch.lastTouch=null,this.lastTouched=s},mousedown:function(t){this.hitTest(t)&&this.trackMouse(t.x-this._x(),t.y-this._y())},mousemove:function(t){if(this.hitTest(t)&&null!==this.activeTouch){if(null===this.activeTouch.lastTouch)this.activeTouch.lastTouch={x:t.x-this._x(),y:t.y-this._y()};else{var e={x:t.x-this._x(),y:t.y-this._y()};this.activeTouch.velocity={x:e.x-this.activeTouch.lastTouch.x,y:e.y-this.activeTouch.lastTouch.y},this.activeTouch.lastTouch=e}this.changeValue(this.activeTouch,t.x-this._x(),t.y-this._y())}},mouseup:function(t){null!==this.activeTouch&&(this.activeTouch.vx=this.activeTouch.velocity.x,this.activeTouch.vy=this.activeTouch.velocity.y,this.activeTouch.lastTouch=null,this.activeTouch=null);for(var e=0;e<this.children.length;e++)this.children[e].isActive=!1},trackTouch:function(t,e,i){for(var n=1e4,s=null,o=null,r=0;r<this.children.length;r++){var a=this.children[r],h=Math.abs(a.x-t),l=Math.abs(a.y-e);h+l<n&&!a.isActive&&(n=h+l,s=a,o=r)}return s.isActive=!0,s.vx=0,s.vy=0,s.identifier=i.identifier,s.childID=o,null!=s&&this.changeValue(s,t,e),this.lastTouched=s,s.childID},touchstart:function(t){},touchmove:function(t){for(var e=0;e<this.children.length;e++)if(_t=this.children[e],t.identifier===_t.identifier){this.changeValue(_t,t.x-this._x(),t.y-this._y());var i={x:t.x-this._x(),y:t.y-this._y()};null!==_t.lastPosition&&(_t.velocity={x:i.x-_t.lastPosition.x,y:i.y-_t.lastPosition.y}),_t.lastPosition=i}},touchend:function(t){for(var e=!1,i=null,n=0;n<this.children.length;n++){var s=this.children[n];t.identifier===s.identifier&&(s.velocity&&(s.vx=s.velocity.x,s.vy=s.velocity.y),s.lastPosition=null,s.isActive=!1,e=!0,i=n.childID)}e&&(this.touchUp=i)},_init:function(){this.makeChildren(),this.outputInitialValues&&this.sendTargetMessage()}}).init(arguments[0]),this.requiresFocus=!1,this.half=this.childWidth/2;var h=this.numChildren;Object.defineProperty(this,"numChildren",{get:function(){return h},set:function(t){for(;t>h;)this.children.push({id:this.children.length,x:Math.random()*this._width(),y:Math.random()*this._height(),vx:0,vy:0,collideFlag:!1,isActive:!1,lastPosition:null}),this.values.push({x:null,y:null}),h++;for(;t<h;)this.chidren.pop(),this.values.pop(),h--;this.refresh(),h=t}})},s.XY.prototype=s.Widget,s.XY.colors=["rgba(255,0,0,.35)","rgba(0,255,0,.35)","rgba(0,0,255,.35)","rgba(0,255,255,.35)","rgba(255,0,255,.35)","rgba(255,255,0,.35)"],s.Menu=function(){s.extend(this,{type:"Menu",_value:0,serializeMe:["options","fontSize"],options:[],fontSize:15,touchEvent:function(t){this.hitTest(t)&&t.stopPropagation()},_init:function(){this.element=n("<select>");for(var t=0;t<this.options.length;t++){var e=n("<option>"+this.options[t]+"</option>");this.element.append(e)}this.element.css({position:"absolute",backgroundColor:this._background(),color:this._stroke(),left:this._x()+this.panel.x,top:this._y()+this.panel.y,width:this._width(),height:this._height(),fontSize:this.fontSize,display:"block",border:"1px solid "+this._stroke()}),this.css&&this.element.css(this.css);var i=this;this.element.change(function(t){var e=i.value;i.value=i.element.val(),i.sendTargetMessage(),i.onvaluechange(i.value,e)}),this.options.indexOf(this.value)!==-1?this.element.val(this.value):this.element.val(this.options[0]),n(this.container).append(this.element)}}).init(arguments[0])},s.Menu.prototype=s.Widget,s.Label=function(){s.extend(this,{type:"Label",serializeMe:["size","style","hAlign","vAlign","font"],size:12,style:"normal",hAlign:"center",vAlign:"top",font:"sans-serif",draw:function(){this.ctx.font=this.style+" "+this.size+"px "+this.font,this.ctx.textAlign=this.hAlign,this.ctx.textBaseline=this.vAlign;var t,e,i=this.ctx.measureText(this.lastValue),n={x:0,y:this._y()-this.size/2,width:i.width,height:this.size};switch(this.hAlign){case"center":t=this._x()+this._width()/2,n.x=t-i.width/2;break;case"left":t=this._x(),n.x=t;break;case"right":t=this._x()+this._width(),n.x=t-i.width}switch(this.vAlign){case"middle":e=this._y()+this._height()/2,n.y=e-this.size/2;break;case"top":e=this._y(),n.y=e;break;case"bottom":e=this._y()+this._height(),n.y=e-this.size/2}this.ctx.clearRect(n.x,n.y,n.width,2*n.height),this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(this._x(),this._y()),this.ctx.lineTo(this._x()+this._width(),this._y()),this.ctx.lineTo(this._x()+this._width(),this._y()+this._height()),this.ctx.lineTo(this._x(),this._y()+this._height()),this.ctx.lineTo(this._x(),this._y()),this.ctx.closePath(),this.ctx.clip(),this.ctx.fillStyle=this._stroke(),this.ctx.fillText(this.value,t,e),this.ctx.restore(),this.lastValue=this.value}}).init(arguments[0]),this.lastValue=this.value},s.Label.prototype=s.Widget,s.TextField=function(){s.extend(this,{type:"TextField",serializeMe:["fontSize"],fontSize:15,touchEvent:function(t){if(this.hitTest(t)){var e=document.createEvent("TouchEvent");e.initUIEvent("touchstart",!0,!0),e.view=window,e.screenX=t.screenX,e.screenY=t.screenY,e.clientX=t.clientX,e.clientY=t.clientY,e.bubbles=!1,e.view=window,e.altKey=!1,e.ctrlKey=!1,e.shiftKey=!1,e.metaKey=!1,this.element.dispatchEvent(e)}},_init:function(){this.element=n("<input>"),0!==this.value&&this.element.val(this.value),this.element.css({position:"absolute",backgroundColor:this._background(),color:this._fill(),left:this._x()+this.panel.x,top:this._y()+this.panel.y,width:this._width(),height:this._height(),fontSize:this.fontSize,display:"block",border:"1px solid "+this._stroke()}),this.css&&this.element.css(this.css);var t=this;this.element.change(function(e){var i=t.value;t.value=t.element.val(),t.sendTargetMessage(),t.onvaluechange(t.value,i)}),n(this.container).append(this.element)}}).init(arguments[0])},s.TextField.prototype=s.Widget,s.MultiSlider=function(){s.extend(this,{type:"MultiSlider",isVertical:!0,serializeMe:["isVertical","count","values"],values:[],_values:[],count:16,draw:function(){var t=this._x(),e=this._y(),i=this._width(),n=this._height(),s=i/this.count;this.ctx.fillStyle=this._background(),this.ctx.fillRect(t,e,i,n),this.ctx.fillStyle=this._fill(),this.ctx.strokeStyle=this._stroke();for(var o=0;o<this.count;o++){var r=o*s+t;this.ctx.fillRect(r,e+n-this._values[o]*n,s,this._values[o]*n),this.ctx.strokeRect(r,e,s,n)}},setValue:function(t,e){this.values[t]=e,this._values[t]=e,this.refresh()},resetValues:function(){for(var t=0;t<this.count;t++)this.values[t]=this.min+(this.max-this.min)*this._values[t],"OSC"!==this.target?this.sendTargetMessage():s.OSC&&s.OSC.send(this.key,"if",[sliderHit,this.values[sliderHit]]),this.onvaluechange&&this.onvaluechange(sliderHit,this.values[sliderHit]);this.refresh()},changeValue:function(t,e){if(this.hasFocus||!this.requiresFocus){var i=this._width(),n=i/this.count,o=Math.floor(t/n);_value=0,_value=1-e/this._height(),_value<0?_value=0:_value>1&&(_value=1),this.values[o]=this.min+(this.max-this.min)*_value,this._values[o]=_value,"OSC"!==this.target?this.sendTargetMessage():s.OSC&&s.OSC.send(this.key,"if",[o,this.values[o]]),this.onvaluechange&&this.onvaluechange(o,this.values[o]),this.refresh()}},mousedown:function(t,e){e&&s.mouseDown&&this.changeValue(t.x-this._x(),t.y-this._y())},mousemove:function(t,e){e&&s.mouseDown&&this.changeValue(t.x-this._x(),t.y-this._y())},mouseup:function(t,e){e&&s.mouseDown&&this.changeValue(t.x-this._x(),t.y-this._y())},touchstart:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())},touchmove:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())},touchend:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())},onvaluechange:function(t,e){}}).init(arguments[0]);var t=this.x,e=this.y,i=this.width,n=this.height,o=[t,e,i,n],r=this.count;delete this.bounds,Object.defineProperties(this,{x:{get:function(){return t},set:function(e){t=e,this.refresh()}},y:{get:function(){return e},set:function(t){e=t,this.refresh()}},width:{get:function(){return i},set:function(t){i=t,this.refresh()}},height:{get:function(){return n},set:function(t){n=t,this.refresh()}},bounds:{get:function(){return o},set:function(s){o=s,t=o[0],e=o[1],i=o[2],n=o[3],this.refresh()}},count:{get:function(){return r},set:function(t){r=t,this.refresh()}}})},s.MultiSlider.prototype=s.Widget,s.MultiButton=function(){s.extend(this,{type:"MultiButton",mode:"toggle",serializeMe:["mode","rows","columns","requiresFocus"],rows:8,values:[],_values:[],lastValues:[],mouseOver:null,columns:8,draw:function(){var t=this._x(),e=this._y(),i=this._width(),n=this._height(),s=i/this.columns,o=n/this.rows;this.ctx.strokeStyle=this._stroke();for(var r=0;r<this.rows;r++)for(var a=0;a<this.columns;a++){var h=t+a*s,l=e+r*o,u=r*this.columns+a;this._values[u]?this.ctx.fillStyle=this._fill():this.ctx.fillStyle=this._background(),this.ctx.fillRect(h,l,s,o),this.ctx.strokeRect(h,l,s,o)}},setValue:function(t,e,i){var n=t*this.columns+e;this._values[n]=this.values[n]=this.lastValues[n]=i,this.draw()},changeValue:function(t,e){if(this.hasFocus||!this.requiresFocus){var i=this._width(),n=this._height(),o=i/this.columns,r=Math.floor(t/o),a=n/this.rows,h=Math.floor(e/a),l=h*this.columns+r;if(l!==this.mouseOver){if(this._values[l]=!this._values[l],this.values[l]=this._values[l]?this.max:this.min,(this.values[l]!==this.lastValues[l]||"contact"===this.mode)&&("OSC"!==this.target?this.sendTargetMessage():s.OSC&&s.OSC.send(this.key,"iif",[h,r,this.values[l]]),this.onvaluechange&&this.onvaluechange(h,r,this.values[l]),this.draw(),this.lastValues[l]=this.values[l],"contact"===this.mode)){var u=this;setTimeout(function(){u._values[l]=0,u.draw()},75)}this.mouseOver=l}}},mousedown:function(t,e){e&&s.mouseDown&&this.changeValue(t.x-this._x(),t.y-this._y())},mousemove:function(t,e){e&&s.mouseDown&&this.changeValue(t.x-this._x(),t.y-this._y())},mouseup:function(t,e){e&&s.mouseDown&&this.changeValue(t.x-this._x(),t.y-this._y()),this.mouseOver=null},touchstart:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())},touchmove:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())},touchend:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())}}).init(arguments[0]),this.requiresFocus=!1;var t=this.x,e=this.y,i=this.width,n=this.height,o=[t,e,i,n],r=this.rows,a=this.columns;delete this.bounds,Object.defineProperties(this,{x:{get:function(){return t},set:function(e){t=e,this.refresh()}},y:{get:function(){return e},set:function(t){e=t,this.refresh()}},width:{get:function(){return i},set:function(t){i=t,this.refresh()}},height:{get:function(){return n},set:function(t){n=t,this.refresh()}},bounds:{get:function(){return o},set:function(s){o=s,t=o[0],e=o[1],i=o[2],n=o[3],this.refresh()}},rows:{get:function(){return r},set:function(t){r=t,this.refresh()}},columns:{get:function(){return a},set:function(t){a=t,this.refresh()}}})},s.MultiButton.prototype=s.Widget,s.Accelerometer=function(){var t=this,e=9.80665;s.extend(this,{type:"Accelerometer",serializeMe:["delay"],delay:100,min:0,max:1,values:[0,0,0],update:function(e){var i=e.acceleration;t.x=t.values[0]=t.min+(0-t.hardwareMin+i.x)/t.hardwareRange*t.max,t.y=t.values[1]=t.min+(0-t.hardwareMin+i.y)/t.hardwareRange*t.max,t.z=t.values[2]=t.min+(0-t.hardwareMin+i.z)/t.hardwareRange*t.max,"undefined"!=typeof t.onvaluechange&&t.onvaluechange(t.x,t.y,t.z),t.sendTargetMessage()},start:function(){return window.addEventListener("devicemotion",this.update,!0),this},stop:function(){return window.removeEventListener("devicemotion",this.update),this}}).init(arguments[0]),s.isAndroid?(this.hardwareMin=e,this.hardwareMax=e):(this.hardwareMin=-2.307*e,this.hardwareMax=2.307*e),this.hardwareRange=this.hardwareMax-this.hardwareMin},s.Accelerometer.prototype=s.Widget,s.Orientation=function(){var t=this;s.extend(this,{type:"Orientation",serializeMe:["delay"],delay:100,values:[0,0,0],update:function(e){t.roll=t.values[0]=t.min+(90+e.gamma)/180*t.max,t.pitch=t.values[1]=t.min+(180+e.beta)/360*t.max,t.yaw=t.values[2]=t.min+e.alpha/360*t.max,isNaN(e.webkitCompassHeading)||(t.heading=t.min+e.webkitCompassHeading/360*t.max),t.sendTargetMessage(),"undefined"!=typeof t.onvaluechange&&t.onvaluechange(t.pitch,t.roll,t.yaw,t.heading)},start:function(){return window.addEventListener("deviceorientation",function(e){t.update(e)},!0),this},stop:function(){window.removeEventListener("deviceorientation")}}).init(arguments[0])},s.Orientation.prototype=s.Widget,s.Range=function(){s.extend(this,{type:"Range",serializeMe:["handleSize"],handleSize:20,values:[0,1],_values:[0,1],draw:function(){var t=this._x(),e=this._y(),i=this._width(),n=this._height();this.ctx.fillStyle=this._background(),this.ctx.clearRect(t,e,i,n);var s=t+this._values[1]*i-this.handleSize,o=t+this._values[0]*i;this.ctx.fillStyle=this._background(),this.ctx.fillRect(t,e,i,n),this.ctx.fillStyle=this._fill(),this.ctx.fillRect(o,e,s-o,n),this.ctx.fillStyle=this._stroke(),this.ctx.fillRect(o,e,this.handleSize,n),this.ctx.fillRect(s,e,this.handleSize,n),this.ctx.strokeStyle=this._stroke(),this.ctx.strokeRect(t,e,i,n)},changeValue:function(t,e){if(this.hasFocus||!this.requiresFocus){var i=this.isVertical?1-e/this._height():t/this._width();i<0?i=0:i>1&&(i=1);var n=this.max-this.min;Math.abs(i-this._values[0])<Math.abs(i-this._values[1])?(this._values[0]=i,this.values[0]=this.min+n*i):(this._values[1]=i,this.values[1]=this.min+n*i),this.refresh(),this.values[0]===this.lastLeftValue&&this.values[1]===this.lastRightValue||(this.onvaluechange&&this.onvaluechange(this.values[0],this.values[1]),this.refresh(),this.lastLeftValue=this.values[0],this.lastRightValue=this.values[1],this.sendTargetMessage())}},mousedown:function(t,e){e&&s.mouseDown&&this.changeValue(t.x-this._x(),t.y-this._y())},mousemove:function(t,e){e&&s.mouseDown&&this.changeValue(t.x-this._x(),t.y-this._y())},mouseup:function(t,e){e&&s.mouseDown&&this.changeValue(t.x-this._x(),t.y-this._y())},touchstart:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())},touchmove:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())},touchend:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())}}).init(arguments[0])},s.Range.prototype=s.Widget,s.Paint=function(){s.extend(this,{lines:[],startTime:0,isAnimating:!1,animationPoint:0,timer:null,shouldLoop:!0,prevTimestamp:null,values:[0,0],draw:function(){var t=this._x(),e=this._y(),i=this._width(),n=this._height();if(this.ctx.fillStyle=this._background(),this.ctx.strokeStyle=this._stroke(),this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(t,e),this.ctx.lineTo(t+i,e),this.ctx.lineTo(t+i,e+n),this.ctx.lineTo(t,e+n),this.ctx.lineTo(t,e),this.ctx.fill(),this.ctx.stroke(),this.ctx.clip(),this.ctx.fillStyle=this._fill(),this.lines.length>=1){this.ctx.lineWidth=8;for(var s=0;s<this.lines.length;s++){var o=this.lines[s];if(o.length>=2){this.ctx.moveTo(o[0].x*i,o[0].y*n),this.ctx.beginPath();for(var r=1;r<o.length-2;r++){var a=(o[r].x+o[r+1].x)/2,h=(o[r].y+o[r+1].y)/2;this.ctx.quadraticCurveTo(o[r].x*i,o[r].y*n,a*i,h*n)}this.ctx.stroke()}}}this.ctx.restore()},animate:function(t){var e=this;if(this.isAnimating!==!1){var i=this.lines[0],n=i[this.animationPoint],s=i[this.animationPoint+1];if(this.animationPoint>=i.length-1){if(this.shouldLoop)return this.animationPoint=0,this.draw(),void(this.timeout=setTimeout(function(){e.animate()},5));if(this.ctx.fillStyle=this._background(),this.ctx.fillRect(0,0,this._width(),this._height()),0!==this.speedMod)return}this.ctx.save(),this.ctx.strokeStyle="#f00",this.ctx.lineWidth=8,this.ctx.beginPath(),this.ctx.moveTo(n.x*this._width(),n.y*this._height()),this.ctx.lineTo(s.x*this._width(),s.y*this._height()),this.ctx.stroke(),this.ctx.restore(),this.timeout=setTimeout(function(){e.animate()},n.timestamp-this.prevTimestamp),this.prevTimestamp=n.timestamp,this.animationPoint++,this.values=[n.x,n.y],this.sendTargetMessage()}},startAnimation:function(){this.animate()},stopAnimation:function(){this.timer&&clearInterval(this.timer)},mousedown:function(t){this.hitTest(t)&&(this.lines=[],this.animationPoint=0,0===this.lines.length&&(this.startTime=Date.now()),this.lines.push([]),this.isDrawing=!0,this.isAnimating=!1)},mousemove:function(t){if(this.hitTest(t)&&null!==this.activeTouch&&this.isDrawing){var e=this.lines[this.lines.length-1];e&&(e.push({x:t.x/this._width(),y:t.y/this._height(),timestamp:Date.now()-this.startTime}),this.draw())}},mouseup:function(t){this.isDrawing=!1,this.lines.length>0&&(this.isAnimating=!0,this.animate())},touchstart:function(t){this.hitTest(t)&&(this.lines=[],this.animationPoint=0,0===this.lines.length&&(this.startTime=Date.now()),this.lines.push([]),this.isDrawing=!0,this.isAnimating=!1),this.activeTouch=t},touchmove:function(t){if(this.hitTest(t)&&null!==this.activeTouch&&this.isDrawing){var e=this.lines[this.lines.length-1];e&&(e.push({x:t.x/this._width(),y:t.y/this._height(),timestamp:Date.now()-this.startTime}),this.draw())}},touchend:function(t){this.isDrawing=!1,this.lines.length>0&&(this.isAnimating=!0,this.animate())}}).init(arguments[0])},s.Paint.prototype=s.Widget,s.Patchbay=function(){s.extend(this,{type:"Patchbay",points:[],minWidth:80,cableWidth:5,start:null,over:null,connections:[],rowLength:null,selectedConnection:null,patchOutlineWidth:3,draw:function(){var t=this._x(),e=this._y(),i=this._width(),n=this._height();this.points.length;this.ctx.fillStyle=this._background(),this.ctx.strokeStyle=this._stroke(),this.ctx.clearRect(t,e,i,n),this.layout(),this.drawSegments(),this.drawPatchPoints(),this.drawConnections()},layout:function(){var t=(this._x(),this._y(),this._width()),e=this._height();this.rows=1,this.patchWidth=t/this.points.length,this.patchWidth<this.minWidth&&(this.patchWidth=this.minWidth),this.rows=Math.ceil(this.patchWidth*this.points.length/t),this.patchHeight=e/this.rows,this.columns=Math.floor(t/this.patchWidth)},drawSegments:function(){var t=this._x(),e=this._y(),i=this._width();this._height(),this.points.length;this.ctx.fillStyle=this._fill();for(var n=0,s=1,o=0;o<this.points.length;o++)this.start===o?(this.ctx.fillStyle="#777",this.ctx.fillRect(t+n,e+this.patchHeight*(s-1),this.patchWidth,this.patchHeight)):this.over===o&&(this.ctx.fillStyle="#744",this.ctx.fillRect(t+n,e+this.patchHeight*(s-1),this.patchWidth,this.patchHeight)),this.ctx.fillStyle=this._stroke(),this.ctx.textBaseline="middle",this.ctx.textAlign="center",this.ctx.font=this._font(),this.ctx.font="normal 12px Helvetica","undefined"!=typeof this.points[o].name&&this.ctx.fillText(this.points[o].name,n+this.patchWidth/2,e+((s-1)*this.patchHeight+.1*this.patchHeight)),"undefined"!=typeof this.points[o].name2&&this.ctx.fillText(this.points[o].name2,n+this.patchWidth/2,e+((s-1)*this.patchHeight+.9*this.patchHeight)),n+=this.patchWidth,this.points[o].row=s,n+this.patchWidth>i&&(n=0,s++)},drawPatchPoints:function(){var t=(this._x(),this._y()),e=this._width();this._height(),this.points.length;this.ctx.fillStyle=this._background();for(var i=0,n=1,s=0;s<this.points.length;s++)this.ctx.beginPath(),this.ctx.arc(i+this.patchWidth/2,t+this.patchHeight/2+this.patchHeight*(n-1),this.patchWidth/4,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill(),this.ctx.lineWidth=this.patchOutlineWidth,this.ctx.stroke(),this.points[s].row=n,this.ctx.lineWidth=1,this.ctx.strokeRect(i,t+this.patchHeight*(n-1),this.patchWidth,this.patchHeight),i+=this.patchWidth,i+this.patchWidth>e&&(i=0,n++)},drawConnections:function(){var t=this._x(),e=this._y();this._width(),this._height();this.ctx.lineWidth=this.cableWidth;for(var i=0;i<this.connections.length;i++){var n=this.connections[i],s=this.connections[i][0],o=this.connections[i][1],r=t+this.patchWidth*(s%this.columns)+this.patchWidth/2,a=e+this.patchHeight/2+this.patchHeight*Math.floor(s/this.columns),h=t+this.patchWidth*(o%this.columns)+this.patchWidth/2,l=e+this.patchHeight/2+this.patchHeight*Math.floor(o/this.columns),u=r,c=a+.5*this.patchHeight,p=h,f=l+.5*this.patchHeight;if(n.selected)this.ctx.strokeStyle="#0f0";else{var d=this.ctx.createLinearGradient(r,a,h,l);d.addColorStop(0,"rgba(64, 64, 64, 1.000)"),d.addColorStop(1,"rgba(204, 204, 204, 1.000)"),this.ctx.strokeStyle=d}this.ctx.beginPath(),this.ctx.moveTo(r,a),this.ctx.bezierCurveTo(u,c,p,f,h,l),this.ctx.stroke(),n.edge=[r,a,u,c,p,f,h,l]}},_init:function(){var t=(this._x(),this._y(),this._width()),e=this._height();this.patchWidth=t/this.points.length,this.patchHeight=e,this.rows=1},createConnection:function(t){var e=this.points[t[0]],i=this.points[t[1]];i.output!==!1&&(this.connections.push(t),this.onconnection&&this.onconnection(e,i))},changeValue:function(t,e){},hitTestEdges:function(t){for(var e=!1,i=t.x-this._x(),n=t.y-this._y(),s=0;s<this.connections.length;s++){var o=this.connections[s].edge;if(this.ctx.beginPath(),this.ctx.moveTo(o[0],o[1]),this.ctx.bezierCurveTo(o[2],o[3],o[4],o[5],o[6],o[7]),this.ctx.isPointInStroke(i,n)){this.connections.forEach(function(t,e,i){t.selected=!1}),this.connections[s].selected=!0,this.selectedConnection=this.connections[s],e=!0;break}}return e},mousedown:function(t,e){if(e&&s.mouseDown){if(!this.hitTestEdges(t)){var i=Math.floor((t.x-this._x()/this._width())/(this._width()/this.columns)),n=Math.floor((t.y-this._y()/this._height())/(this._height()/this.rows));this.start=n*this.columns+i,null!==this.selectedConnection&&(this.selectedConnection.selected=!1,this.selectedConnection=null)}this.draw()}},mousemove:function(t,e){if(e&&s.mouseDown){var i=Math.floor((t.x-this._x()/this._width())/(this._width()/this.columns)),n=Math.floor((t.y-this._y()/this._height())/(this._height()/this.rows)),o=this.over;this.over=n*this.columns+i,this.over!==o&&this.draw()}},mouseup:function(t,e){if(e){var i=Math.floor((t.x-this._x()/this._width())/(this._width()/this.columns)),n=Math.floor((t.y-this._y()/this._height())/(this._height()/this.rows)),s=n*this.columns+i;if(this.start!==s&&null!==this.start){for(var o=[this.start,s],r=!1,a=0;a<this.connections.length;a++)this.connections[a][0]===o[0]&&this.connections[a][1]===o[1]&&(r=!0);r||this.createConnection(o)}}this.over=null,this.start=null,this.draw()},onkeydown:function(t){var e=s.keyCodeToChar[t.keyCode];"Delete"!==e&&"Backspace"!==e||null!==this.selectedConnection&&(this.deleteConnection(this.selectedConnection),t.preventDefault())},deleteConnection:function(t){this.connections.splice(this.connections.indexOf(t),1),this.ondisconnection&&this.ondisconnection(this.points[t[0]],this.points[t[1]]),this.draw()},touchstart:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())},touchmove:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())},touchend:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())}}).init(arguments[0])},s.Patchbay.prototype=s.Widget,s.defineChildProperties=function(t,e){for(var i=0;i<e.length;i++)!function(){var n=e[i],s=t[n];Object.defineProperty(t,n,{get:function(){return s},set:function(e){s=e;for(var i=0;i<t.children.length;i++)t.children[i][n]=s}})}()},function(t){
var e={};t.publish=function(i,n){"object"==typeof e[i]&&e[i].forEach(function(e){e.apply(t,n||[])})},t.subscribe=function(t,i){return e[t]||(e[t]=[]),e[t].push(i),[t,i]},t.unsubscribe=function(i){var n=i[0];e[n]&&t.each(e[n],function(t){this==i[1]&&e[n].splice(t,1)})}}(n),e.exports=s}()},{jquery:2}],2:[function(t,e,i){!function(t,i){"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?i(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return i(t)}:i(t)}("undefined"!=typeof window?window:this,function(t,e){function i(t){var e="length"in t&&t.length,i=K.type(t);return"function"!==i&&!K.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t))}function n(t,e,i){if(K.isFunction(e))return K.grep(t,function(t,n){return!!e.call(t,n,t)!==i});if(e.nodeType)return K.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(at.test(e))return K.filter(e,t,i);e=K.filter(e,t)}return K.grep(t,function(t){return G.call(e,t)>=0!==i})}function s(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function o(t){var e=dt[t]={};return K.each(t.match(ft)||[],function(t,i){e[i]=!0}),e}function r(){Z.removeEventListener("DOMContentLoaded",r,!1),t.removeEventListener("load",r,!1),K.ready()}function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=K.expando+a.uid++}function h(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(xt,"-$1").toLowerCase(),i=t.getAttribute(n),"string"==typeof i){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:_t.test(i)?K.parseJSON(i):i)}catch(t){}gt.set(t,e,i)}else i=void 0;return i}function l(){return!0}function u(){return!1}function c(){try{return Z.activeElement}catch(t){}}function p(t,e){return K.nodeName(t,"table")&&K.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function f(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function d(t){var e=Nt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function y(t,e){for(var i=0,n=t.length;i<n;i++)vt.set(t[i],"globalEval",!e||vt.get(e[i],"globalEval"))}function m(t,e){var i,n,s,o,r,a,h,l;if(1===e.nodeType){if(vt.hasData(t)&&(o=vt.access(t),r=vt.set(e,o),l=o.events)){delete r.handle,r.events={};for(s in l)for(i=0,n=l[s].length;i<n;i++)K.event.add(e,s,l[s][i])}gt.hasData(t)&&(a=gt.access(t),h=K.extend({},a),gt.set(e,h))}}function v(t,e){var i=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&K.nodeName(t,e)?K.merge([t],i):i}function g(t,e){var i=e.nodeName.toLowerCase();"input"===i&&St.test(t.type)?e.checked=t.checked:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}function _(e,i){var n,s=K(i.createElement(e)).appendTo(i.body),o=t.getDefaultComputedStyle&&(n=t.getDefaultComputedStyle(s[0]))?n.display:K.css(s[0],"display");return s.detach(),o}function x(t){var e=Z,i=It[t];return i||(i=_(t,e),"none"!==i&&i||(Bt=(Bt||K("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Bt[0].contentDocument,e.write(),e.close(),i=_(t,e),Bt.detach()),It[t]=i),i}function b(t,e,i){var n,s,o,r,a=t.style;return i=i||Ht(t),i&&(r=i.getPropertyValue(e)||i[e]),i&&(""!==r||K.contains(t.ownerDocument,t)||(r=K.style(t,e)),Wt.test(r)&&Vt.test(e)&&(n=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=i.width,a.width=n,a.minWidth=s,a.maxWidth=o)),void 0!==r?r+"":r}function w(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function T(t,e){if(e in t)return e;for(var i=e[0].toUpperCase()+e.slice(1),n=e,s=Qt.length;s--;)if(e=Qt[s]+i,e in t)return e;return n}function S(t,e,i){var n=Ut.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function k(t,e,i,n,s){for(var o=i===(n?"border":"content")?4:"width"===e?1:0,r=0;o<4;o+=2)"margin"===i&&(r+=K.css(t,i+wt[o],!0,s)),n?("content"===i&&(r-=K.css(t,"padding"+wt[o],!0,s)),"margin"!==i&&(r-=K.css(t,"border"+wt[o]+"Width",!0,s))):(r+=K.css(t,"padding"+wt[o],!0,s),"padding"!==i&&(r+=K.css(t,"border"+wt[o]+"Width",!0,s)));return r}function O(t,e,i){var n=!0,s="width"===e?t.offsetWidth:t.offsetHeight,o=Ht(t),r="border-box"===K.css(t,"boxSizing",!1,o);if(s<=0||null==s){if(s=b(t,e,o),(s<0||null==s)&&(s=t.style[e]),Wt.test(s))return s;n=r&&(Y.boxSizingReliable()||s===t.style[e]),s=parseFloat(s)||0}return s+k(t,e,i||(r?"border":"content"),n,o)+"px"}function P(t,e){for(var i,n,s,o=[],r=0,a=t.length;r<a;r++)n=t[r],n.style&&(o[r]=vt.get(n,"olddisplay"),i=n.style.display,e?(o[r]||"none"!==i||(n.style.display=""),""===n.style.display&&Tt(n)&&(o[r]=vt.access(n,"olddisplay",x(n.nodeName)))):(s=Tt(n),"none"===i&&s||vt.set(n,"olddisplay",s?i:K.css(n,"display"))));for(r=0;r<a;r++)n=t[r],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?o[r]||"":"none"));return t}function E(t,e,i,n,s){return new E.prototype.init(t,e,i,n,s)}function A(){return setTimeout(function(){Yt=void 0}),Yt=K.now()}function C(t,e){var i,n=0,s={height:t};for(e=e?1:0;n<4;n+=2-e)i=wt[n],s["margin"+i]=s["padding"+i]=t;return e&&(s.opacity=s.width=t),s}function q(t,e,i){for(var n,s=(ie[e]||[]).concat(ie["*"]),o=0,r=s.length;o<r;o++)if(n=s[o].call(i,e,t))return n}function M(t,e,i){var n,s,o,r,a,h,l,u,c=this,p={},f=t.style,d=t.nodeType&&Tt(t),y=vt.get(t,"fxshow");i.queue||(a=K._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,h=a.empty.fire,a.empty.fire=function(){a.unqueued||h()}),a.unqueued++,c.always(function(){c.always(function(){a.unqueued--,K.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],l=K.css(t,"display"),u="none"===l?vt.get(t,"olddisplay")||x(t.nodeName):l,"inline"===u&&"none"===K.css(t,"float")&&(f.display="inline-block")),i.overflow&&(f.overflow="hidden",c.always(function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]}));for(n in e)if(s=e[n],Jt.exec(s)){if(delete e[n],o=o||"toggle"===s,s===(d?"hide":"show")){if("show"!==s||!y||void 0===y[n])continue;d=!0}p[n]=y&&y[n]||K.style(t,n)}else l=void 0;if(K.isEmptyObject(p))"inline"===("none"===l?x(t.nodeName):l)&&(f.display=l);else{y?"hidden"in y&&(d=y.hidden):y=vt.access(t,"fxshow",{}),o&&(y.hidden=!d),d?K(t).show():c.done(function(){K(t).hide()}),c.done(function(){var e;vt.remove(t,"fxshow");for(e in p)K.style(t,e,p[e])});for(n in p)r=q(d?y[n]:0,n,c),n in y||(y[n]=r.start,d&&(r.end=r.start,r.start="width"===n||"height"===n?1:0))}}function F(t,e){var i,n,s,o,r;for(i in t)if(n=K.camelCase(i),s=e[n],o=t[i],K.isArray(o)&&(s=o[1],o=t[i]=o[0]),i!==n&&(t[n]=o,delete t[i]),r=K.cssHooks[n],r&&"expand"in r){o=r.expand(o),delete t[n];for(i in o)i in t||(t[i]=o[i],e[i]=s)}else e[n]=s}function j(t,e,i){var n,s,o=0,r=ee.length,a=K.Deferred().always(function(){delete h.elem}),h=function(){if(s)return!1;for(var e=Yt||A(),i=Math.max(0,l.startTime+l.duration-e),n=i/l.duration||0,o=1-n,r=0,h=l.tweens.length;r<h;r++)l.tweens[r].run(o);return a.notifyWith(t,[l,o,i]),o<1&&h?i:(a.resolveWith(t,[l]),!1)},l=a.promise({elem:t,props:K.extend({},e),opts:K.extend(!0,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:Yt||A(),duration:i.duration,tweens:[],createTween:function(e,i){var n=K.Tween(t,l.opts,e,i,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var i=0,n=e?l.tweens.length:0;if(s)return this;for(s=!0;i<n;i++)l.tweens[i].run(1);return e?a.resolveWith(t,[l,e]):a.rejectWith(t,[l,e]),this}}),u=l.props;for(F(u,l.opts.specialEasing);o<r;o++)if(n=ee[o].call(l,t,u,l.opts))return n;return K.map(u,q,l),K.isFunction(l.opts.start)&&l.opts.start.call(t,l),K.fx.timer(K.extend(h,{elem:t,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function R(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,s=0,o=e.toLowerCase().match(ft)||[];if(K.isFunction(i))for(;n=o[s++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function N(t,e,i,n){function s(a){var h;return o[a]=!0,K.each(t[a]||[],function(t,a){var l=a(e,i,n);return"string"!=typeof l||r||o[l]?r?!(h=l):void 0:(e.dataTypes.unshift(l),s(l),!1)}),h}var o={},r=t===_e;return s(e.dataTypes[0])||!o["*"]&&s("*")}function D(t,e){var i,n,s=K.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((s[i]?t:n||(n={}))[i]=e[i]);return n&&K.extend(!0,t,n),t}function L(t,e,i){for(var n,s,o,r,a=t.contents,h=t.dataTypes;"*"===h[0];)h.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(s in a)if(a[s]&&a[s].test(n)){h.unshift(s);break}if(h[0]in i)o=h[0];else{for(s in i){if(!h[0]||t.converters[s+" "+h[0]]){o=s;break}r||(r=s)}o=o||r}if(o)return o!==h[0]&&h.unshift(o),i[o]}function B(t,e,i,n){var s,o,r,a,h,l={},u=t.dataTypes.slice();if(u[1])for(r in t.converters)l[r.toLowerCase()]=t.converters[r];for(o=u.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!h&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),h=o,o=u.shift())if("*"===o)o=h;else if("*"!==h&&h!==o){if(r=l[h+" "+o]||l["* "+o],!r)for(s in l)if(a=s.split(" "),a[1]===o&&(r=l[h+" "+a[0]]||l["* "+a[0]])){r===!0?r=l[s]:l[s]!==!0&&(o=a[0],u.unshift(a[1]));break}if(r!==!0)if(r&&t.throws)e=r(e);else try{e=r(e)}catch(t){return{state:"parsererror",error:r?t:"No conversion from "+h+" to "+o}}}return{state:"success",data:e}}function I(t,e,i,n){var s;if(K.isArray(e))K.each(e,function(e,s){i||Se.test(t)?n(t,s):I(t+"["+("object"==typeof s?e:"")+"]",s,i,n)});else if(i||"object"!==K.type(e))n(t,e);else for(s in e)I(t+"["+s+"]",e[s],i,n)}function V(t){return K.isWindow(t)?t:9===t.nodeType&&t.defaultView}var W=[],H=W.slice,z=W.concat,U=W.push,G=W.indexOf,$={},X=$.toString,Q=$.hasOwnProperty,Y={},Z=t.document,J="2.1.4",K=function(t,e){return new K.fn.init(t,e)},tt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,et=/^-ms-/,it=/-([\da-z])/gi,nt=function(t,e){return e.toUpperCase()};K.fn=K.prototype={jquery:J,constructor:K,selector:"",length:0,toArray:function(){return H.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:H.call(this)},pushStack:function(t){var e=K.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return K.each(this,t,e)},map:function(t){return this.pushStack(K.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(H.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(i>=0&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:U,sort:W.sort,splice:W.splice},K.extend=K.fn.extend=function(){var t,e,i,n,s,o,r=arguments[0]||{},a=1,h=arguments.length,l=!1;for("boolean"==typeof r&&(l=r,r=arguments[a]||{},a++),"object"==typeof r||K.isFunction(r)||(r={}),a===h&&(r=this,a--);a<h;a++)if(null!=(t=arguments[a]))for(e in t)i=r[e],n=t[e],r!==n&&(l&&n&&(K.isPlainObject(n)||(s=K.isArray(n)))?(s?(s=!1,o=i&&K.isArray(i)?i:[]):o=i&&K.isPlainObject(i)?i:{},r[e]=K.extend(l,o,n)):void 0!==n&&(r[e]=n));return r},K.extend({expando:"jQuery"+(J+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===K.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!K.isArray(t)&&t-parseFloat(t)+1>=0},isPlainObject:function(t){return"object"===K.type(t)&&!t.nodeType&&!K.isWindow(t)&&!(t.constructor&&!Q.call(t.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?$[X.call(t)]||"object":typeof t},globalEval:function(t){var e,i=eval;t=K.trim(t),t&&(1===t.indexOf("use strict")?(e=Z.createElement("script"),e.text=t,Z.head.appendChild(e).parentNode.removeChild(e)):i(t))},camelCase:function(t){return t.replace(et,"ms-").replace(it,nt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var s,o=0,r=t.length,a=i(t);if(n){if(a)for(;o<r&&(s=e.apply(t[o],n),s!==!1);o++);else for(o in t)if(s=e.apply(t[o],n),s===!1)break}else if(a)for(;o<r&&(s=e.call(t[o],o,t[o]),s!==!1);o++);else for(o in t)if(s=e.call(t[o],o,t[o]),s===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(tt,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?K.merge(n,"string"==typeof t?[t]:t):U.call(n,t)),n},inArray:function(t,e,i){return null==e?-1:G.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,s=t.length;n<i;n++)t[s++]=e[n];return t.length=s,t},grep:function(t,e,i){for(var n,s=[],o=0,r=t.length,a=!i;o<r;o++)n=!e(t[o],o),n!==a&&s.push(t[o]);return s},map:function(t,e,n){var s,o=0,r=t.length,a=i(t),h=[];if(a)for(;o<r;o++)s=e(t[o],o,n),null!=s&&h.push(s);else for(o in t)s=e(t[o],o,n),null!=s&&h.push(s);return z.apply([],h)},guid:1,proxy:function(t,e){var i,n,s;if("string"==typeof e&&(i=t[e],e=t,t=i),K.isFunction(t))return n=H.call(arguments,2),s=function(){return t.apply(e||this,n.concat(H.call(arguments)))},s.guid=t.guid=t.guid||K.guid++,s},now:Date.now,support:Y}),K.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){$["[object "+e+"]"]=e.toLowerCase()});var st=function(t){function e(t,e,i,n){var s,o,r,a,h,l,c,f,d,y;if((e?e.ownerDocument||e:I)!==M&&q(e),e=e||M,i=i||[],a=e.nodeType,"string"!=typeof t||!t||1!==a&&9!==a&&11!==a)return i;if(!n&&j){if(11!==a&&(s=gt.exec(t)))if(r=s[1]){if(9===a){if(o=e.getElementById(r),!o||!o.parentNode)return i;if(o.id===r)return i.push(o),i}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(r))&&L(e,o)&&o.id===r)return i.push(o),i}else{if(s[2])return J.apply(i,e.getElementsByTagName(t)),i;if((r=s[3])&&b.getElementsByClassName)return J.apply(i,e.getElementsByClassName(r)),i}if(b.qsa&&(!R||!R.test(t))){if(f=c=B,d=e,y=1!==a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(l=k(t),(c=e.getAttribute("id"))?f=c.replace(xt,"\\$&"):e.setAttribute("id",f),f="[id='"+f+"'] ",h=l.length;h--;)l[h]=f+p(l[h]);d=_t.test(t)&&u(e.parentNode)||e,y=l.join(",")}if(y)try{return J.apply(i,d.querySelectorAll(y)),i}catch(t){}finally{c||e.removeAttribute("id")}}}return P(t.replace(ht,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>w.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[B]=!0,t}function s(t){var e=M.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var i=t.split("|"),n=t.length;n--;)w.attrHandle[i[n]]=e}function r(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||$)-(~t.sourceIndex||$);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function a(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function h(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function l(t){return n(function(e){return e=+e,n(function(i,n){for(var s,o=t([],i.length,e),r=o.length;r--;)i[s=o[r]]&&(i[s]=!(n[s]=i[s]))})})}function u(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function c(){}function p(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function f(t,e,i){var n=e.dir,s=i&&"parentNode"===n,o=W++;return e.first?function(e,i,o){for(;e=e[n];)if(1===e.nodeType||s)return t(e,i,o)}:function(e,i,r){var a,h,l=[V,o];if(r){for(;e=e[n];)if((1===e.nodeType||s)&&t(e,i,r))return!0}else for(;e=e[n];)if(1===e.nodeType||s){if(h=e[B]||(e[B]={}),(a=h[n])&&a[0]===V&&a[1]===o)return l[2]=a[2];if(h[n]=l,l[2]=t(e,i,r))return!0}}}function d(t){return t.length>1?function(e,i,n){for(var s=t.length;s--;)if(!t[s](e,i,n))return!1;return!0}:t[0]}function y(t,i,n){for(var s=0,o=i.length;s<o;s++)e(t,i[s],n);return n}function m(t,e,i,n,s){for(var o,r=[],a=0,h=t.length,l=null!=e;a<h;a++)(o=t[a])&&(i&&!i(o,n,s)||(r.push(o),l&&e.push(a)));return r}function v(t,e,i,s,o,r){return s&&!s[B]&&(s=v(s)),o&&!o[B]&&(o=v(o,r)),n(function(n,r,a,h){var l,u,c,p=[],f=[],d=r.length,v=n||y(e||"*",a.nodeType?[a]:a,[]),g=!t||!n&&e?v:m(v,p,t,a,h),_=i?o||(n?t:d||s)?[]:r:g;if(i&&i(g,_,a,h),s)for(l=m(_,f),s(l,[],a,h),u=l.length;u--;)(c=l[u])&&(_[f[u]]=!(g[f[u]]=c));if(n){if(o||t){if(o){for(l=[],u=_.length;u--;)(c=_[u])&&l.push(g[u]=c);o(null,_=[],l,h)}for(u=_.length;u--;)(c=_[u])&&(l=o?tt(n,c):p[u])>-1&&(n[l]=!(r[l]=c))}}else _=m(_===r?_.splice(d,_.length):_),o?o(null,r,_,h):J.apply(r,_)})}function g(t){for(var e,i,n,s=t.length,o=w.relative[t[0].type],r=o||w.relative[" "],a=o?1:0,h=f(function(t){return t===e},r,!0),l=f(function(t){return tt(e,t)>-1},r,!0),u=[function(t,i,n){var s=!o&&(n||i!==E)||((e=i).nodeType?h(t,i,n):l(t,i,n));return e=null,s}];a<s;a++)if(i=w.relative[t[a].type])u=[f(d(u),i)];else{if(i=w.filter[t[a].type].apply(null,t[a].matches),i[B]){for(n=++a;n<s&&!w.relative[t[n].type];n++);return v(a>1&&d(u),a>1&&p(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(ht,"$1"),i,a<n&&g(t.slice(a,n)),n<s&&g(t=t.slice(n)),n<s&&p(t))}u.push(i)}return d(u)}function _(t,i){var s=i.length>0,o=t.length>0,r=function(n,r,a,h,l){var u,c,p,f=0,d="0",y=n&&[],v=[],g=E,_=n||o&&w.find.TAG("*",l),x=V+=null==g?1:Math.random()||.1,b=_.length;for(l&&(E=r!==M&&r);d!==b&&null!=(u=_[d]);d++){if(o&&u){for(c=0;p=t[c++];)if(p(u,r,a)){h.push(u);break}l&&(V=x)}s&&((u=!p&&u)&&f--,n&&y.push(u))}if(f+=d,s&&d!==f){for(c=0;p=i[c++];)p(y,v,r,a);if(n){if(f>0)for(;d--;)y[d]||v[d]||(v[d]=Y.call(h));v=m(v)}J.apply(h,v),l&&!n&&v.length>0&&f+i.length>1&&e.uniqueSort(h)}return l&&(V=x,E=g),y};return s?n(r):r}var x,b,w,T,S,k,O,P,E,A,C,q,M,F,j,R,N,D,L,B="sizzle"+1*new Date,I=t.document,V=0,W=0,H=i(),z=i(),U=i(),G=function(t,e){return t===e&&(C=!0),0},$=1<<31,X={}.hasOwnProperty,Q=[],Y=Q.pop,Z=Q.push,J=Q.push,K=Q.slice,tt=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",nt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",st=nt.replace("w","w#"),ot="\\["+it+"*("+nt+")(?:"+it+"*([*^$|!~]?=)"+it+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+st+"))|)"+it+"*\\]",rt=":("+nt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ot+")*)|.*)\\)|)",at=new RegExp(it+"+","g"),ht=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),lt=new RegExp("^"+it+"*,"+it+"*"),ut=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),ct=new RegExp("="+it+"*([^\\]'\"]*?)"+it+"*\\]","g"),pt=new RegExp(rt),ft=new RegExp("^"+st+"$"),dt={ID:new RegExp("^#("+nt+")"),CLASS:new RegExp("^\\.("+nt+")"),TAG:new RegExp("^("+nt.replace("w","w*")+")"),ATTR:new RegExp("^"+ot),PSEUDO:new RegExp("^"+rt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},yt=/^(?:input|select|textarea|button)$/i,mt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,gt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_t=/[+~]/,xt=/'|\\/g,bt=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),wt=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},Tt=function(){q()};try{J.apply(Q=K.call(I.childNodes),I.childNodes),Q[I.childNodes.length].nodeType}catch(t){J={apply:Q.length?function(t,e){Z.apply(t,K.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}b=e.support={},S=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},q=e.setDocument=function(t){var e,i,n=t?t.ownerDocument||t:I;return n!==M&&9===n.nodeType&&n.documentElement?(M=n,F=n.documentElement,i=n.defaultView,i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",Tt,!1):i.attachEvent&&i.attachEvent("onunload",Tt)),j=!S(n),b.attributes=s(function(t){return t.className="i",!t.getAttribute("className")}),b.getElementsByTagName=s(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),b.getElementsByClassName=vt.test(n.getElementsByClassName),b.getById=s(function(t){return F.appendChild(t).id=B,!n.getElementsByName||!n.getElementsByName(B).length}),b.getById?(w.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&j){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},w.filter.ID=function(t){var e=t.replace(bt,wt);return function(t){return t.getAttribute("id")===e}}):(delete w.find.ID,w.filter.ID=function(t){var e=t.replace(bt,wt);return function(t){var i="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}}),w.find.TAG=b.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):b.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],s=0,o=e.getElementsByTagName(t);if("*"===t){for(;i=o[s++];)1===i.nodeType&&n.push(i);return n}return o},w.find.CLASS=b.getElementsByClassName&&function(t,e){if(j)return e.getElementsByClassName(t)},N=[],R=[],(b.qsa=vt.test(n.querySelectorAll))&&(s(function(t){F.appendChild(t).innerHTML="<a id='"+B+"'></a><select id='"+B+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&R.push("[*^$]="+it+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||R.push("\\["+it+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+B+"-]").length||R.push("~="),t.querySelectorAll(":checked").length||R.push(":checked"),t.querySelectorAll("a#"+B+"+*").length||R.push(".#.+[+~]")}),s(function(t){var e=n.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&R.push("name"+it+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||R.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),R.push(",.*:")})),(b.matchesSelector=vt.test(D=F.matches||F.webkitMatchesSelector||F.mozMatchesSelector||F.oMatchesSelector||F.msMatchesSelector))&&s(function(t){b.disconnectedMatch=D.call(t,"div"),D.call(t,"[s!='']:x"),N.push("!=",rt)}),R=R.length&&new RegExp(R.join("|")),N=N.length&&new RegExp(N.join("|")),e=vt.test(F.compareDocumentPosition),L=e||vt.test(F.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},G=e?function(t,e){if(t===e)return C=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i?i:(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&i||!b.sortDetached&&e.compareDocumentPosition(t)===i?t===n||t.ownerDocument===I&&L(I,t)?-1:e===n||e.ownerDocument===I&&L(I,e)?1:A?tt(A,t)-tt(A,e):0:4&i?-1:1)}:function(t,e){if(t===e)return C=!0,0;var i,s=0,o=t.parentNode,a=e.parentNode,h=[t],l=[e];if(!o||!a)return t===n?-1:e===n?1:o?-1:a?1:A?tt(A,t)-tt(A,e):0;if(o===a)return r(t,e);for(i=t;i=i.parentNode;)h.unshift(i);for(i=e;i=i.parentNode;)l.unshift(i);for(;h[s]===l[s];)s++;return s?r(h[s],l[s]):h[s]===I?-1:l[s]===I?1:0},n):M},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==M&&q(t),i=i.replace(ct,"='$1']"),b.matchesSelector&&j&&(!N||!N.test(i))&&(!R||!R.test(i)))try{var n=D.call(t,i);if(n||b.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return e(i,M,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==M&&q(t),L(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==M&&q(t);var i=w.attrHandle[e.toLowerCase()],n=i&&X.call(w.attrHandle,e.toLowerCase())?i(t,e,!j):void 0;return void 0!==n?n:b.attributes||!j?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,s=0;if(C=!b.detectDuplicates,A=!b.sortStable&&t.slice(0),t.sort(G),C){for(;e=t[s++];)e===t[s]&&(n=i.push(s));for(;n--;)t.splice(i[n],1)}return A=null,t},T=e.getText=function(t){var e,i="",n=0,s=t.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=T(t)}else if(3===s||4===s)return t.nodeValue}else for(;e=t[n++];)i+=T(e);return i},w=e.selectors={cacheLength:50,createPseudo:n,match:dt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(bt,wt),t[3]=(t[3]||t[4]||t[5]||"").replace(bt,wt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return dt.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&pt.test(i)&&(e=k(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(bt,wt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=H[t+" "];return e||(e=new RegExp("(^|"+it+")"+t+"("+it+"|$)"))&&H(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(s){var o=e.attr(s,t);return null==o?"!="===i:!i||(o+="","="===i?o===n:"!="===i?o!==n:"^="===i?n&&0===o.indexOf(n):"*="===i?n&&o.indexOf(n)>-1:"$="===i?n&&o.slice(-n.length)===n:"~="===i?(" "+o.replace(at," ")+" ").indexOf(n)>-1:"|="===i&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,i,n,s){var o="nth"!==t.slice(0,3),r="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===s?function(t){return!!t.parentNode}:function(e,i,h){var l,u,c,p,f,d,y=o!==r?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),g=!h&&!a;if(m){if(o){for(;y;){for(c=e;c=c[y];)if(a?c.nodeName.toLowerCase()===v:1===c.nodeType)return!1;d=y="only"===t&&!d&&"nextSibling"}return!0}if(d=[r?m.firstChild:m.lastChild],r&&g){for(u=m[B]||(m[B]={}),l=u[t]||[],f=l[0]===V&&l[1],p=l[0]===V&&l[2],c=f&&m.childNodes[f];c=++f&&c&&c[y]||(p=f=0)||d.pop();)if(1===c.nodeType&&++p&&c===e){u[t]=[V,f,p];break}}else if(g&&(l=(e[B]||(e[B]={}))[t])&&l[0]===V)p=l[1];else for(;(c=++f&&c&&c[y]||(p=f=0)||d.pop())&&((a?c.nodeName.toLowerCase()!==v:1!==c.nodeType)||!++p||(g&&((c[B]||(c[B]={}))[t]=[V,p]),c!==e)););return p-=s,p===n||p%n===0&&p/n>=0}}},PSEUDO:function(t,i){var s,o=w.pseudos[t]||w.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[B]?o(i):o.length>1?(s=[t,t,"",i],w.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,s=o(t,i),r=s.length;r--;)n=tt(t,s[r]),t[n]=!(e[n]=s[r])}):function(t){return o(t,0,s)}):o}},pseudos:{not:n(function(t){var e=[],i=[],s=O(t.replace(ht,"$1"));return s[B]?n(function(t,e,i,n){for(var o,r=s(t,null,n,[]),a=t.length;a--;)(o=r[a])&&(t[a]=!(e[a]=o))}):function(t,n,o){return e[0]=t,s(e,null,o,i),e[0]=null,!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return t=t.replace(bt,wt),function(e){return(e.textContent||e.innerText||T(e)).indexOf(t)>-1}}),lang:n(function(t){return ft.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(bt,wt).toLowerCase(),function(e){var i;do if(i=j?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return i=i.toLowerCase(),i===t||0===i.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===F},focus:function(t){return t===M.activeElement&&(!M.hasFocus||M.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!w.pseudos.empty(t)},header:function(t){return mt.test(t.nodeName)},input:function(t){return yt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:l(function(){return[0]}),last:l(function(t,e){return[e-1]}),eq:l(function(t,e,i){return[i<0?i+e:i]}),even:l(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:l(function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t}),lt:l(function(t,e,i){for(var n=i<0?i+e:i;--n>=0;)t.push(n);return t}),gt:l(function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t})}},w.pseudos.nth=w.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[x]=a(x);for(x in{submit:!0,reset:!0})w.pseudos[x]=h(x);return c.prototype=w.filters=w.pseudos,w.setFilters=new c,k=e.tokenize=function(t,i){var n,s,o,r,a,h,l,u=z[t+" "];if(u)return i?0:u.slice(0);for(a=t,h=[],l=w.preFilter;a;){n&&!(s=lt.exec(a))||(s&&(a=a.slice(s[0].length)||a),h.push(o=[])),n=!1,(s=ut.exec(a))&&(n=s.shift(),o.push({value:n,type:s[0].replace(ht," ")}),a=a.slice(n.length));for(r in w.filter)!(s=dt[r].exec(a))||l[r]&&!(s=l[r](s))||(n=s.shift(),o.push({value:n,type:r,matches:s}),a=a.slice(n.length));if(!n)break}return i?a.length:a?e.error(t):z(t,h).slice(0)},O=e.compile=function(t,e){var i,n=[],s=[],o=U[t+" "];if(!o){for(e||(e=k(t)),i=e.length;i--;)o=g(e[i]),o[B]?n.push(o):s.push(o);o=U(t,_(s,n)),o.selector=t}return o},P=e.select=function(t,e,i,n){var s,o,r,a,h,l="function"==typeof t&&t,c=!n&&k(t=l.selector||t);if(i=i||[],1===c.length){if(o=c[0]=c[0].slice(0),o.length>2&&"ID"===(r=o[0]).type&&b.getById&&9===e.nodeType&&j&&w.relative[o[1].type]){if(e=(w.find.ID(r.matches[0].replace(bt,wt),e)||[])[0],!e)return i;l&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(s=dt.needsContext.test(t)?0:o.length;s--&&(r=o[s],!w.relative[a=r.type]);)if((h=w.find[a])&&(n=h(r.matches[0].replace(bt,wt),_t.test(o[0].type)&&u(e.parentNode)||e))){if(o.splice(s,1),t=n.length&&p(o),!t)return J.apply(i,n),i;break}}return(l||O(t,c))(n,e,!j,i,_t.test(t)&&u(e.parentNode)||e),i},b.sortStable=B.split("").sort(G).join("")===B,b.detectDuplicates=!!C,q(),b.sortDetached=s(function(t){return 1&t.compareDocumentPosition(M.createElement("div"))}),s(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),b.attributes&&s(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),s(function(t){return null==t.getAttribute("disabled")})||o(et,function(t,e,i){var n;if(!i)return t[e]===!0?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);K.find=st,K.expr=st.selectors,K.expr[":"]=K.expr.pseudos,K.unique=st.uniqueSort,K.text=st.getText,K.isXMLDoc=st.isXML,K.contains=st.contains;var ot=K.expr.match.needsContext,rt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,at=/^.[^:#\[\.,]*$/;
K.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?K.find.matchesSelector(n,t)?[n]:[]:K.find.matches(t,K.grep(e,function(t){return 1===t.nodeType}))},K.fn.extend({find:function(t){var e,i=this.length,n=[],s=this;if("string"!=typeof t)return this.pushStack(K(t).filter(function(){for(e=0;e<i;e++)if(K.contains(s[e],this))return!0}));for(e=0;e<i;e++)K.find(t,s[e],n);return n=this.pushStack(i>1?K.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(n(this,t||[],!1))},not:function(t){return this.pushStack(n(this,t||[],!0))},is:function(t){return!!n(this,"string"==typeof t&&ot.test(t)?K(t):t||[],!1).length}});var ht,lt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ut=K.fn.init=function(t,e){var i,n;if(!t)return this;if("string"==typeof t){if(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:lt.exec(t),!i||!i[1]&&e)return!e||e.jquery?(e||ht).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof K?e[0]:e,K.merge(this,K.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:Z,!0)),rt.test(i[1])&&K.isPlainObject(e))for(i in e)K.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return n=Z.getElementById(i[2]),n&&n.parentNode&&(this.length=1,this[0]=n),this.context=Z,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):K.isFunction(t)?"undefined"!=typeof ht.ready?ht.ready(t):t(K):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),K.makeArray(t,this))};ut.prototype=K.fn,ht=K(Z);var ct=/^(?:parents|prev(?:Until|All))/,pt={children:!0,contents:!0,next:!0,prev:!0};K.extend({dir:function(t,e,i){for(var n=[],s=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(s&&K(t).is(i))break;n.push(t)}return n},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}}),K.fn.extend({has:function(t){var e=K(t,this),i=e.length;return this.filter(function(){for(var t=0;t<i;t++)if(K.contains(this,e[t]))return!0})},closest:function(t,e){for(var i,n=0,s=this.length,o=[],r=ot.test(t)||"string"!=typeof t?K(t,e||this.context):0;n<s;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(r?r.index(i)>-1:1===i.nodeType&&K.find.matchesSelector(i,t))){o.push(i);break}return this.pushStack(o.length>1?K.unique(o):o)},index:function(t){return t?"string"==typeof t?G.call(K(t),this[0]):G.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(K.unique(K.merge(this.get(),K(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),K.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return K.dir(t,"parentNode")},parentsUntil:function(t,e,i){return K.dir(t,"parentNode",i)},next:function(t){return s(t,"nextSibling")},prev:function(t){return s(t,"previousSibling")},nextAll:function(t){return K.dir(t,"nextSibling")},prevAll:function(t){return K.dir(t,"previousSibling")},nextUntil:function(t,e,i){return K.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return K.dir(t,"previousSibling",i)},siblings:function(t){return K.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return K.sibling(t.firstChild)},contents:function(t){return t.contentDocument||K.merge([],t.childNodes)}},function(t,e){K.fn[t]=function(i,n){var s=K.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(s=K.filter(n,s)),this.length>1&&(pt[t]||K.unique(s),ct.test(t)&&s.reverse()),this.pushStack(s)}});var ft=/\S+/g,dt={};K.Callbacks=function(t){t="string"==typeof t?dt[t]||o(t):K.extend({},t);var e,i,n,s,r,a,h=[],l=!t.once&&[],u=function(o){for(e=t.memory&&o,i=!0,a=s||0,s=0,r=h.length,n=!0;h&&a<r;a++)if(h[a].apply(o[0],o[1])===!1&&t.stopOnFalse){e=!1;break}n=!1,h&&(l?l.length&&u(l.shift()):e?h=[]:c.disable())},c={add:function(){if(h){var i=h.length;!function e(i){K.each(i,function(i,n){var s=K.type(n);"function"===s?t.unique&&c.has(n)||h.push(n):n&&n.length&&"string"!==s&&e(n)})}(arguments),n?r=h.length:e&&(s=i,u(e))}return this},remove:function(){return h&&K.each(arguments,function(t,e){for(var i;(i=K.inArray(e,h,i))>-1;)h.splice(i,1),n&&(i<=r&&r--,i<=a&&a--)}),this},has:function(t){return t?K.inArray(t,h)>-1:!(!h||!h.length)},empty:function(){return h=[],r=0,this},disable:function(){return h=l=e=void 0,this},disabled:function(){return!h},lock:function(){return l=void 0,e||c.disable(),this},locked:function(){return!l},fireWith:function(t,e){return!h||i&&!l||(e=e||[],e=[t,e.slice?e.slice():e],n?l.push(e):u(e)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},K.extend({Deferred:function(t){var e=[["resolve","done",K.Callbacks("once memory"),"resolved"],["reject","fail",K.Callbacks("once memory"),"rejected"],["notify","progress",K.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var t=arguments;return K.Deferred(function(i){K.each(e,function(e,o){var r=K.isFunction(t[e])&&t[e];s[o[1]](function(){var t=r&&r.apply(this,arguments);t&&K.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[o[0]+"With"](this===n?i.promise():this,r?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?K.extend(t,n):n}},s={};return n.pipe=n.then,K.each(e,function(t,o){var r=o[2],a=o[3];n[o[1]]=r.add,a&&r.add(function(){i=a},e[1^t][2].disable,e[2][2].lock),s[o[0]]=function(){return s[o[0]+"With"](this===s?n:this,arguments),this},s[o[0]+"With"]=r.fireWith}),n.promise(s),t&&t.call(s,s),s},when:function(t){var e,i,n,s=0,o=H.call(arguments),r=o.length,a=1!==r||t&&K.isFunction(t.promise)?r:0,h=1===a?t:K.Deferred(),l=function(t,i,n){return function(s){i[t]=this,n[t]=arguments.length>1?H.call(arguments):s,n===e?h.notifyWith(i,n):--a||h.resolveWith(i,n)}};if(r>1)for(e=new Array(r),i=new Array(r),n=new Array(r);s<r;s++)o[s]&&K.isFunction(o[s].promise)?o[s].promise().done(l(s,n,o)).fail(h.reject).progress(l(s,i,e)):--a;return a||h.resolveWith(n,o),h.promise()}});var yt;K.fn.ready=function(t){return K.ready.promise().done(t),this},K.extend({isReady:!1,readyWait:1,holdReady:function(t){t?K.readyWait++:K.ready(!0)},ready:function(t){(t===!0?--K.readyWait:K.isReady)||(K.isReady=!0,t!==!0&&--K.readyWait>0||(yt.resolveWith(Z,[K]),K.fn.triggerHandler&&(K(Z).triggerHandler("ready"),K(Z).off("ready"))))}}),K.ready.promise=function(e){return yt||(yt=K.Deferred(),"complete"===Z.readyState?setTimeout(K.ready):(Z.addEventListener("DOMContentLoaded",r,!1),t.addEventListener("load",r,!1))),yt.promise(e)},K.ready.promise();var mt=K.access=function(t,e,i,n,s,o,r){var a=0,h=t.length,l=null==i;if("object"===K.type(i)){s=!0;for(a in i)K.access(t,e,a,i[a],!0,o,r)}else if(void 0!==n&&(s=!0,K.isFunction(n)||(r=!0),l&&(r?(e.call(t,n),e=null):(l=e,e=function(t,e,i){return l.call(K(t),i)})),e))for(;a<h;a++)e(t[a],i,r?n:n.call(t[a],a,e(t[a],i)));return s?t:l?e.call(t):h?e(t[0],i):o};K.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},a.uid=1,a.accepts=K.acceptData,a.prototype={key:function(t){if(!a.accepts(t))return 0;var e={},i=t[this.expando];if(!i){i=a.uid++;try{e[this.expando]={value:i},Object.defineProperties(t,e)}catch(n){e[this.expando]=i,K.extend(t,e)}}return this.cache[i]||(this.cache[i]={}),i},set:function(t,e,i){var n,s=this.key(t),o=this.cache[s];if("string"==typeof e)o[e]=i;else if(K.isEmptyObject(o))K.extend(this.cache[s],e);else for(n in e)o[n]=e[n];return o},get:function(t,e){var i=this.cache[this.key(t)];return void 0===e?i:i[e]},access:function(t,e,i){var n;return void 0===e||e&&"string"==typeof e&&void 0===i?(n=this.get(t,e),void 0!==n?n:this.get(t,K.camelCase(e))):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n,s,o=this.key(t),r=this.cache[o];if(void 0===e)this.cache[o]={};else{K.isArray(e)?n=e.concat(e.map(K.camelCase)):(s=K.camelCase(e),e in r?n=[e,s]:(n=s,n=n in r?[n]:n.match(ft)||[])),i=n.length;for(;i--;)delete r[n[i]]}},hasData:function(t){return!K.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var vt=new a,gt=new a,_t=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,xt=/([A-Z])/g;K.extend({hasData:function(t){return gt.hasData(t)||vt.hasData(t)},data:function(t,e,i){return gt.access(t,e,i)},removeData:function(t,e){gt.remove(t,e)},_data:function(t,e,i){return vt.access(t,e,i)},_removeData:function(t,e){vt.remove(t,e)}}),K.fn.extend({data:function(t,e){var i,n,s,o=this[0],r=o&&o.attributes;if(void 0===t){if(this.length&&(s=gt.get(o),1===o.nodeType&&!vt.get(o,"hasDataAttrs"))){for(i=r.length;i--;)r[i]&&(n=r[i].name,0===n.indexOf("data-")&&(n=K.camelCase(n.slice(5)),h(o,n,s[n])));vt.set(o,"hasDataAttrs",!0)}return s}return"object"==typeof t?this.each(function(){gt.set(this,t)}):mt(this,function(e){var i,n=K.camelCase(t);if(o&&void 0===e){if(i=gt.get(o,t),void 0!==i)return i;if(i=gt.get(o,n),void 0!==i)return i;if(i=h(o,n,void 0),void 0!==i)return i}else this.each(function(){var i=gt.get(this,n);gt.set(this,n,e),t.indexOf("-")!==-1&&void 0!==i&&gt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){gt.remove(this,t)})}}),K.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=vt.get(t,e),i&&(!n||K.isArray(i)?n=vt.access(t,e,K.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=K.queue(t,e),n=i.length,s=i.shift(),o=K._queueHooks(t,e),r=function(){K.dequeue(t,e)};"inprogress"===s&&(s=i.shift(),n--),s&&("fx"===e&&i.unshift("inprogress"),delete o.stop,s.call(t,r,o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return vt.get(t,i)||vt.access(t,i,{empty:K.Callbacks("once memory").add(function(){vt.remove(t,[e+"queue",i])})})}}),K.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?K.queue(this[0],t):void 0===e?this:this.each(function(){var i=K.queue(this,t,e);K._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&K.dequeue(this,t)})},dequeue:function(t){return this.each(function(){K.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,s=K.Deferred(),o=this,r=this.length,a=function(){--n||s.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";r--;)i=vt.get(o[r],t+"queueHooks"),i&&i.empty&&(n++,i.empty.add(a));return a(),s.promise(e)}});var bt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,wt=["Top","Right","Bottom","Left"],Tt=function(t,e){return t=e||t,"none"===K.css(t,"display")||!K.contains(t.ownerDocument,t)},St=/^(?:checkbox|radio)$/i;!function(){var t=Z.createDocumentFragment(),e=t.appendChild(Z.createElement("div")),i=Z.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),e.appendChild(i),Y.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",Y.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var kt="undefined";Y.focusinBubbles="onfocusin"in t;var Ot=/^key/,Pt=/^(?:mouse|pointer|contextmenu)|click/,Et=/^(?:focusinfocus|focusoutblur)$/,At=/^([^.]*)(?:\.(.+)|)$/;K.event={global:{},add:function(t,e,i,n,s){var o,r,a,h,l,u,c,p,f,d,y,m=vt.get(t);if(m)for(i.handler&&(o=i,i=o.handler,s=o.selector),i.guid||(i.guid=K.guid++),(h=m.events)||(h=m.events={}),(r=m.handle)||(r=m.handle=function(e){return typeof K!==kt&&K.event.triggered!==e.type?K.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(ft)||[""],l=e.length;l--;)a=At.exec(e[l])||[],f=y=a[1],d=(a[2]||"").split(".").sort(),f&&(c=K.event.special[f]||{},f=(s?c.delegateType:c.bindType)||f,c=K.event.special[f]||{},u=K.extend({type:f,origType:y,data:n,handler:i,guid:i.guid,selector:s,needsContext:s&&K.expr.match.needsContext.test(s),namespace:d.join(".")},o),(p=h[f])||(p=h[f]=[],p.delegateCount=0,c.setup&&c.setup.call(t,n,d,r)!==!1||t.addEventListener&&t.addEventListener(f,r,!1)),c.add&&(c.add.call(t,u),u.handler.guid||(u.handler.guid=i.guid)),s?p.splice(p.delegateCount++,0,u):p.push(u),K.event.global[f]=!0)},remove:function(t,e,i,n,s){var o,r,a,h,l,u,c,p,f,d,y,m=vt.hasData(t)&&vt.get(t);if(m&&(h=m.events)){for(e=(e||"").match(ft)||[""],l=e.length;l--;)if(a=At.exec(e[l])||[],f=y=a[1],d=(a[2]||"").split(".").sort(),f){for(c=K.event.special[f]||{},f=(n?c.delegateType:c.bindType)||f,p=h[f]||[],a=a[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=o=p.length;o--;)u=p[o],!s&&y!==u.origType||i&&i.guid!==u.guid||a&&!a.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(p.splice(o,1),u.selector&&p.delegateCount--,c.remove&&c.remove.call(t,u));r&&!p.length&&(c.teardown&&c.teardown.call(t,d,m.handle)!==!1||K.removeEvent(t,f,m.handle),delete h[f])}else for(f in h)K.event.remove(t,f+e[l],i,n,!0);K.isEmptyObject(h)&&(delete m.handle,vt.remove(t,"events"))}},trigger:function(e,i,n,s){var o,r,a,h,l,u,c,p=[n||Z],f=Q.call(e,"type")?e.type:e,d=Q.call(e,"namespace")?e.namespace.split("."):[];if(r=a=n=n||Z,3!==n.nodeType&&8!==n.nodeType&&!Et.test(f+K.event.triggered)&&(f.indexOf(".")>=0&&(d=f.split("."),f=d.shift(),d.sort()),l=f.indexOf(":")<0&&"on"+f,e=e[K.expando]?e:new K.Event(f,"object"==typeof e&&e),e.isTrigger=s?2:3,e.namespace=d.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:K.makeArray(i,[e]),c=K.event.special[f]||{},s||!c.trigger||c.trigger.apply(n,i)!==!1)){if(!s&&!c.noBubble&&!K.isWindow(n)){for(h=c.delegateType||f,Et.test(h+f)||(r=r.parentNode);r;r=r.parentNode)p.push(r),a=r;a===(n.ownerDocument||Z)&&p.push(a.defaultView||a.parentWindow||t)}for(o=0;(r=p[o++])&&!e.isPropagationStopped();)e.type=o>1?h:c.bindType||f,u=(vt.get(r,"events")||{})[e.type]&&vt.get(r,"handle"),u&&u.apply(r,i),u=l&&r[l],u&&u.apply&&K.acceptData(r)&&(e.result=u.apply(r,i),e.result===!1&&e.preventDefault());return e.type=f,s||e.isDefaultPrevented()||c._default&&c._default.apply(p.pop(),i)!==!1||!K.acceptData(n)||l&&K.isFunction(n[f])&&!K.isWindow(n)&&(a=n[l],a&&(n[l]=null),K.event.triggered=f,n[f](),K.event.triggered=void 0,a&&(n[l]=a)),e.result}},dispatch:function(t){t=K.event.fix(t);var e,i,n,s,o,r=[],a=H.call(arguments),h=(vt.get(this,"events")||{})[t.type]||[],l=K.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,t)!==!1){for(r=K.event.handlers.call(this,t,h),e=0;(s=r[e++])&&!t.isPropagationStopped();)for(t.currentTarget=s.elem,i=0;(o=s.handlers[i++])&&!t.isImmediatePropagationStopped();)t.namespace_re&&!t.namespace_re.test(o.namespace)||(t.handleObj=o,t.data=o.data,n=((K.event.special[o.origType]||{}).handle||o.handler).apply(s.elem,a),void 0!==n&&(t.result=n)===!1&&(t.preventDefault(),t.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,s,o,r=[],a=e.delegateCount,h=t.target;if(a&&h.nodeType&&(!t.button||"click"!==t.type))for(;h!==this;h=h.parentNode||this)if(h.disabled!==!0||"click"!==t.type){for(n=[],i=0;i<a;i++)o=e[i],s=o.selector+" ",void 0===n[s]&&(n[s]=o.needsContext?K(s,this).index(h)>=0:K.find(s,this,null,[h]).length),n[s]&&n.push(o);n.length&&r.push({elem:h,handlers:n})}return a<e.length&&r.push({elem:this,handlers:e.slice(a)}),r},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,s,o=e.button;return null==t.pageX&&null!=e.clientX&&(i=t.target.ownerDocument||Z,n=i.documentElement,s=i.body,t.pageX=e.clientX+(n&&n.scrollLeft||s&&s.scrollLeft||0)-(n&&n.clientLeft||s&&s.clientLeft||0),t.pageY=e.clientY+(n&&n.scrollTop||s&&s.scrollTop||0)-(n&&n.clientTop||s&&s.clientTop||0)),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[K.expando])return t;var e,i,n,s=t.type,o=t,r=this.fixHooks[s];for(r||(this.fixHooks[s]=r=Pt.test(s)?this.mouseHooks:Ot.test(s)?this.keyHooks:{}),n=r.props?this.props.concat(r.props):this.props,t=new K.Event(o),e=n.length;e--;)i=n[e],t[i]=o[i];return t.target||(t.target=Z),3===t.target.nodeType&&(t.target=t.target.parentNode),r.filter?r.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==c()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===c()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&K.nodeName(this,"input"))return this.click(),!1},_default:function(t){return K.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){var s=K.extend(new K.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?K.event.trigger(s,null,e):K.event.dispatch.call(e,s),s.isDefaultPrevented()&&i.preventDefault()}},K.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)},K.Event=function(t,e){return this instanceof K.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?l:u):this.type=t,e&&K.extend(this,e),this.timeStamp=t&&t.timeStamp||K.now(),void(this[K.expando]=!0)):new K.Event(t,e)},K.Event.prototype={isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=l,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=l,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=l,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},K.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){K.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,s=t.relatedTarget,o=t.handleObj;return s&&(s===n||K.contains(n,s))||(t.type=o.origType,i=o.handler.apply(this,arguments),t.type=e),i}}}),Y.focusinBubbles||K.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){K.event.simulate(e,t.target,K.event.fix(t),!0)};K.event.special[e]={setup:function(){var n=this.ownerDocument||this,s=vt.access(n,e);s||n.addEventListener(t,i,!0),vt.access(n,e,(s||0)+1)},teardown:function(){var n=this.ownerDocument||this,s=vt.access(n,e)-1;s?vt.access(n,e,s):(n.removeEventListener(t,i,!0),vt.remove(n,e))}}}),K.fn.extend({on:function(t,e,i,n,s){var o,r;if("object"==typeof t){"string"!=typeof e&&(i=i||e,e=void 0);for(r in t)this.on(r,e,i,t[r],s);return this}if(null==i&&null==n?(n=e,i=e=void 0):null==n&&("string"==typeof e?(n=i,i=void 0):(n=i,i=e,e=void 0)),n===!1)n=u;else if(!n)return this;return 1===s&&(o=n,n=function(t){return K().off(t),o.apply(this,arguments)},n.guid=o.guid||(o.guid=K.guid++)),this.each(function(){K.event.add(this,t,n,i,e)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,e,i){var n,s;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,K(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(s in t)this.off(s,e,t[s]);return this}return e!==!1&&"function"!=typeof e||(i=e,e=void 0),i===!1&&(i=u),this.each(function(){K.event.remove(this,t,i,e)})},trigger:function(t,e){return this.each(function(){K.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];if(i)return K.event.trigger(t,e,i,!0)}});var Ct=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,qt=/<([\w:]+)/,Mt=/<|&#?\w+;/,Ft=/<(?:script|style|link)/i,jt=/checked\s*(?:[^=]|=\s*.checked.)/i,Rt=/^$|\/(?:java|ecma)script/i,Nt=/^true\/(.*)/,Dt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Lt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Lt.optgroup=Lt.option,Lt.tbody=Lt.tfoot=Lt.colgroup=Lt.caption=Lt.thead,Lt.th=Lt.td,K.extend({clone:function(t,e,i){var n,s,o,r,a=t.cloneNode(!0),h=K.contains(t.ownerDocument,t);if(!(Y.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||K.isXMLDoc(t)))for(r=v(a),o=v(t),n=0,s=o.length;n<s;n++)g(o[n],r[n]);if(e)if(i)for(o=o||v(t),r=r||v(a),n=0,s=o.length;n<s;n++)m(o[n],r[n]);else m(t,a);return r=v(a,"script"),r.length>0&&y(r,!h&&v(t,"script")),a},buildFragment:function(t,e,i,n){for(var s,o,r,a,h,l,u=e.createDocumentFragment(),c=[],p=0,f=t.length;p<f;p++)if(s=t[p],s||0===s)if("object"===K.type(s))K.merge(c,s.nodeType?[s]:s);else if(Mt.test(s)){for(o=o||u.appendChild(e.createElement("div")),r=(qt.exec(s)||["",""])[1].toLowerCase(),a=Lt[r]||Lt._default,o.innerHTML=a[1]+s.replace(Ct,"<$1></$2>")+a[2],l=a[0];l--;)o=o.lastChild;K.merge(c,o.childNodes),o=u.firstChild,o.textContent=""}else c.push(e.createTextNode(s));for(u.textContent="",p=0;s=c[p++];)if((!n||K.inArray(s,n)===-1)&&(h=K.contains(s.ownerDocument,s),o=v(u.appendChild(s),"script"),h&&y(o),i))for(l=0;s=o[l++];)Rt.test(s.type||"")&&i.push(s);return u},cleanData:function(t){for(var e,i,n,s,o=K.event.special,r=0;void 0!==(i=t[r]);r++){if(K.acceptData(i)&&(s=i[vt.expando],s&&(e=vt.cache[s]))){if(e.events)for(n in e.events)o[n]?K.event.remove(i,n):K.removeEvent(i,n,e.handle);vt.cache[s]&&delete vt.cache[s]}delete gt.cache[i[gt.expando]]}}}),K.fn.extend({text:function(t){return mt(this,function(t){return void 0===t?K.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=p(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=p(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var i,n=t?K.filter(t,this):this,s=0;null!=(i=n[s]);s++)e||1!==i.nodeType||K.cleanData(v(i)),i.parentNode&&(e&&K.contains(i.ownerDocument,i)&&y(v(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(K.cleanData(v(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return K.clone(this,t,e)})},html:function(t){return mt(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Ft.test(t)&&!Lt[(qt.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Ct,"<$1></$2>");try{for(;i<n;i++)e=this[i]||{},1===e.nodeType&&(K.cleanData(v(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,K.cleanData(v(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=z.apply([],t);var i,n,s,o,r,a,h=0,l=this.length,u=this,c=l-1,p=t[0],y=K.isFunction(p);if(y||l>1&&"string"==typeof p&&!Y.checkClone&&jt.test(p))return this.each(function(i){var n=u.eq(i);y&&(t[0]=p.call(this,i,n.html())),n.domManip(t,e)});if(l&&(i=K.buildFragment(t,this[0].ownerDocument,!1,this),n=i.firstChild,1===i.childNodes.length&&(i=n),n)){for(s=K.map(v(i,"script"),f),o=s.length;h<l;h++)r=i,h!==c&&(r=K.clone(r,!0,!0),o&&K.merge(s,v(r,"script"))),e.call(this[h],r,h);if(o)for(a=s[s.length-1].ownerDocument,K.map(s,d),h=0;h<o;h++)r=s[h],Rt.test(r.type||"")&&!vt.access(r,"globalEval")&&K.contains(a,r)&&(r.src?K._evalUrl&&K._evalUrl(r.src):K.globalEval(r.textContent.replace(Dt,"")))}return this}}),K.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){K.fn[t]=function(t){for(var i,n=[],s=K(t),o=s.length-1,r=0;r<=o;r++)i=r===o?this:this.clone(!0),K(s[r])[e](i),U.apply(n,i.get());return this.pushStack(n)}});var Bt,It={},Vt=/^margin/,Wt=new RegExp("^("+bt+")(?!px)[a-z%]+$","i"),Ht=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):t.getComputedStyle(e,null)};!function(){function e(){r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",r.innerHTML="",s.appendChild(o);var e=t.getComputedStyle(r,null);i="1%"!==e.top,n="4px"===e.width,s.removeChild(o)}var i,n,s=Z.documentElement,o=Z.createElement("div"),r=Z.createElement("div");r.style&&(r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",Y.clearCloneStyle="content-box"===r.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(r),t.getComputedStyle&&K.extend(Y,{pixelPosition:function(){return e(),i},boxSizingReliable:function(){return null==n&&e(),n},reliableMarginRight:function(){var e,i=r.appendChild(Z.createElement("div"));return i.style.cssText=r.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",r.style.width="1px",s.appendChild(o),e=!parseFloat(t.getComputedStyle(i,null).marginRight),s.removeChild(o),r.removeChild(i),e}}))}(),K.swap=function(t,e,i,n){var s,o,r={};for(o in e)r[o]=t.style[o],t.style[o]=e[o];s=i.apply(t,n||[]);for(o in e)t.style[o]=r[o];return s};var zt=/^(none|table(?!-c[ea]).+)/,Ut=new RegExp("^("+bt+")(.*)$","i"),Gt=new RegExp("^([+-])=("+bt+")","i"),$t={position:"absolute",visibility:"hidden",display:"block"},Xt={letterSpacing:"0",fontWeight:"400"},Qt=["Webkit","O","Moz","ms"];K.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=b(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,o,r,a=K.camelCase(e),h=t.style;return e=K.cssProps[a]||(K.cssProps[a]=T(h,a)),r=K.cssHooks[e]||K.cssHooks[a],void 0===i?r&&"get"in r&&void 0!==(s=r.get(t,!1,n))?s:h[e]:(o=typeof i,"string"===o&&(s=Gt.exec(i))&&(i=(s[1]+1)*s[2]+parseFloat(K.css(t,e)),o="number"),null!=i&&i===i&&("number"!==o||K.cssNumber[a]||(i+="px"),Y.clearCloneStyle||""!==i||0!==e.indexOf("background")||(h[e]="inherit"),r&&"set"in r&&void 0===(i=r.set(t,i,n))||(h[e]=i)),void 0)}},css:function(t,e,i,n){var s,o,r,a=K.camelCase(e);return e=K.cssProps[a]||(K.cssProps[a]=T(t.style,a)),r=K.cssHooks[e]||K.cssHooks[a],r&&"get"in r&&(s=r.get(t,!0,i)),void 0===s&&(s=b(t,e,n)),"normal"===s&&e in Xt&&(s=Xt[e]),""===i||i?(o=parseFloat(s),i===!0||K.isNumeric(o)?o||0:s):s}}),K.each(["height","width"],function(t,e){K.cssHooks[e]={get:function(t,i,n){if(i)return zt.test(K.css(t,"display"))&&0===t.offsetWidth?K.swap(t,$t,function(){return O(t,e,n)}):O(t,e,n)},set:function(t,i,n){var s=n&&Ht(t);return S(t,i,n?k(t,e,n,"border-box"===K.css(t,"boxSizing",!1,s),s):0)}}}),K.cssHooks.marginRight=w(Y.reliableMarginRight,function(t,e){if(e)return K.swap(t,{display:"inline-block"},b,[t,"marginRight"])}),K.each({margin:"",padding:"",border:"Width"},function(t,e){K.cssHooks[t+e]={expand:function(i){for(var n=0,s={},o="string"==typeof i?i.split(" "):[i];n<4;n++)s[t+wt[n]+e]=o[n]||o[n-2]||o[0];return s}},Vt.test(t)||(K.cssHooks[t+e].set=S)}),K.fn.extend({css:function(t,e){return mt(this,function(t,e,i){var n,s,o={},r=0;if(K.isArray(e)){for(n=Ht(t),s=e.length;r<s;r++)o[e[r]]=K.css(t,e[r],!1,n);return o}return void 0!==i?K.style(t,e,i):K.css(t,e)},t,e,arguments.length>1)},show:function(){return P(this,!0)},hide:function(){return P(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Tt(this)?K(this).show():K(this).hide()})}}),K.Tween=E,E.prototype={constructor:E,init:function(t,e,i,n,s,o){this.elem=t,this.prop=i,this.easing=s||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(K.cssNumber[i]?"":"px")},cur:function(){var t=E.propHooks[this.prop];return t&&t.get?t.get(this):E.propHooks._default.get(this)},run:function(t){var e,i=E.propHooks[this.prop];return this.options.duration?this.pos=e=K.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):E.propHooks._default.set(this),this}},E.prototype.init.prototype=E.prototype,E.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=K.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){K.fx.step[t.prop]?K.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[K.cssProps[t.prop]]||K.cssHooks[t.prop])?K.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},E.propHooks.scrollTop=E.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},K.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},K.fx=E.prototype.init,K.fx.step={};var Yt,Zt,Jt=/^(?:toggle|show|hide)$/,Kt=new RegExp("^(?:([+-])=|)("+bt+")([a-z%]*)$","i"),te=/queueHooks$/,ee=[M],ie={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),s=Kt.exec(e),o=s&&s[3]||(K.cssNumber[t]?"":"px"),r=(K.cssNumber[t]||"px"!==o&&+n)&&Kt.exec(K.css(i.elem,t)),a=1,h=20;if(r&&r[3]!==o){o=o||r[3],s=s||[],r=+n||1;do a=a||".5",r/=a,K.style(i.elem,t,r+o);while(a!==(a=i.cur()/n)&&1!==a&&--h)}return s&&(r=i.start=+r||+n||0,i.unit=o,i.end=s[1]?r+(s[1]+1)*s[2]:+s[2]),i}]};K.Animation=K.extend(j,{tweener:function(t,e){K.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,n=0,s=t.length;n<s;n++)i=t[n],ie[i]=ie[i]||[],ie[i].unshift(e)},prefilter:function(t,e){e?ee.unshift(t):ee.push(t)}}),K.speed=function(t,e,i){var n=t&&"object"==typeof t?K.extend({},t):{complete:i||!i&&e||K.isFunction(t)&&t,duration:t,easing:i&&e||e&&!K.isFunction(e)&&e};return n.duration=K.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in K.fx.speeds?K.fx.speeds[n.duration]:K.fx.speeds._default,null!=n.queue&&n.queue!==!0||(n.queue="fx"),n.old=n.complete,n.complete=function(){K.isFunction(n.old)&&n.old.call(this),n.queue&&K.dequeue(this,n.queue)},n},K.fn.extend({fadeTo:function(t,e,i,n){return this.filter(Tt).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var s=K.isEmptyObject(t),o=K.speed(e,i,n),r=function(){var e=j(this,K.extend({},t),o);(s||vt.get(this,"finish"))&&e.stop(!0)};return r.finish=r,s||o.queue===!1?this.each(r):this.queue(o.queue,r)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,s=null!=t&&t+"queueHooks",o=K.timers,r=vt.get(this);if(s)r[s]&&r[s].stop&&n(r[s]);else for(s in r)r[s]&&r[s].stop&&te.test(s)&&n(r[s]);for(s=o.length;s--;)o[s].elem!==this||null!=t&&o[s].queue!==t||(o[s].anim.stop(i),e=!1,o.splice(s,1));!e&&i||K.dequeue(this,t);
})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,i=vt.get(this),n=i[t+"queue"],s=i[t+"queueHooks"],o=K.timers,r=n?n.length:0;for(i.finish=!0,K.queue(this,t,[]),s&&s.stop&&s.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<r;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),K.each(["toggle","show","hide"],function(t,e){var i=K.fn[e];K.fn[e]=function(t,n,s){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(C(e,!0),t,n,s)}}),K.each({slideDown:C("show"),slideUp:C("hide"),slideToggle:C("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){K.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),K.timers=[],K.fx.tick=function(){var t,e=0,i=K.timers;for(Yt=K.now();e<i.length;e++)t=i[e],t()||i[e]!==t||i.splice(e--,1);i.length||K.fx.stop(),Yt=void 0},K.fx.timer=function(t){K.timers.push(t),t()?K.fx.start():K.timers.pop()},K.fx.interval=13,K.fx.start=function(){Zt||(Zt=setInterval(K.fx.tick,K.fx.interval))},K.fx.stop=function(){clearInterval(Zt),Zt=null},K.fx.speeds={slow:600,fast:200,_default:400},K.fn.delay=function(t,e){return t=K.fx?K.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}})},function(){var t=Z.createElement("input"),e=Z.createElement("select"),i=e.appendChild(Z.createElement("option"));t.type="checkbox",Y.checkOn=""!==t.value,Y.optSelected=i.selected,e.disabled=!0,Y.optDisabled=!i.disabled,t=Z.createElement("input"),t.value="t",t.type="radio",Y.radioValue="t"===t.value}();var ne,se,oe=K.expr.attrHandle;K.fn.extend({attr:function(t,e){return mt(this,K.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){K.removeAttr(this,t)})}}),K.extend({attr:function(t,e,i){var n,s,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return typeof t.getAttribute===kt?K.prop(t,e,i):(1===o&&K.isXMLDoc(t)||(e=e.toLowerCase(),n=K.attrHooks[e]||(K.expr.match.bool.test(e)?se:ne)),void 0===i?n&&"get"in n&&null!==(s=n.get(t,e))?s:(s=K.find.attr(t,e),null==s?void 0:s):null!==i?n&&"set"in n&&void 0!==(s=n.set(t,i,e))?s:(t.setAttribute(e,i+""),i):void K.removeAttr(t,e))},removeAttr:function(t,e){var i,n,s=0,o=e&&e.match(ft);if(o&&1===t.nodeType)for(;i=o[s++];)n=K.propFix[i]||i,K.expr.match.bool.test(i)&&(t[n]=!1),t.removeAttribute(i)},attrHooks:{type:{set:function(t,e){if(!Y.radioValue&&"radio"===e&&K.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}}}),se={set:function(t,e,i){return e===!1?K.removeAttr(t,i):t.setAttribute(i,i),i}},K.each(K.expr.match.bool.source.match(/\w+/g),function(t,e){var i=oe[e]||K.find.attr;oe[e]=function(t,e,n){var s,o;return n||(o=oe[e],oe[e]=s,s=null!=i(t,e,n)?e.toLowerCase():null,oe[e]=o),s}});var re=/^(?:input|select|textarea|button)$/i;K.fn.extend({prop:function(t,e){return mt(this,K.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[K.propFix[t]||t]})}}),K.extend({propFix:{for:"htmlFor",class:"className"},prop:function(t,e,i){var n,s,o,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return o=1!==r||!K.isXMLDoc(t),o&&(e=K.propFix[e]||e,s=K.propHooks[e]),void 0!==i?s&&"set"in s&&void 0!==(n=s.set(t,i,e))?n:t[e]=i:s&&"get"in s&&null!==(n=s.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||re.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),Y.optSelected||(K.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),K.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){K.propFix[this.toLowerCase()]=this});var ae=/[\t\r\n\f]/g;K.fn.extend({addClass:function(t){var e,i,n,s,o,r,a="string"==typeof t&&t,h=0,l=this.length;if(K.isFunction(t))return this.each(function(e){K(this).addClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(ft)||[];h<l;h++)if(i=this[h],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(ae," "):" ")){for(o=0;s=e[o++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");r=K.trim(n),i.className!==r&&(i.className=r)}return this},removeClass:function(t){var e,i,n,s,o,r,a=0===arguments.length||"string"==typeof t&&t,h=0,l=this.length;if(K.isFunction(t))return this.each(function(e){K(this).removeClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(ft)||[];h<l;h++)if(i=this[h],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(ae," "):"")){for(o=0;s=e[o++];)for(;n.indexOf(" "+s+" ")>=0;)n=n.replace(" "+s+" "," ");r=t?K.trim(n):"",i.className!==r&&(i.className=r)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):K.isFunction(t)?this.each(function(i){K(this).toggleClass(t.call(this,i,this.className,e),e)}):this.each(function(){if("string"===i)for(var e,n=0,s=K(this),o=t.match(ft)||[];e=o[n++];)s.hasClass(e)?s.removeClass(e):s.addClass(e);else i!==kt&&"boolean"!==i||(this.className&&vt.set(this,"__className__",this.className),this.className=this.className||t===!1?"":vt.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;i<n;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(ae," ").indexOf(e)>=0)return!0;return!1}});var he=/\r/g;K.fn.extend({val:function(t){var e,i,n,s=this[0];{if(arguments.length)return n=K.isFunction(t),this.each(function(i){var s;1===this.nodeType&&(s=n?t.call(this,i,K(this).val()):t,null==s?s="":"number"==typeof s?s+="":K.isArray(s)&&(s=K.map(s,function(t){return null==t?"":t+""})),e=K.valHooks[this.type]||K.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,s,"value")||(this.value=s))});if(s)return e=K.valHooks[s.type]||K.valHooks[s.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(i=e.get(s,"value"))?i:(i=s.value,"string"==typeof i?i.replace(he,""):null==i?"":i)}}}),K.extend({valHooks:{option:{get:function(t){var e=K.find.attr(t,"value");return null!=e?e:K.trim(K.text(t))}},select:{get:function(t){for(var e,i,n=t.options,s=t.selectedIndex,o="select-one"===t.type||s<0,r=o?null:[],a=o?s+1:n.length,h=s<0?a:o?s:0;h<a;h++)if(i=n[h],(i.selected||h===s)&&(Y.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!K.nodeName(i.parentNode,"optgroup"))){if(e=K(i).val(),o)return e;r.push(e)}return r},set:function(t,e){for(var i,n,s=t.options,o=K.makeArray(e),r=s.length;r--;)n=s[r],(n.selected=K.inArray(n.value,o)>=0)&&(i=!0);return i||(t.selectedIndex=-1),o}}}}),K.each(["radio","checkbox"],function(){K.valHooks[this]={set:function(t,e){if(K.isArray(e))return t.checked=K.inArray(K(t).val(),e)>=0}},Y.checkOn||(K.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),K.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){K.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),K.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}});var le=K.now(),ue=/\?/;K.parseJSON=function(t){return JSON.parse(t+"")},K.parseXML=function(t){var e,i;if(!t||"string"!=typeof t)return null;try{i=new DOMParser,e=i.parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||K.error("Invalid XML: "+t),e};var ce=/#.*$/,pe=/([?&])_=[^&]*/,fe=/^(.*?):[ \t]*([^\r\n]*)$/gm,de=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ye=/^(?:GET|HEAD)$/,me=/^\/\//,ve=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ge={},_e={},xe="*/".concat("*"),be=t.location.href,we=ve.exec(be.toLowerCase())||[];K.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:be,type:"GET",isLocal:de.test(we[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":xe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":K.parseJSON,"text xml":K.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?D(D(t,K.ajaxSettings),e):D(K.ajaxSettings,t)},ajaxPrefilter:R(ge),ajaxTransport:R(_e),ajax:function(t,e){function i(t,e,i,r){var h,u,v,g,x,w=e;2!==_&&(_=2,a&&clearTimeout(a),n=void 0,o=r||"",b.readyState=t>0?4:0,h=t>=200&&t<300||304===t,i&&(g=L(c,b,i)),g=B(c,g,b,h),h?(c.ifModified&&(x=b.getResponseHeader("Last-Modified"),x&&(K.lastModified[s]=x),x=b.getResponseHeader("etag"),x&&(K.etag[s]=x)),204===t||"HEAD"===c.type?w="nocontent":304===t?w="notmodified":(w=g.state,u=g.data,v=g.error,h=!v)):(v=w,!t&&w||(w="error",t<0&&(t=0))),b.status=t,b.statusText=(e||w)+"",h?d.resolveWith(p,[u,w,b]):d.rejectWith(p,[b,w,v]),b.statusCode(m),m=void 0,l&&f.trigger(h?"ajaxSuccess":"ajaxError",[b,c,h?u:v]),y.fireWith(p,[b,w]),l&&(f.trigger("ajaxComplete",[b,c]),--K.active||K.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,s,o,r,a,h,l,u,c=K.ajaxSetup({},e),p=c.context||c,f=c.context&&(p.nodeType||p.jquery)?K(p):K.event,d=K.Deferred(),y=K.Callbacks("once memory"),m=c.statusCode||{},v={},g={},_=0,x="canceled",b={readyState:0,getResponseHeader:function(t){var e;if(2===_){if(!r)for(r={};e=fe.exec(o);)r[e[1].toLowerCase()]=e[2];e=r[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===_?o:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return _||(t=g[i]=g[i]||t,v[t]=e),this},overrideMimeType:function(t){return _||(c.mimeType=t),this},statusCode:function(t){var e;if(t)if(_<2)for(e in t)m[e]=[m[e],t[e]];else b.always(t[b.status]);return this},abort:function(t){var e=t||x;return n&&n.abort(e),i(0,e),this}};if(d.promise(b).complete=y.add,b.success=b.done,b.error=b.fail,c.url=((t||c.url||be)+"").replace(ce,"").replace(me,we[1]+"//"),c.type=e.method||e.type||c.method||c.type,c.dataTypes=K.trim(c.dataType||"*").toLowerCase().match(ft)||[""],null==c.crossDomain&&(h=ve.exec(c.url.toLowerCase()),c.crossDomain=!(!h||h[1]===we[1]&&h[2]===we[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(we[3]||("http:"===we[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=K.param(c.data,c.traditional)),N(ge,c,e,b),2===_)return b;l=K.event&&c.global,l&&0===K.active++&&K.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!ye.test(c.type),s=c.url,c.hasContent||(c.data&&(s=c.url+=(ue.test(s)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=pe.test(s)?s.replace(pe,"$1_="+le++):s+(ue.test(s)?"&":"?")+"_="+le++)),c.ifModified&&(K.lastModified[s]&&b.setRequestHeader("If-Modified-Since",K.lastModified[s]),K.etag[s]&&b.setRequestHeader("If-None-Match",K.etag[s])),(c.data&&c.hasContent&&c.contentType!==!1||e.contentType)&&b.setRequestHeader("Content-Type",c.contentType),b.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+xe+"; q=0.01":""):c.accepts["*"]);for(u in c.headers)b.setRequestHeader(u,c.headers[u]);if(c.beforeSend&&(c.beforeSend.call(p,b,c)===!1||2===_))return b.abort();x="abort";for(u in{success:1,error:1,complete:1})b[u](c[u]);if(n=N(_e,c,e,b)){b.readyState=1,l&&f.trigger("ajaxSend",[b,c]),c.async&&c.timeout>0&&(a=setTimeout(function(){b.abort("timeout")},c.timeout));try{_=1,n.send(v,i)}catch(t){if(!(_<2))throw t;i(-1,t)}}else i(-1,"No Transport");return b},getJSON:function(t,e,i){return K.get(t,e,i,"json")},getScript:function(t,e){return K.get(t,void 0,e,"script")}}),K.each(["get","post"],function(t,e){K[e]=function(t,i,n,s){return K.isFunction(i)&&(s=s||n,n=i,i=void 0),K.ajax({url:t,type:e,dataType:s,data:i,success:n})}}),K._evalUrl=function(t){return K.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},K.fn.extend({wrapAll:function(t){var e;return K.isFunction(t)?this.each(function(e){K(this).wrapAll(t.call(this,e))}):(this[0]&&(e=K(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return K.isFunction(t)?this.each(function(e){K(this).wrapInner(t.call(this,e))}):this.each(function(){var e=K(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=K.isFunction(t);return this.each(function(i){K(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){K.nodeName(this,"body")||K(this).replaceWith(this.childNodes)}).end()}}),K.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},K.expr.filters.visible=function(t){return!K.expr.filters.hidden(t)};var Te=/%20/g,Se=/\[\]$/,ke=/\r?\n/g,Oe=/^(?:submit|button|image|reset|file)$/i,Pe=/^(?:input|select|textarea|keygen)/i;K.param=function(t,e){var i,n=[],s=function(t,e){e=K.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=K.ajaxSettings&&K.ajaxSettings.traditional),K.isArray(t)||t.jquery&&!K.isPlainObject(t))K.each(t,function(){s(this.name,this.value)});else for(i in t)I(i,t[i],e,s);return n.join("&").replace(Te,"+")},K.fn.extend({serialize:function(){return K.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=K.prop(this,"elements");return t?K.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!K(this).is(":disabled")&&Pe.test(this.nodeName)&&!Oe.test(t)&&(this.checked||!St.test(t))}).map(function(t,e){var i=K(this).val();return null==i?null:K.isArray(i)?K.map(i,function(t){return{name:e.name,value:t.replace(ke,"\r\n")}}):{name:e.name,value:i.replace(ke,"\r\n")}}).get()}}),K.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Ee=0,Ae={},Ce={0:200,1223:204},qe=K.ajaxSettings.xhr();t.attachEvent&&t.attachEvent("onunload",function(){for(var t in Ae)Ae[t]()}),Y.cors=!!qe&&"withCredentials"in qe,Y.ajax=qe=!!qe,K.ajaxTransport(function(t){var e;if(Y.cors||qe&&!t.crossDomain)return{send:function(i,n){var s,o=t.xhr(),r=++Ee;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)o[s]=t.xhrFields[s];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(s in i)o.setRequestHeader(s,i[s]);e=function(t){return function(){e&&(delete Ae[r],e=o.onload=o.onerror=null,"abort"===t?o.abort():"error"===t?n(o.status,o.statusText):n(Ce[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=e(),o.onerror=e("error"),e=Ae[r]=e("abort");try{o.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}}),K.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return K.globalEval(t),t}}}),K.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),K.ajaxTransport("script",function(t){if(t.crossDomain){var e,i;return{send:function(n,s){e=K("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&s("error"===t.type?404:200,t.type)}),Z.head.appendChild(e[0])},abort:function(){i&&i()}}}});var Me=[],Fe=/(=)\?(?=&|$)|\?\?/;K.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Me.pop()||K.expando+"_"+le++;return this[t]=!0,t}}),K.ajaxPrefilter("json jsonp",function(e,i,n){var s,o,r,a=e.jsonp!==!1&&(Fe.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Fe.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return s=e.jsonpCallback=K.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Fe,"$1"+s):e.jsonp!==!1&&(e.url+=(ue.test(e.url)?"&":"?")+e.jsonp+"="+s),e.converters["script json"]=function(){return r||K.error(s+" was not called"),r[0]},e.dataTypes[0]="json",o=t[s],t[s]=function(){r=arguments},n.always(function(){t[s]=o,e[s]&&(e.jsonpCallback=i.jsonpCallback,Me.push(s)),r&&K.isFunction(o)&&o(r[0]),r=o=void 0}),"script"}),K.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||Z;var n=rt.exec(t),s=!i&&[];return n?[e.createElement(n[1])]:(n=K.buildFragment([t],e,s),s&&s.length&&K(s).remove(),K.merge([],n.childNodes))};var je=K.fn.load;K.fn.load=function(t,e,i){if("string"!=typeof t&&je)return je.apply(this,arguments);var n,s,o,r=this,a=t.indexOf(" ");return a>=0&&(n=K.trim(t.slice(a)),t=t.slice(0,a)),K.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(s="POST"),r.length>0&&K.ajax({url:t,type:s,dataType:"html",data:e}).done(function(t){o=arguments,r.html(n?K("<div>").append(K.parseHTML(t)).find(n):t)}).complete(i&&function(t,e){r.each(i,o||[t.responseText,e,t])}),this},K.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){K.fn[e]=function(t){return this.on(e,t)}}),K.expr.filters.animated=function(t){return K.grep(K.timers,function(e){return t===e.elem}).length};var Re=t.document.documentElement;K.offset={setOffset:function(t,e,i){var n,s,o,r,a,h,l,u=K.css(t,"position"),c=K(t),p={};"static"===u&&(t.style.position="relative"),a=c.offset(),o=K.css(t,"top"),h=K.css(t,"left"),l=("absolute"===u||"fixed"===u)&&(o+h).indexOf("auto")>-1,l?(n=c.position(),r=n.top,s=n.left):(r=parseFloat(o)||0,s=parseFloat(h)||0),K.isFunction(e)&&(e=e.call(t,i,a)),null!=e.top&&(p.top=e.top-a.top+r),null!=e.left&&(p.left=e.left-a.left+s),"using"in e?e.using.call(t,p):c.css(p)}},K.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){K.offset.setOffset(this,t,e)});var e,i,n=this[0],s={top:0,left:0},o=n&&n.ownerDocument;if(o)return e=o.documentElement,K.contains(e,n)?(typeof n.getBoundingClientRect!==kt&&(s=n.getBoundingClientRect()),i=V(o),{top:s.top+i.pageYOffset-e.clientTop,left:s.left+i.pageXOffset-e.clientLeft}):s},position:function(){if(this[0]){var t,e,i=this[0],n={top:0,left:0};return"fixed"===K.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),K.nodeName(t[0],"html")||(n=t.offset()),n.top+=K.css(t[0],"borderTopWidth",!0),n.left+=K.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-K.css(i,"marginTop",!0),left:e.left-n.left-K.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Re;t&&!K.nodeName(t,"html")&&"static"===K.css(t,"position");)t=t.offsetParent;return t||Re})}}),K.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var n="pageYOffset"===i;K.fn[e]=function(s){return mt(this,function(e,s,o){var r=V(e);return void 0===o?r?r[i]:e[s]:void(r?r.scrollTo(n?t.pageXOffset:o,n?o:t.pageYOffset):e[s]=o)},e,s,arguments.length,null)}}),K.each(["top","left"],function(t,e){K.cssHooks[e]=w(Y.pixelPosition,function(t,i){if(i)return i=b(t,e),Wt.test(i)?K(t).position()[e]+"px":i})}),K.each({Height:"height",Width:"width"},function(t,e){K.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){K.fn[n]=function(n,s){var o=arguments.length&&(i||"boolean"!=typeof n),r=i||(n===!0||s===!0?"margin":"border");return mt(this,function(e,i,n){var s;return K.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+t],s["scroll"+t],e.body["offset"+t],s["offset"+t],s["client"+t])):void 0===n?K.css(e,i,r):K.style(e,i,n,r)},e,o?n:void 0,o,null)}})}),K.fn.size=function(){return this.length},K.fn.andSelf=K.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return K});var Ne=t.jQuery,De=t.$;return K.noConflict=function(e){return t.$===K&&(t.$=De),e&&t.jQuery===K&&(t.jQuery=Ne),K},typeof e===kt&&(t.jQuery=t.$=K),K})},{}],3:[function(t,e,i){!function(t,i){"use strict";"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?i(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return i(t)}:i(t)}("undefined"!=typeof window?window:this,function(t,e){"use strict";function i(t,e){e=e||et;var i=e.createElement("script");i.text=t,e.head.appendChild(i).parentNode.removeChild(i)}function n(t){var e=!!t&&"length"in t&&t.length,i=dt.type(t);return"function"!==i&&!dt.isWindow(t)&&("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t)}function s(t,e,i){return dt.isFunction(e)?dt.grep(t,function(t,n){return!!e.call(t,n,t)!==i}):e.nodeType?dt.grep(t,function(t){return t===e!==i}):"string"!=typeof e?dt.grep(t,function(t){return rt.call(e,t)>-1!==i}):St.test(e)?dt.filter(e,t,i):(e=dt.filter(e,t),dt.grep(t,function(t){return rt.call(e,t)>-1!==i&&1===t.nodeType}))}function o(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function r(t){var e={};return dt.each(t.match(Ct)||[],function(t,i){e[i]=!0}),e}function a(t){return t}function h(t){throw t}function l(t,e,i){var n;try{t&&dt.isFunction(n=t.promise)?n.call(t).done(e).fail(i):t&&dt.isFunction(n=t.then)?n.call(t,e,i):e.call(void 0,t)}catch(t){i.call(void 0,t)}}function u(){et.removeEventListener("DOMContentLoaded",u),t.removeEventListener("load",u),dt.ready()}function c(){this.expando=dt.expando+c.uid++}function p(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:Dt.test(t)?JSON.parse(t):t)}function f(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(Lt,"-$&").toLowerCase(),i=t.getAttribute(n),"string"==typeof i){try{i=p(i)}catch(t){}Nt.set(t,e,i)}else i=void 0;return i}function d(t,e,i,n){var s,o=1,r=20,a=n?function(){return n.cur()}:function(){return dt.css(t,e,"")},h=a(),l=i&&i[3]||(dt.cssNumber[e]?"":"px"),u=(dt.cssNumber[e]||"px"!==l&&+h)&&It.exec(dt.css(t,e));if(u&&u[3]!==l){l=l||u[3],i=i||[],u=+h||1;do o=o||".5",u/=o,dt.style(t,e,u+l);while(o!==(o=a()/h)&&1!==o&&--r)}return i&&(u=+u||+h||0,s=i[1]?u+(i[1]+1)*i[2]:+i[2],n&&(n.unit=l,n.start=u,n.end=s)),s}function y(t){var e,i=t.ownerDocument,n=t.nodeName,s=zt[n];return s?s:(e=i.body.appendChild(i.createElement(n)),s=dt.css(e,"display"),e.parentNode.removeChild(e),"none"===s&&(s="block"),zt[n]=s,s)}function m(t,e){for(var i,n,s=[],o=0,r=t.length;o<r;o++)n=t[o],n.style&&(i=n.style.display,e?("none"===i&&(s[o]=Rt.get(n,"display")||null,s[o]||(n.style.display="")),""===n.style.display&&Wt(n)&&(s[o]=y(n))):"none"!==i&&(s[o]="none",Rt.set(n,"display",i)));for(o=0;o<r;o++)null!=s[o]&&(t[o].style.display=s[o]);return t}function v(t,e){var i;return i="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e||"*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&dt.nodeName(t,e)?dt.merge([t],i):i}function g(t,e){for(var i=0,n=t.length;i<n;i++)Rt.set(t[i],"globalEval",!e||Rt.get(e[i],"globalEval"))}function _(t,e,i,n,s){for(var o,r,a,h,l,u,c=e.createDocumentFragment(),p=[],f=0,d=t.length;f<d;f++)if(o=t[f],o||0===o)if("object"===dt.type(o))dt.merge(p,o.nodeType?[o]:o);else if(Qt.test(o)){for(r=r||c.appendChild(e.createElement("div")),a=(Gt.exec(o)||["",""])[1].toLowerCase(),h=Xt[a]||Xt._default,r.innerHTML=h[1]+dt.htmlPrefilter(o)+h[2],u=h[0];u--;)r=r.lastChild;dt.merge(p,r.childNodes),r=c.firstChild,r.textContent=""}else p.push(e.createTextNode(o));for(c.textContent="",f=0;o=p[f++];)if(n&&dt.inArray(o,n)>-1)s&&s.push(o);else if(l=dt.contains(o.ownerDocument,o),r=v(c.appendChild(o),"script"),l&&g(r),i)for(u=0;o=r[u++];)$t.test(o.type||"")&&i.push(o);return c}function x(){return!0}function b(){return!1}function w(){try{return et.activeElement}catch(t){}}function T(t,e,i,n,s,o){var r,a;if("object"==typeof e){"string"!=typeof i&&(n=n||i,i=void 0);for(a in e)T(t,a,i,n,e[a],o);return t}if(null==n&&null==s?(s=i,n=i=void 0):null==s&&("string"==typeof i?(s=n,n=void 0):(s=n,n=i,i=void 0)),s===!1)s=b;else if(!s)return t;return 1===o&&(r=s,s=function(t){return dt().off(t),r.apply(this,arguments)},s.guid=r.guid||(r.guid=dt.guid++)),t.each(function(){dt.event.add(this,e,s,n,i)})}function S(t,e){return dt.nodeName(t,"table")&&dt.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t:t}function k(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function O(t){var e=ne.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function P(t,e){var i,n,s,o,r,a,h,l;if(1===e.nodeType){if(Rt.hasData(t)&&(o=Rt.access(t),r=Rt.set(e,o),l=o.events)){delete r.handle,r.events={};for(s in l)for(i=0,n=l[s].length;i<n;i++)dt.event.add(e,s,l[s][i])}Nt.hasData(t)&&(a=Nt.access(t),h=dt.extend({},a),Nt.set(e,h))}}function E(t,e){var i=e.nodeName.toLowerCase();"input"===i&&Ut.test(t.type)?e.checked=t.checked:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}function A(t,e,n,s){e=st.apply([],e);var o,r,a,h,l,u,c=0,p=t.length,f=p-1,d=e[0],y=dt.isFunction(d);if(y||p>1&&"string"==typeof d&&!pt.checkClone&&ie.test(d))return t.each(function(i){var o=t.eq(i);y&&(e[0]=d.call(this,i,o.html())),A(o,e,n,s)});if(p&&(o=_(e,t[0].ownerDocument,!1,t,s),r=o.firstChild,1===o.childNodes.length&&(o=r),r||s)){for(a=dt.map(v(o,"script"),k),h=a.length;c<p;c++)l=o,c!==f&&(l=dt.clone(l,!0,!0),h&&dt.merge(a,v(l,"script"))),n.call(t[c],l,c);if(h)for(u=a[a.length-1].ownerDocument,dt.map(a,O),c=0;c<h;c++)l=a[c],$t.test(l.type||"")&&!Rt.access(l,"globalEval")&&dt.contains(u,l)&&(l.src?dt._evalUrl&&dt._evalUrl(l.src):i(l.textContent.replace(se,""),u))}return t}function C(t,e,i){for(var n,s=e?dt.filter(e,t):t,o=0;null!=(n=s[o]);o++)i||1!==n.nodeType||dt.cleanData(v(n)),n.parentNode&&(i&&dt.contains(n.ownerDocument,n)&&g(v(n,"script")),n.parentNode.removeChild(n));return t}function q(t,e,i){var n,s,o,r,a=t.style;return i=i||ae(t),i&&(r=i.getPropertyValue(e)||i[e],""!==r||dt.contains(t.ownerDocument,t)||(r=dt.style(t,e)),!pt.pixelMarginRight()&&re.test(r)&&oe.test(e)&&(n=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=i.width,a.width=n,a.minWidth=s,a.maxWidth=o)),void 0!==r?r+"":r}function M(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function F(t){if(t in pe)return t;for(var e=t[0].toUpperCase()+t.slice(1),i=ce.length;i--;)if(t=ce[i]+e,t in pe)return t}function j(t,e,i){var n=It.exec(e);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):e}function R(t,e,i,n,s){var o,r=0;for(o=i===(n?"border":"content")?4:"width"===e?1:0;o<4;o+=2)"margin"===i&&(r+=dt.css(t,i+Vt[o],!0,s)),n?("content"===i&&(r-=dt.css(t,"padding"+Vt[o],!0,s)),"margin"!==i&&(r-=dt.css(t,"border"+Vt[o]+"Width",!0,s))):(r+=dt.css(t,"padding"+Vt[o],!0,s),"padding"!==i&&(r+=dt.css(t,"border"+Vt[o]+"Width",!0,s)));return r}function N(t,e,i){var n,s=!0,o=ae(t),r="border-box"===dt.css(t,"boxSizing",!1,o);if(t.getClientRects().length&&(n=t.getBoundingClientRect()[e]),n<=0||null==n){if(n=q(t,e,o),(n<0||null==n)&&(n=t.style[e]),re.test(n))return n;s=r&&(pt.boxSizingReliable()||n===t.style[e]),n=parseFloat(n)||0}return n+R(t,e,i||(r?"border":"content"),s,o)+"px"}function D(t,e,i,n,s){return new D.prototype.init(t,e,i,n,s)}function L(){de&&(t.requestAnimationFrame(L),dt.fx.tick())}function B(){return t.setTimeout(function(){fe=void 0}),fe=dt.now()}function I(t,e){var i,n=0,s={height:t};for(e=e?1:0;n<4;n+=2-e)i=Vt[n],s["margin"+i]=s["padding"+i]=t;return e&&(s.opacity=s.width=t),s}function V(t,e,i){for(var n,s=(z.tweeners[e]||[]).concat(z.tweeners["*"]),o=0,r=s.length;o<r;o++)if(n=s[o].call(i,e,t))return n}function W(t,e,i){var n,s,o,r,a,h,l,u,c="width"in e||"height"in e,p=this,f={},d=t.style,y=t.nodeType&&Wt(t),v=Rt.get(t,"fxshow");i.queue||(r=dt._queueHooks(t,"fx"),null==r.unqueued&&(r.unqueued=0,a=r.empty.fire,r.empty.fire=function(){r.unqueued||a()}),r.unqueued++,p.always(function(){p.always(function(){r.unqueued--,dt.queue(t,"fx").length||r.empty.fire()})}));for(n in e)if(s=e[n],ye.test(s)){if(delete e[n],o=o||"toggle"===s,s===(y?"hide":"show")){if("show"!==s||!v||void 0===v[n])continue;y=!0}f[n]=v&&v[n]||dt.style(t,n)}if(h=!dt.isEmptyObject(e),h||!dt.isEmptyObject(f)){c&&1===t.nodeType&&(i.overflow=[d.overflow,d.overflowX,d.overflowY],l=v&&v.display,null==l&&(l=Rt.get(t,"display")),u=dt.css(t,"display"),"none"===u&&(l?u=l:(m([t],!0),l=t.style.display||l,u=dt.css(t,"display"),m([t]))),("inline"===u||"inline-block"===u&&null!=l)&&"none"===dt.css(t,"float")&&(h||(p.done(function(){d.display=l}),null==l&&(u=d.display,l="none"===u?"":u)),d.display="inline-block")),i.overflow&&(d.overflow="hidden",p.always(function(){d.overflow=i.overflow[0],d.overflowX=i.overflow[1],d.overflowY=i.overflow[2]})),h=!1;for(n in f)h||(v?"hidden"in v&&(y=v.hidden):v=Rt.access(t,"fxshow",{display:l}),o&&(v.hidden=!y),y&&m([t],!0),p.done(function(){y||m([t]),Rt.remove(t,"fxshow");for(n in f)dt.style(t,n,f[n])})),h=V(y?v[n]:0,n,p),n in v||(v[n]=h.start,y&&(h.end=h.start,h.start=0))}}function H(t,e){var i,n,s,o,r;for(i in t)if(n=dt.camelCase(i),s=e[n],o=t[i],dt.isArray(o)&&(s=o[1],o=t[i]=o[0]),i!==n&&(t[n]=o,delete t[i]),r=dt.cssHooks[n],r&&"expand"in r){o=r.expand(o),delete t[n];for(i in o)i in t||(t[i]=o[i],e[i]=s)}else e[n]=s}function z(t,e,i){var n,s,o=0,r=z.prefilters.length,a=dt.Deferred().always(function(){delete h.elem}),h=function(){if(s)return!1;for(var e=fe||B(),i=Math.max(0,l.startTime+l.duration-e),n=i/l.duration||0,o=1-n,r=0,h=l.tweens.length;r<h;r++)l.tweens[r].run(o);return a.notifyWith(t,[l,o,i]),o<1&&h?i:(a.resolveWith(t,[l]),!1)},l=a.promise({elem:t,props:dt.extend({},e),opts:dt.extend(!0,{specialEasing:{},easing:dt.easing._default},i),originalProperties:e,originalOptions:i,startTime:fe||B(),duration:i.duration,tweens:[],createTween:function(e,i){var n=dt.Tween(t,l.opts,e,i,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var i=0,n=e?l.tweens.length:0;if(s)return this;for(s=!0;i<n;i++)l.tweens[i].run(1);return e?(a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l,e])):a.rejectWith(t,[l,e]),this}}),u=l.props;for(H(u,l.opts.specialEasing);o<r;o++)if(n=z.prefilters[o].call(l,t,u,l.opts))return dt.isFunction(n.stop)&&(dt._queueHooks(l.elem,l.opts.queue).stop=dt.proxy(n.stop,n)),n;return dt.map(u,V,l),dt.isFunction(l.opts.start)&&l.opts.start.call(t,l),dt.fx.timer(dt.extend(h,{elem:t,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function U(t){var e=t.match(Ct)||[];return e.join(" ")}function G(t){return t.getAttribute&&t.getAttribute("class")||""}function $(t,e,i,n){var s;if(dt.isArray(e))dt.each(e,function(e,s){i||Oe.test(t)?n(t,s):$(t+"["+("object"==typeof s&&null!=s?e:"")+"]",s,i,n)});else if(i||"object"!==dt.type(e))n(t,e);else for(s in e)$(t+"["+s+"]",e[s],i,n)}function X(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,s=0,o=e.toLowerCase().match(Ct)||[];if(dt.isFunction(i))for(;n=o[s++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function Q(t,e,i,n){function s(a){var h;return o[a]=!0,dt.each(t[a]||[],function(t,a){var l=a(e,i,n);return"string"!=typeof l||r||o[l]?r?!(h=l):void 0:(e.dataTypes.unshift(l),s(l),!1)}),h}var o={},r=t===Le;return s(e.dataTypes[0])||!o["*"]&&s("*")}function Y(t,e){var i,n,s=dt.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((s[i]?t:n||(n={}))[i]=e[i]);return n&&dt.extend(!0,t,n),t}function Z(t,e,i){for(var n,s,o,r,a=t.contents,h=t.dataTypes;"*"===h[0];)h.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(s in a)if(a[s]&&a[s].test(n)){h.unshift(s);break}if(h[0]in i)o=h[0];else{for(s in i){
if(!h[0]||t.converters[s+" "+h[0]]){o=s;break}r||(r=s)}o=o||r}if(o)return o!==h[0]&&h.unshift(o),i[o]}function J(t,e,i,n){var s,o,r,a,h,l={},u=t.dataTypes.slice();if(u[1])for(r in t.converters)l[r.toLowerCase()]=t.converters[r];for(o=u.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!h&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),h=o,o=u.shift())if("*"===o)o=h;else if("*"!==h&&h!==o){if(r=l[h+" "+o]||l["* "+o],!r)for(s in l)if(a=s.split(" "),a[1]===o&&(r=l[h+" "+a[0]]||l["* "+a[0]])){r===!0?r=l[s]:l[s]!==!0&&(o=a[0],u.unshift(a[1]));break}if(r!==!0)if(r&&t.throws)e=r(e);else try{e=r(e)}catch(t){return{state:"parsererror",error:r?t:"No conversion from "+h+" to "+o}}}return{state:"success",data:e}}function K(t){return dt.isWindow(t)?t:9===t.nodeType&&t.defaultView}var tt=[],et=t.document,it=Object.getPrototypeOf,nt=tt.slice,st=tt.concat,ot=tt.push,rt=tt.indexOf,at={},ht=at.toString,lt=at.hasOwnProperty,ut=lt.toString,ct=ut.call(Object),pt={},ft="3.1.1",dt=function(t,e){return new dt.fn.init(t,e)},yt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,mt=/^-ms-/,vt=/-([a-z])/g,gt=function(t,e){return e.toUpperCase()};dt.fn=dt.prototype={jquery:ft,constructor:dt,length:0,toArray:function(){return nt.call(this)},get:function(t){return null==t?nt.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=dt.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return dt.each(this,t)},map:function(t){return this.pushStack(dt.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(nt.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(i>=0&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:ot,sort:tt.sort,splice:tt.splice},dt.extend=dt.fn.extend=function(){var t,e,i,n,s,o,r=arguments[0]||{},a=1,h=arguments.length,l=!1;for("boolean"==typeof r&&(l=r,r=arguments[a]||{},a++),"object"==typeof r||dt.isFunction(r)||(r={}),a===h&&(r=this,a--);a<h;a++)if(null!=(t=arguments[a]))for(e in t)i=r[e],n=t[e],r!==n&&(l&&n&&(dt.isPlainObject(n)||(s=dt.isArray(n)))?(s?(s=!1,o=i&&dt.isArray(i)?i:[]):o=i&&dt.isPlainObject(i)?i:{},r[e]=dt.extend(l,o,n)):void 0!==n&&(r[e]=n));return r},dt.extend({expando:"jQuery"+(ft+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===dt.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=dt.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},isPlainObject:function(t){var e,i;return!(!t||"[object Object]"!==ht.call(t))&&(!(e=it(t))||(i=lt.call(e,"constructor")&&e.constructor,"function"==typeof i&&ut.call(i)===ct))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?at[ht.call(t)]||"object":typeof t},globalEval:function(t){i(t)},camelCase:function(t){return t.replace(mt,"ms-").replace(vt,gt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var i,s=0;if(n(t))for(i=t.length;s<i&&e.call(t[s],s,t[s])!==!1;s++);else for(s in t)if(e.call(t[s],s,t[s])===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(yt,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?dt.merge(i,"string"==typeof t?[t]:t):ot.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:rt.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,s=t.length;n<i;n++)t[s++]=e[n];return t.length=s,t},grep:function(t,e,i){for(var n,s=[],o=0,r=t.length,a=!i;o<r;o++)n=!e(t[o],o),n!==a&&s.push(t[o]);return s},map:function(t,e,i){var s,o,r=0,a=[];if(n(t))for(s=t.length;r<s;r++)o=e(t[r],r,i),null!=o&&a.push(o);else for(r in t)o=e(t[r],r,i),null!=o&&a.push(o);return st.apply([],a)},guid:1,proxy:function(t,e){var i,n,s;if("string"==typeof e&&(i=t[e],e=t,t=i),dt.isFunction(t))return n=nt.call(arguments,2),s=function(){return t.apply(e||this,n.concat(nt.call(arguments)))},s.guid=t.guid=t.guid||dt.guid++,s},now:Date.now,support:pt}),"function"==typeof Symbol&&(dt.fn[Symbol.iterator]=tt[Symbol.iterator]),dt.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){at["[object "+e+"]"]=e.toLowerCase()});var _t=function(t){function e(t,e,i,n){var s,o,r,a,h,l,u,p=e&&e.ownerDocument,d=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==d&&9!==d&&11!==d)return i;if(!n&&((e?e.ownerDocument||e:V)!==F&&M(e),e=e||F,R)){if(11!==d&&(h=vt.exec(t)))if(s=h[1]){if(9===d){if(!(r=e.getElementById(s)))return i;if(r.id===s)return i.push(r),i}else if(p&&(r=p.getElementById(s))&&B(e,r)&&r.id===s)return i.push(r),i}else{if(h[2])return J.apply(i,e.getElementsByTagName(t)),i;if((s=h[3])&&w.getElementsByClassName&&e.getElementsByClassName)return J.apply(i,e.getElementsByClassName(s)),i}if(w.qsa&&!G[t+" "]&&(!N||!N.test(t))){if(1!==d)p=e,u=t;else if("object"!==e.nodeName.toLowerCase()){for((a=e.getAttribute("id"))?a=a.replace(bt,wt):e.setAttribute("id",a=I),l=O(t),o=l.length;o--;)l[o]="#"+a+" "+f(l[o]);u=l.join(","),p=gt.test(t)&&c(e.parentNode)||e}if(u)try{return J.apply(i,p.querySelectorAll(u)),i}catch(t){}finally{a===I&&e.removeAttribute("id")}}}return E(t.replace(at,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>T.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[I]=!0,t}function s(t){var e=F.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var i=t.split("|"),n=i.length;n--;)T.attrHandle[i[n]]=e}function r(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function a(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function h(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function l(t){return function(e){return"form"in e?e.parentNode&&e.disabled===!1?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&St(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function u(t){return n(function(e){return e=+e,n(function(i,n){for(var s,o=t([],i.length,e),r=o.length;r--;)i[s=o[r]]&&(i[s]=!(n[s]=i[s]))})})}function c(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function p(){}function f(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function d(t,e,i){var n=e.dir,s=e.next,o=s||n,r=i&&"parentNode"===o,a=H++;return e.first?function(e,i,s){for(;e=e[n];)if(1===e.nodeType||r)return t(e,i,s);return!1}:function(e,i,h){var l,u,c,p=[W,a];if(h){for(;e=e[n];)if((1===e.nodeType||r)&&t(e,i,h))return!0}else for(;e=e[n];)if(1===e.nodeType||r)if(c=e[I]||(e[I]={}),u=c[e.uniqueID]||(c[e.uniqueID]={}),s&&s===e.nodeName.toLowerCase())e=e[n]||e;else{if((l=u[o])&&l[0]===W&&l[1]===a)return p[2]=l[2];if(u[o]=p,p[2]=t(e,i,h))return!0}return!1}}function y(t){return t.length>1?function(e,i,n){for(var s=t.length;s--;)if(!t[s](e,i,n))return!1;return!0}:t[0]}function m(t,i,n){for(var s=0,o=i.length;s<o;s++)e(t,i[s],n);return n}function v(t,e,i,n,s){for(var o,r=[],a=0,h=t.length,l=null!=e;a<h;a++)(o=t[a])&&(i&&!i(o,n,s)||(r.push(o),l&&e.push(a)));return r}function g(t,e,i,s,o,r){return s&&!s[I]&&(s=g(s)),o&&!o[I]&&(o=g(o,r)),n(function(n,r,a,h){var l,u,c,p=[],f=[],d=r.length,y=n||m(e||"*",a.nodeType?[a]:a,[]),g=!t||!n&&e?y:v(y,p,t,a,h),_=i?o||(n?t:d||s)?[]:r:g;if(i&&i(g,_,a,h),s)for(l=v(_,f),s(l,[],a,h),u=l.length;u--;)(c=l[u])&&(_[f[u]]=!(g[f[u]]=c));if(n){if(o||t){if(o){for(l=[],u=_.length;u--;)(c=_[u])&&l.push(g[u]=c);o(null,_=[],l,h)}for(u=_.length;u--;)(c=_[u])&&(l=o?tt(n,c):p[u])>-1&&(n[l]=!(r[l]=c))}}else _=v(_===r?_.splice(d,_.length):_),o?o(null,r,_,h):J.apply(r,_)})}function _(t){for(var e,i,n,s=t.length,o=T.relative[t[0].type],r=o||T.relative[" "],a=o?1:0,h=d(function(t){return t===e},r,!0),l=d(function(t){return tt(e,t)>-1},r,!0),u=[function(t,i,n){var s=!o&&(n||i!==A)||((e=i).nodeType?h(t,i,n):l(t,i,n));return e=null,s}];a<s;a++)if(i=T.relative[t[a].type])u=[d(y(u),i)];else{if(i=T.filter[t[a].type].apply(null,t[a].matches),i[I]){for(n=++a;n<s&&!T.relative[t[n].type];n++);return g(a>1&&y(u),a>1&&f(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(at,"$1"),i,a<n&&_(t.slice(a,n)),n<s&&_(t=t.slice(n)),n<s&&f(t))}u.push(i)}return y(u)}function x(t,i){var s=i.length>0,o=t.length>0,r=function(n,r,a,h,l){var u,c,p,f=0,d="0",y=n&&[],m=[],g=A,_=n||o&&T.find.TAG("*",l),x=W+=null==g?1:Math.random()||.1,b=_.length;for(l&&(A=r===F||r||l);d!==b&&null!=(u=_[d]);d++){if(o&&u){for(c=0,r||u.ownerDocument===F||(M(u),a=!R);p=t[c++];)if(p(u,r||F,a)){h.push(u);break}l&&(W=x)}s&&((u=!p&&u)&&f--,n&&y.push(u))}if(f+=d,s&&d!==f){for(c=0;p=i[c++];)p(y,m,r,a);if(n){if(f>0)for(;d--;)y[d]||m[d]||(m[d]=Y.call(h));m=v(m)}J.apply(h,m),l&&!n&&m.length>0&&f+i.length>1&&e.uniqueSort(h)}return l&&(W=x,A=g),y};return s?n(r):r}var b,w,T,S,k,O,P,E,A,C,q,M,F,j,R,N,D,L,B,I="sizzle"+1*new Date,V=t.document,W=0,H=0,z=i(),U=i(),G=i(),$=function(t,e){return t===e&&(q=!0),0},X={}.hasOwnProperty,Q=[],Y=Q.pop,Z=Q.push,J=Q.push,K=Q.slice,tt=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",nt="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",st="\\["+it+"*("+nt+")(?:"+it+"*([*^$|!~]?=)"+it+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+nt+"))|)"+it+"*\\]",ot=":("+nt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+st+")*)|.*)\\)|)",rt=new RegExp(it+"+","g"),at=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),ht=new RegExp("^"+it+"*,"+it+"*"),lt=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),ut=new RegExp("="+it+"*([^\\]'\"]*?)"+it+"*\\]","g"),ct=new RegExp(ot),pt=new RegExp("^"+nt+"$"),ft={ID:new RegExp("^#("+nt+")"),CLASS:new RegExp("^\\.("+nt+")"),TAG:new RegExp("^("+nt+"|[*])"),ATTR:new RegExp("^"+st),PSEUDO:new RegExp("^"+ot),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},dt=/^(?:input|select|textarea|button)$/i,yt=/^h\d$/i,mt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,gt=/[+~]/,_t=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),xt=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},bt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,wt=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},Tt=function(){M()},St=d(function(t){return t.disabled===!0&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{J.apply(Q=K.call(V.childNodes),V.childNodes),Q[V.childNodes.length].nodeType}catch(t){J={apply:Q.length?function(t,e){Z.apply(t,K.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}w=e.support={},k=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},M=e.setDocument=function(t){var e,i,n=t?t.ownerDocument||t:V;return n!==F&&9===n.nodeType&&n.documentElement?(F=n,j=F.documentElement,R=!k(F),V!==F&&(i=F.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",Tt,!1):i.attachEvent&&i.attachEvent("onunload",Tt)),w.attributes=s(function(t){return t.className="i",!t.getAttribute("className")}),w.getElementsByTagName=s(function(t){return t.appendChild(F.createComment("")),!t.getElementsByTagName("*").length}),w.getElementsByClassName=mt.test(F.getElementsByClassName),w.getById=s(function(t){return j.appendChild(t).id=I,!F.getElementsByName||!F.getElementsByName(I).length}),w.getById?(T.filter.ID=function(t){var e=t.replace(_t,xt);return function(t){return t.getAttribute("id")===e}},T.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&R){var i=e.getElementById(t);return i?[i]:[]}}):(T.filter.ID=function(t){var e=t.replace(_t,xt);return function(t){var i="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}},T.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&R){var i,n,s,o=e.getElementById(t);if(o){if(i=o.getAttributeNode("id"),i&&i.value===t)return[o];for(s=e.getElementsByName(t),n=0;o=s[n++];)if(i=o.getAttributeNode("id"),i&&i.value===t)return[o]}return[]}}),T.find.TAG=w.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):w.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],s=0,o=e.getElementsByTagName(t);if("*"===t){for(;i=o[s++];)1===i.nodeType&&n.push(i);return n}return o},T.find.CLASS=w.getElementsByClassName&&function(t,e){if("undefined"!=typeof e.getElementsByClassName&&R)return e.getElementsByClassName(t)},D=[],N=[],(w.qsa=mt.test(F.querySelectorAll))&&(s(function(t){j.appendChild(t).innerHTML="<a id='"+I+"'></a><select id='"+I+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&N.push("[*^$]="+it+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||N.push("\\["+it+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+I+"-]").length||N.push("~="),t.querySelectorAll(":checked").length||N.push(":checked"),t.querySelectorAll("a#"+I+"+*").length||N.push(".#.+[+~]")}),s(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=F.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&N.push("name"+it+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&N.push(":enabled",":disabled"),j.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&N.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),N.push(",.*:")})),(w.matchesSelector=mt.test(L=j.matches||j.webkitMatchesSelector||j.mozMatchesSelector||j.oMatchesSelector||j.msMatchesSelector))&&s(function(t){w.disconnectedMatch=L.call(t,"*"),L.call(t,"[s!='']:x"),D.push("!=",ot)}),N=N.length&&new RegExp(N.join("|")),D=D.length&&new RegExp(D.join("|")),e=mt.test(j.compareDocumentPosition),B=e||mt.test(j.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},$=e?function(t,e){if(t===e)return q=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i?i:(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&i||!w.sortDetached&&e.compareDocumentPosition(t)===i?t===F||t.ownerDocument===V&&B(V,t)?-1:e===F||e.ownerDocument===V&&B(V,e)?1:C?tt(C,t)-tt(C,e):0:4&i?-1:1)}:function(t,e){if(t===e)return q=!0,0;var i,n=0,s=t.parentNode,o=e.parentNode,a=[t],h=[e];if(!s||!o)return t===F?-1:e===F?1:s?-1:o?1:C?tt(C,t)-tt(C,e):0;if(s===o)return r(t,e);for(i=t;i=i.parentNode;)a.unshift(i);for(i=e;i=i.parentNode;)h.unshift(i);for(;a[n]===h[n];)n++;return n?r(a[n],h[n]):a[n]===V?-1:h[n]===V?1:0},F):F},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==F&&M(t),i=i.replace(ut,"='$1']"),w.matchesSelector&&R&&!G[i+" "]&&(!D||!D.test(i))&&(!N||!N.test(i)))try{var n=L.call(t,i);if(n||w.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return e(i,F,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==F&&M(t),B(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==F&&M(t);var i=T.attrHandle[e.toLowerCase()],n=i&&X.call(T.attrHandle,e.toLowerCase())?i(t,e,!R):void 0;return void 0!==n?n:w.attributes||!R?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.escape=function(t){return(t+"").replace(bt,wt)},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,s=0;if(q=!w.detectDuplicates,C=!w.sortStable&&t.slice(0),t.sort($),q){for(;e=t[s++];)e===t[s]&&(n=i.push(s));for(;n--;)t.splice(i[n],1)}return C=null,t},S=e.getText=function(t){var e,i="",n=0,s=t.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=S(t)}else if(3===s||4===s)return t.nodeValue}else for(;e=t[n++];)i+=S(e);return i},T=e.selectors={cacheLength:50,createPseudo:n,match:ft,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(_t,xt),t[3]=(t[3]||t[4]||t[5]||"").replace(_t,xt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return ft.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&ct.test(i)&&(e=O(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(_t,xt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=z[t+" "];return e||(e=new RegExp("(^|"+it+")"+t+"("+it+"|$)"))&&z(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(s){var o=e.attr(s,t);return null==o?"!="===i:!i||(o+="","="===i?o===n:"!="===i?o!==n:"^="===i?n&&0===o.indexOf(n):"*="===i?n&&o.indexOf(n)>-1:"$="===i?n&&o.slice(-n.length)===n:"~="===i?(" "+o.replace(rt," ")+" ").indexOf(n)>-1:"|="===i&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,i,n,s){var o="nth"!==t.slice(0,3),r="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===s?function(t){return!!t.parentNode}:function(e,i,h){var l,u,c,p,f,d,y=o!==r?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),g=!h&&!a,_=!1;if(m){if(o){for(;y;){for(p=e;p=p[y];)if(a?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;d=y="only"===t&&!d&&"nextSibling"}return!0}if(d=[r?m.firstChild:m.lastChild],r&&g){for(p=m,c=p[I]||(p[I]={}),u=c[p.uniqueID]||(c[p.uniqueID]={}),l=u[t]||[],f=l[0]===W&&l[1],_=f&&l[2],p=f&&m.childNodes[f];p=++f&&p&&p[y]||(_=f=0)||d.pop();)if(1===p.nodeType&&++_&&p===e){u[t]=[W,f,_];break}}else if(g&&(p=e,c=p[I]||(p[I]={}),u=c[p.uniqueID]||(c[p.uniqueID]={}),l=u[t]||[],f=l[0]===W&&l[1],_=f),_===!1)for(;(p=++f&&p&&p[y]||(_=f=0)||d.pop())&&((a?p.nodeName.toLowerCase()!==v:1!==p.nodeType)||!++_||(g&&(c=p[I]||(p[I]={}),u=c[p.uniqueID]||(c[p.uniqueID]={}),u[t]=[W,_]),p!==e)););return _-=s,_===n||_%n===0&&_/n>=0}}},PSEUDO:function(t,i){var s,o=T.pseudos[t]||T.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[I]?o(i):o.length>1?(s=[t,t,"",i],T.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,s=o(t,i),r=s.length;r--;)n=tt(t,s[r]),t[n]=!(e[n]=s[r])}):function(t){return o(t,0,s)}):o}},pseudos:{not:n(function(t){var e=[],i=[],s=P(t.replace(at,"$1"));return s[I]?n(function(t,e,i,n){for(var o,r=s(t,null,n,[]),a=t.length;a--;)(o=r[a])&&(t[a]=!(e[a]=o))}):function(t,n,o){return e[0]=t,s(e,null,o,i),e[0]=null,!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return t=t.replace(_t,xt),function(e){return(e.textContent||e.innerText||S(e)).indexOf(t)>-1}}),lang:n(function(t){return pt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(_t,xt).toLowerCase(),function(e){var i;do if(i=R?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return i=i.toLowerCase(),i===t||0===i.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===j},focus:function(t){return t===F.activeElement&&(!F.hasFocus||F.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:l(!1),disabled:l(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!T.pseudos.empty(t)},header:function(t){return yt.test(t.nodeName)},input:function(t){return dt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:u(function(){return[0]}),last:u(function(t,e){return[e-1]}),eq:u(function(t,e,i){return[i<0?i+e:i]}),even:u(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:u(function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t}),lt:u(function(t,e,i){for(var n=i<0?i+e:i;--n>=0;)t.push(n);return t}),gt:u(function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t})}},T.pseudos.nth=T.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[b]=a(b);for(b in{submit:!0,reset:!0})T.pseudos[b]=h(b);return p.prototype=T.filters=T.pseudos,T.setFilters=new p,O=e.tokenize=function(t,i){var n,s,o,r,a,h,l,u=U[t+" "];if(u)return i?0:u.slice(0);for(a=t,h=[],l=T.preFilter;a;){n&&!(s=ht.exec(a))||(s&&(a=a.slice(s[0].length)||a),h.push(o=[])),n=!1,(s=lt.exec(a))&&(n=s.shift(),o.push({value:n,type:s[0].replace(at," ")}),a=a.slice(n.length));for(r in T.filter)!(s=ft[r].exec(a))||l[r]&&!(s=l[r](s))||(n=s.shift(),o.push({value:n,type:r,matches:s}),a=a.slice(n.length));if(!n)break}return i?a.length:a?e.error(t):U(t,h).slice(0)},P=e.compile=function(t,e){var i,n=[],s=[],o=G[t+" "];if(!o){for(e||(e=O(t)),i=e.length;i--;)o=_(e[i]),o[I]?n.push(o):s.push(o);o=G(t,x(s,n)),o.selector=t}return o},E=e.select=function(t,e,i,n){var s,o,r,a,h,l="function"==typeof t&&t,u=!n&&O(t=l.selector||t);if(i=i||[],1===u.length){if(o=u[0]=u[0].slice(0),o.length>2&&"ID"===(r=o[0]).type&&9===e.nodeType&&R&&T.relative[o[1].type]){if(e=(T.find.ID(r.matches[0].replace(_t,xt),e)||[])[0],!e)return i;l&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(s=ft.needsContext.test(t)?0:o.length;s--&&(r=o[s],!T.relative[a=r.type]);)if((h=T.find[a])&&(n=h(r.matches[0].replace(_t,xt),gt.test(o[0].type)&&c(e.parentNode)||e))){if(o.splice(s,1),t=n.length&&f(o),!t)return J.apply(i,n),i;break}}return(l||P(t,u))(n,e,!R,i,!e||gt.test(t)&&c(e.parentNode)||e),i},w.sortStable=I.split("").sort($).join("")===I,w.detectDuplicates=!!q,M(),w.sortDetached=s(function(t){return 1&t.compareDocumentPosition(F.createElement("fieldset"))}),s(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),w.attributes&&s(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),s(function(t){return null==t.getAttribute("disabled")})||o(et,function(t,e,i){var n;if(!i)return t[e]===!0?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);dt.find=_t,dt.expr=_t.selectors,dt.expr[":"]=dt.expr.pseudos,dt.uniqueSort=dt.unique=_t.uniqueSort,dt.text=_t.getText,dt.isXMLDoc=_t.isXML,dt.contains=_t.contains,dt.escapeSelector=_t.escape;var xt=function(t,e,i){for(var n=[],s=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(s&&dt(t).is(i))break;n.push(t)}return n},bt=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},wt=dt.expr.match.needsContext,Tt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,St=/^.[^:#\[\.,]*$/;dt.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?dt.find.matchesSelector(n,t)?[n]:[]:dt.find.matches(t,dt.grep(e,function(t){return 1===t.nodeType}))},dt.fn.extend({find:function(t){var e,i,n=this.length,s=this;if("string"!=typeof t)return this.pushStack(dt(t).filter(function(){for(e=0;e<n;e++)if(dt.contains(s[e],this))return!0}));for(i=this.pushStack([]),e=0;e<n;e++)dt.find(t,s[e],i);return n>1?dt.uniqueSort(i):i},filter:function(t){return this.pushStack(s(this,t||[],!1))},not:function(t){return this.pushStack(s(this,t||[],!0))},is:function(t){return!!s(this,"string"==typeof t&&wt.test(t)?dt(t):t||[],!1).length}});var kt,Ot=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Pt=dt.fn.init=function(t,e,i){var n,s;if(!t)return this;if(i=i||kt,"string"==typeof t){if(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:Ot.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof dt?e[0]:e,dt.merge(this,dt.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:et,!0)),Tt.test(n[1])&&dt.isPlainObject(e))for(n in e)dt.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return s=et.getElementById(n[2]),s&&(this[0]=s,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):dt.isFunction(t)?void 0!==i.ready?i.ready(t):t(dt):dt.makeArray(t,this)};Pt.prototype=dt.fn,kt=dt(et);var Et=/^(?:parents|prev(?:Until|All))/,At={children:!0,contents:!0,next:!0,prev:!0};dt.fn.extend({has:function(t){var e=dt(t,this),i=e.length;return this.filter(function(){for(var t=0;t<i;t++)if(dt.contains(this,e[t]))return!0})},closest:function(t,e){var i,n=0,s=this.length,o=[],r="string"!=typeof t&&dt(t);if(!wt.test(t))for(;n<s;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(r?r.index(i)>-1:1===i.nodeType&&dt.find.matchesSelector(i,t))){o.push(i);break}return this.pushStack(o.length>1?dt.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?rt.call(dt(t),this[0]):rt.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(dt.uniqueSort(dt.merge(this.get(),dt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),dt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return xt(t,"parentNode")},parentsUntil:function(t,e,i){return xt(t,"parentNode",i)},next:function(t){return o(t,"nextSibling")},prev:function(t){return o(t,"previousSibling")},nextAll:function(t){return xt(t,"nextSibling")},prevAll:function(t){return xt(t,"previousSibling")},nextUntil:function(t,e,i){return xt(t,"nextSibling",i)},prevUntil:function(t,e,i){return xt(t,"previousSibling",i)},siblings:function(t){return bt((t.parentNode||{}).firstChild,t)},children:function(t){return bt(t.firstChild)},contents:function(t){return t.contentDocument||dt.merge([],t.childNodes)}},function(t,e){dt.fn[t]=function(i,n){var s=dt.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(s=dt.filter(n,s)),this.length>1&&(At[t]||dt.uniqueSort(s),Et.test(t)&&s.reverse()),this.pushStack(s)}});var Ct=/[^\x20\t\r\n\f]+/g;dt.Callbacks=function(t){t="string"==typeof t?r(t):dt.extend({},t);var e,i,n,s,o=[],a=[],h=-1,l=function(){for(s=t.once,n=e=!0;a.length;h=-1)for(i=a.shift();++h<o.length;)o[h].apply(i[0],i[1])===!1&&t.stopOnFalse&&(h=o.length,i=!1);t.memory||(i=!1),e=!1,s&&(o=i?[]:"")},u={add:function(){return o&&(i&&!e&&(h=o.length-1,a.push(i)),function e(i){dt.each(i,function(i,n){dt.isFunction(n)?t.unique&&u.has(n)||o.push(n):n&&n.length&&"string"!==dt.type(n)&&e(n)})}(arguments),i&&!e&&l()),this},remove:function(){return dt.each(arguments,function(t,e){for(var i;(i=dt.inArray(e,o,i))>-1;)o.splice(i,1),i<=h&&h--}),this},has:function(t){return t?dt.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return s=a=[],o=i="",this},disabled:function(){return!o},lock:function(){return s=a=[],i||e||(o=i=""),this},locked:function(){return!!s},fireWith:function(t,i){return s||(i=i||[],i=[t,i.slice?i.slice():i],a.push(i),e||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!n}};return u},dt.extend({Deferred:function(e){var i=[["notify","progress",dt.Callbacks("memory"),dt.Callbacks("memory"),2],["resolve","done",dt.Callbacks("once memory"),dt.Callbacks("once memory"),0,"resolved"],["reject","fail",dt.Callbacks("once memory"),dt.Callbacks("once memory"),1,"rejected"]],n="pending",s={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return s.then(null,t)},pipe:function(){var t=arguments;return dt.Deferred(function(e){dt.each(i,function(i,n){var s=dt.isFunction(t[n[4]])&&t[n[4]];o[n[1]](function(){var t=s&&s.apply(this,arguments);t&&dt.isFunction(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[n[0]+"With"](this,s?[t]:arguments)})}),t=null}).promise()},then:function(e,n,s){function o(e,i,n,s){return function(){var l=this,u=arguments,c=function(){var t,c;if(!(e<r)){if(t=n.apply(l,u),t===i.promise())throw new TypeError("Thenable self-resolution");c=t&&("object"==typeof t||"function"==typeof t)&&t.then,dt.isFunction(c)?s?c.call(t,o(r,i,a,s),o(r,i,h,s)):(r++,c.call(t,o(r,i,a,s),o(r,i,h,s),o(r,i,a,i.notifyWith))):(n!==a&&(l=void 0,u=[t]),(s||i.resolveWith)(l,u))}},p=s?c:function(){try{c()}catch(t){dt.Deferred.exceptionHook&&dt.Deferred.exceptionHook(t,p.stackTrace),e+1>=r&&(n!==h&&(l=void 0,u=[t]),i.rejectWith(l,u))}};e?p():(dt.Deferred.getStackHook&&(p.stackTrace=dt.Deferred.getStackHook()),t.setTimeout(p))}}var r=0;return dt.Deferred(function(t){i[0][3].add(o(0,t,dt.isFunction(s)?s:a,t.notifyWith)),i[1][3].add(o(0,t,dt.isFunction(e)?e:a)),i[2][3].add(o(0,t,dt.isFunction(n)?n:h))}).promise()},promise:function(t){return null!=t?dt.extend(t,s):s}},o={};return dt.each(i,function(t,e){var r=e[2],a=e[5];s[e[1]]=r.add,a&&r.add(function(){n=a},i[3-t][2].disable,i[0][2].lock),r.add(e[3].fire),o[e[0]]=function(){return o[e[0]+"With"](this===o?void 0:this,arguments),this},o[e[0]+"With"]=r.fireWith}),s.promise(o),e&&e.call(o,o),o},when:function(t){var e=arguments.length,i=e,n=Array(i),s=nt.call(arguments),o=dt.Deferred(),r=function(t){return function(i){n[t]=this,s[t]=arguments.length>1?nt.call(arguments):i,--e||o.resolveWith(n,s)}};if(e<=1&&(l(t,o.done(r(i)).resolve,o.reject),"pending"===o.state()||dt.isFunction(s[i]&&s[i].then)))return o.then();for(;i--;)l(s[i],r(i),o.reject);return o.promise()}});var qt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;dt.Deferred.exceptionHook=function(e,i){t.console&&t.console.warn&&e&&qt.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,i)},dt.readyException=function(e){t.setTimeout(function(){throw e})};var Mt=dt.Deferred();dt.fn.ready=function(t){return Mt.then(t).catch(function(t){dt.readyException(t)}),this},dt.extend({isReady:!1,readyWait:1,holdReady:function(t){t?dt.readyWait++:dt.ready(!0)},ready:function(t){(t===!0?--dt.readyWait:dt.isReady)||(dt.isReady=!0,t!==!0&&--dt.readyWait>0||Mt.resolveWith(et,[dt]))}}),dt.ready.then=Mt.then,"complete"===et.readyState||"loading"!==et.readyState&&!et.documentElement.doScroll?t.setTimeout(dt.ready):(et.addEventListener("DOMContentLoaded",u),t.addEventListener("load",u));var Ft=function(t,e,i,n,s,o,r){var a=0,h=t.length,l=null==i;if("object"===dt.type(i)){s=!0;for(a in i)Ft(t,e,a,i[a],!0,o,r)}else if(void 0!==n&&(s=!0,
dt.isFunction(n)||(r=!0),l&&(r?(e.call(t,n),e=null):(l=e,e=function(t,e,i){return l.call(dt(t),i)})),e))for(;a<h;a++)e(t[a],i,r?n:n.call(t[a],a,e(t[a],i)));return s?t:l?e.call(t):h?e(t[0],i):o},jt=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};c.uid=1,c.prototype={cache:function(t){var e=t[this.expando];return e||(e={},jt(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,s=this.cache(t);if("string"==typeof e)s[dt.camelCase(e)]=i;else for(n in e)s[dt.camelCase(n)]=e[n];return s},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][dt.camelCase(e)]},access:function(t,e,i){return void 0===e||e&&"string"==typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n=t[this.expando];if(void 0!==n){if(void 0!==e){dt.isArray(e)?e=e.map(dt.camelCase):(e=dt.camelCase(e),e=e in n?[e]:e.match(Ct)||[]),i=e.length;for(;i--;)delete n[e[i]]}(void 0===e||dt.isEmptyObject(n))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!dt.isEmptyObject(e)}};var Rt=new c,Nt=new c,Dt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Lt=/[A-Z]/g;dt.extend({hasData:function(t){return Nt.hasData(t)||Rt.hasData(t)},data:function(t,e,i){return Nt.access(t,e,i)},removeData:function(t,e){Nt.remove(t,e)},_data:function(t,e,i){return Rt.access(t,e,i)},_removeData:function(t,e){Rt.remove(t,e)}}),dt.fn.extend({data:function(t,e){var i,n,s,o=this[0],r=o&&o.attributes;if(void 0===t){if(this.length&&(s=Nt.get(o),1===o.nodeType&&!Rt.get(o,"hasDataAttrs"))){for(i=r.length;i--;)r[i]&&(n=r[i].name,0===n.indexOf("data-")&&(n=dt.camelCase(n.slice(5)),f(o,n,s[n])));Rt.set(o,"hasDataAttrs",!0)}return s}return"object"==typeof t?this.each(function(){Nt.set(this,t)}):Ft(this,function(e){var i;if(o&&void 0===e){if(i=Nt.get(o,t),void 0!==i)return i;if(i=f(o,t),void 0!==i)return i}else this.each(function(){Nt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Nt.remove(this,t)})}}),dt.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=Rt.get(t,e),i&&(!n||dt.isArray(i)?n=Rt.access(t,e,dt.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=dt.queue(t,e),n=i.length,s=i.shift(),o=dt._queueHooks(t,e),r=function(){dt.dequeue(t,e)};"inprogress"===s&&(s=i.shift(),n--),s&&("fx"===e&&i.unshift("inprogress"),delete o.stop,s.call(t,r,o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return Rt.get(t,i)||Rt.access(t,i,{empty:dt.Callbacks("once memory").add(function(){Rt.remove(t,[e+"queue",i])})})}}),dt.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?dt.queue(this[0],t):void 0===e?this:this.each(function(){var i=dt.queue(this,t,e);dt._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&dt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){dt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,s=dt.Deferred(),o=this,r=this.length,a=function(){--n||s.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";r--;)i=Rt.get(o[r],t+"queueHooks"),i&&i.empty&&(n++,i.empty.add(a));return a(),s.promise(e)}});var Bt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,It=new RegExp("^(?:([+-])=|)("+Bt+")([a-z%]*)$","i"),Vt=["Top","Right","Bottom","Left"],Wt=function(t,e){return t=e||t,"none"===t.style.display||""===t.style.display&&dt.contains(t.ownerDocument,t)&&"none"===dt.css(t,"display")},Ht=function(t,e,i,n){var s,o,r={};for(o in e)r[o]=t.style[o],t.style[o]=e[o];s=i.apply(t,n||[]);for(o in e)t.style[o]=r[o];return s},zt={};dt.fn.extend({show:function(){return m(this,!0)},hide:function(){return m(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Wt(this)?dt(this).show():dt(this).hide()})}});var Ut=/^(?:checkbox|radio)$/i,Gt=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,$t=/^$|\/(?:java|ecma)script/i,Xt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Xt.optgroup=Xt.option,Xt.tbody=Xt.tfoot=Xt.colgroup=Xt.caption=Xt.thead,Xt.th=Xt.td;var Qt=/<|&#?\w+;/;!function(){var t=et.createDocumentFragment(),e=t.appendChild(et.createElement("div")),i=et.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),e.appendChild(i),pt.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",pt.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Yt=et.documentElement,Zt=/^key/,Jt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Kt=/^([^.]*)(?:\.(.+)|)/;dt.event={global:{},add:function(t,e,i,n,s){var o,r,a,h,l,u,c,p,f,d,y,m=Rt.get(t);if(m)for(i.handler&&(o=i,i=o.handler,s=o.selector),s&&dt.find.matchesSelector(Yt,s),i.guid||(i.guid=dt.guid++),(h=m.events)||(h=m.events={}),(r=m.handle)||(r=m.handle=function(e){return"undefined"!=typeof dt&&dt.event.triggered!==e.type?dt.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(Ct)||[""],l=e.length;l--;)a=Kt.exec(e[l])||[],f=y=a[1],d=(a[2]||"").split(".").sort(),f&&(c=dt.event.special[f]||{},f=(s?c.delegateType:c.bindType)||f,c=dt.event.special[f]||{},u=dt.extend({type:f,origType:y,data:n,handler:i,guid:i.guid,selector:s,needsContext:s&&dt.expr.match.needsContext.test(s),namespace:d.join(".")},o),(p=h[f])||(p=h[f]=[],p.delegateCount=0,c.setup&&c.setup.call(t,n,d,r)!==!1||t.addEventListener&&t.addEventListener(f,r)),c.add&&(c.add.call(t,u),u.handler.guid||(u.handler.guid=i.guid)),s?p.splice(p.delegateCount++,0,u):p.push(u),dt.event.global[f]=!0)},remove:function(t,e,i,n,s){var o,r,a,h,l,u,c,p,f,d,y,m=Rt.hasData(t)&&Rt.get(t);if(m&&(h=m.events)){for(e=(e||"").match(Ct)||[""],l=e.length;l--;)if(a=Kt.exec(e[l])||[],f=y=a[1],d=(a[2]||"").split(".").sort(),f){for(c=dt.event.special[f]||{},f=(n?c.delegateType:c.bindType)||f,p=h[f]||[],a=a[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=o=p.length;o--;)u=p[o],!s&&y!==u.origType||i&&i.guid!==u.guid||a&&!a.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(p.splice(o,1),u.selector&&p.delegateCount--,c.remove&&c.remove.call(t,u));r&&!p.length&&(c.teardown&&c.teardown.call(t,d,m.handle)!==!1||dt.removeEvent(t,f,m.handle),delete h[f])}else for(f in h)dt.event.remove(t,f+e[l],i,n,!0);dt.isEmptyObject(h)&&Rt.remove(t,"handle events")}},dispatch:function(t){var e,i,n,s,o,r,a=dt.event.fix(t),h=new Array(arguments.length),l=(Rt.get(this,"events")||{})[a.type]||[],u=dt.event.special[a.type]||{};for(h[0]=a,e=1;e<arguments.length;e++)h[e]=arguments[e];if(a.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,a)!==!1){for(r=dt.event.handlers.call(this,a,l),e=0;(s=r[e++])&&!a.isPropagationStopped();)for(a.currentTarget=s.elem,i=0;(o=s.handlers[i++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(o.namespace)||(a.handleObj=o,a.data=o.data,n=((dt.event.special[o.origType]||{}).handle||o.handler).apply(s.elem,h),void 0!==n&&(a.result=n)===!1&&(a.preventDefault(),a.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,a),a.result}},handlers:function(t,e){var i,n,s,o,r,a=[],h=e.delegateCount,l=t.target;if(h&&l.nodeType&&!("click"===t.type&&t.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||l.disabled!==!0)){for(o=[],r={},i=0;i<h;i++)n=e[i],s=n.selector+" ",void 0===r[s]&&(r[s]=n.needsContext?dt(s,this).index(l)>-1:dt.find(s,this,null,[l]).length),r[s]&&o.push(n);o.length&&a.push({elem:l,handlers:o})}return l=this,h<e.length&&a.push({elem:l,handlers:e.slice(h)}),a},addProp:function(t,e){Object.defineProperty(dt.Event.prototype,t,{enumerable:!0,configurable:!0,get:dt.isFunction(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[dt.expando]?t:new dt.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==w()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===w()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&dt.nodeName(this,"input"))return this.click(),!1},_default:function(t){return dt.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},dt.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},dt.Event=function(t,e){return this instanceof dt.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?x:b,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&dt.extend(this,e),this.timeStamp=t&&t.timeStamp||dt.now(),void(this[dt.expando]=!0)):new dt.Event(t,e)},dt.Event.prototype={constructor:dt.Event,isDefaultPrevented:b,isPropagationStopped:b,isImmediatePropagationStopped:b,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=x,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=x,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=x,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},dt.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&Zt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&Jt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},dt.event.addProp),dt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){dt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,s=t.relatedTarget,o=t.handleObj;return s&&(s===n||dt.contains(n,s))||(t.type=o.origType,i=o.handler.apply(this,arguments),t.type=e),i}}}),dt.fn.extend({on:function(t,e,i,n){return T(this,t,e,i,n)},one:function(t,e,i,n){return T(this,t,e,i,n,1)},off:function(t,e,i){var n,s;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,dt(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(s in t)this.off(s,e,t[s]);return this}return e!==!1&&"function"!=typeof e||(i=e,e=void 0),i===!1&&(i=b),this.each(function(){dt.event.remove(this,t,i,e)})}});var te=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ee=/<script|<style|<link/i,ie=/checked\s*(?:[^=]|=\s*.checked.)/i,ne=/^true\/(.*)/,se=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;dt.extend({htmlPrefilter:function(t){return t.replace(te,"<$1></$2>")},clone:function(t,e,i){var n,s,o,r,a=t.cloneNode(!0),h=dt.contains(t.ownerDocument,t);if(!(pt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||dt.isXMLDoc(t)))for(r=v(a),o=v(t),n=0,s=o.length;n<s;n++)E(o[n],r[n]);if(e)if(i)for(o=o||v(t),r=r||v(a),n=0,s=o.length;n<s;n++)P(o[n],r[n]);else P(t,a);return r=v(a,"script"),r.length>0&&g(r,!h&&v(t,"script")),a},cleanData:function(t){for(var e,i,n,s=dt.event.special,o=0;void 0!==(i=t[o]);o++)if(jt(i)){if(e=i[Rt.expando]){if(e.events)for(n in e.events)s[n]?dt.event.remove(i,n):dt.removeEvent(i,n,e.handle);i[Rt.expando]=void 0}i[Nt.expando]&&(i[Nt.expando]=void 0)}}}),dt.fn.extend({detach:function(t){return C(this,t,!0)},remove:function(t){return C(this,t)},text:function(t){return Ft(this,function(t){return void 0===t?dt.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return A(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=S(this,t);e.appendChild(t)}})},prepend:function(){return A(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=S(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return A(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return A(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(dt.cleanData(v(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return dt.clone(this,t,e)})},html:function(t){return Ft(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!ee.test(t)&&!Xt[(Gt.exec(t)||["",""])[1].toLowerCase()]){t=dt.htmlPrefilter(t);try{for(;i<n;i++)e=this[i]||{},1===e.nodeType&&(dt.cleanData(v(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return A(this,arguments,function(e){var i=this.parentNode;dt.inArray(this,t)<0&&(dt.cleanData(v(this)),i&&i.replaceChild(e,this))},t)}}),dt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){dt.fn[t]=function(t){for(var i,n=[],s=dt(t),o=s.length-1,r=0;r<=o;r++)i=r===o?this:this.clone(!0),dt(s[r])[e](i),ot.apply(n,i.get());return this.pushStack(n)}});var oe=/^margin/,re=new RegExp("^("+Bt+")(?!px)[a-z%]+$","i"),ae=function(e){var i=e.ownerDocument.defaultView;return i&&i.opener||(i=t),i.getComputedStyle(e)};!function(){function e(){if(a){a.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",Yt.appendChild(r);var e=t.getComputedStyle(a);i="1%"!==e.top,o="2px"===e.marginLeft,n="4px"===e.width,a.style.marginRight="50%",s="4px"===e.marginRight,Yt.removeChild(r),a=null}}var i,n,s,o,r=et.createElement("div"),a=et.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",pt.clearCloneStyle="content-box"===a.style.backgroundClip,r.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",r.appendChild(a),dt.extend(pt,{pixelPosition:function(){return e(),i},boxSizingReliable:function(){return e(),n},pixelMarginRight:function(){return e(),s},reliableMarginLeft:function(){return e(),o}}))}();var he=/^(none|table(?!-c[ea]).+)/,le={position:"absolute",visibility:"hidden",display:"block"},ue={letterSpacing:"0",fontWeight:"400"},ce=["Webkit","Moz","ms"],pe=et.createElement("div").style;dt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=q(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,o,r,a=dt.camelCase(e),h=t.style;return e=dt.cssProps[a]||(dt.cssProps[a]=F(a)||a),r=dt.cssHooks[e]||dt.cssHooks[a],void 0===i?r&&"get"in r&&void 0!==(s=r.get(t,!1,n))?s:h[e]:(o=typeof i,"string"===o&&(s=It.exec(i))&&s[1]&&(i=d(t,e,s),o="number"),null!=i&&i===i&&("number"===o&&(i+=s&&s[3]||(dt.cssNumber[a]?"":"px")),pt.clearCloneStyle||""!==i||0!==e.indexOf("background")||(h[e]="inherit"),r&&"set"in r&&void 0===(i=r.set(t,i,n))||(h[e]=i)),void 0)}},css:function(t,e,i,n){var s,o,r,a=dt.camelCase(e);return e=dt.cssProps[a]||(dt.cssProps[a]=F(a)||a),r=dt.cssHooks[e]||dt.cssHooks[a],r&&"get"in r&&(s=r.get(t,!0,i)),void 0===s&&(s=q(t,e,n)),"normal"===s&&e in ue&&(s=ue[e]),""===i||i?(o=parseFloat(s),i===!0||isFinite(o)?o||0:s):s}}),dt.each(["height","width"],function(t,e){dt.cssHooks[e]={get:function(t,i,n){if(i)return!he.test(dt.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?N(t,e,n):Ht(t,le,function(){return N(t,e,n)})},set:function(t,i,n){var s,o=n&&ae(t),r=n&&R(t,e,n,"border-box"===dt.css(t,"boxSizing",!1,o),o);return r&&(s=It.exec(i))&&"px"!==(s[3]||"px")&&(t.style[e]=i,i=dt.css(t,e)),j(t,i,r)}}}),dt.cssHooks.marginLeft=M(pt.reliableMarginLeft,function(t,e){if(e)return(parseFloat(q(t,"marginLeft"))||t.getBoundingClientRect().left-Ht(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),dt.each({margin:"",padding:"",border:"Width"},function(t,e){dt.cssHooks[t+e]={expand:function(i){for(var n=0,s={},o="string"==typeof i?i.split(" "):[i];n<4;n++)s[t+Vt[n]+e]=o[n]||o[n-2]||o[0];return s}},oe.test(t)||(dt.cssHooks[t+e].set=j)}),dt.fn.extend({css:function(t,e){return Ft(this,function(t,e,i){var n,s,o={},r=0;if(dt.isArray(e)){for(n=ae(t),s=e.length;r<s;r++)o[e[r]]=dt.css(t,e[r],!1,n);return o}return void 0!==i?dt.style(t,e,i):dt.css(t,e)},t,e,arguments.length>1)}}),dt.Tween=D,D.prototype={constructor:D,init:function(t,e,i,n,s,o){this.elem=t,this.prop=i,this.easing=s||dt.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(dt.cssNumber[i]?"":"px")},cur:function(){var t=D.propHooks[this.prop];return t&&t.get?t.get(this):D.propHooks._default.get(this)},run:function(t){var e,i=D.propHooks[this.prop];return this.options.duration?this.pos=e=dt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):D.propHooks._default.set(this),this}},D.prototype.init.prototype=D.prototype,D.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=dt.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){dt.fx.step[t.prop]?dt.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[dt.cssProps[t.prop]]&&!dt.cssHooks[t.prop]?t.elem[t.prop]=t.now:dt.style(t.elem,t.prop,t.now+t.unit)}}},D.propHooks.scrollTop=D.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},dt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},dt.fx=D.prototype.init,dt.fx.step={};var fe,de,ye=/^(?:toggle|show|hide)$/,me=/queueHooks$/;dt.Animation=dt.extend(z,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return d(i.elem,t,It.exec(e),i),i}]},tweener:function(t,e){dt.isFunction(t)?(e=t,t=["*"]):t=t.match(Ct);for(var i,n=0,s=t.length;n<s;n++)i=t[n],z.tweeners[i]=z.tweeners[i]||[],z.tweeners[i].unshift(e)},prefilters:[W],prefilter:function(t,e){e?z.prefilters.unshift(t):z.prefilters.push(t)}}),dt.speed=function(t,e,i){var n=t&&"object"==typeof t?dt.extend({},t):{complete:i||!i&&e||dt.isFunction(t)&&t,duration:t,easing:i&&e||e&&!dt.isFunction(e)&&e};return dt.fx.off||et.hidden?n.duration=0:"number"!=typeof n.duration&&(n.duration in dt.fx.speeds?n.duration=dt.fx.speeds[n.duration]:n.duration=dt.fx.speeds._default),null!=n.queue&&n.queue!==!0||(n.queue="fx"),n.old=n.complete,n.complete=function(){dt.isFunction(n.old)&&n.old.call(this),n.queue&&dt.dequeue(this,n.queue)},n},dt.fn.extend({fadeTo:function(t,e,i,n){return this.filter(Wt).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var s=dt.isEmptyObject(t),o=dt.speed(e,i,n),r=function(){var e=z(this,dt.extend({},t),o);(s||Rt.get(this,"finish"))&&e.stop(!0)};return r.finish=r,s||o.queue===!1?this.each(r):this.queue(o.queue,r)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,s=null!=t&&t+"queueHooks",o=dt.timers,r=Rt.get(this);if(s)r[s]&&r[s].stop&&n(r[s]);else for(s in r)r[s]&&r[s].stop&&me.test(s)&&n(r[s]);for(s=o.length;s--;)o[s].elem!==this||null!=t&&o[s].queue!==t||(o[s].anim.stop(i),e=!1,o.splice(s,1));!e&&i||dt.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,i=Rt.get(this),n=i[t+"queue"],s=i[t+"queueHooks"],o=dt.timers,r=n?n.length:0;for(i.finish=!0,dt.queue(this,t,[]),s&&s.stop&&s.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<r;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),dt.each(["toggle","show","hide"],function(t,e){var i=dt.fn[e];dt.fn[e]=function(t,n,s){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(I(e,!0),t,n,s)}}),dt.each({slideDown:I("show"),slideUp:I("hide"),slideToggle:I("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){dt.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),dt.timers=[],dt.fx.tick=function(){var t,e=0,i=dt.timers;for(fe=dt.now();e<i.length;e++)t=i[e],t()||i[e]!==t||i.splice(e--,1);i.length||dt.fx.stop(),fe=void 0},dt.fx.timer=function(t){dt.timers.push(t),t()?dt.fx.start():dt.timers.pop()},dt.fx.interval=13,dt.fx.start=function(){de||(de=t.requestAnimationFrame?t.requestAnimationFrame(L):t.setInterval(dt.fx.tick,dt.fx.interval))},dt.fx.stop=function(){t.cancelAnimationFrame?t.cancelAnimationFrame(de):t.clearInterval(de),de=null},dt.fx.speeds={slow:600,fast:200,_default:400},dt.fn.delay=function(e,i){return e=dt.fx?dt.fx.speeds[e]||e:e,i=i||"fx",this.queue(i,function(i,n){var s=t.setTimeout(i,e);n.stop=function(){t.clearTimeout(s)}})},function(){var t=et.createElement("input"),e=et.createElement("select"),i=e.appendChild(et.createElement("option"));t.type="checkbox",pt.checkOn=""!==t.value,pt.optSelected=i.selected,t=et.createElement("input"),t.value="t",t.type="radio",pt.radioValue="t"===t.value}();var ve,ge=dt.expr.attrHandle;dt.fn.extend({attr:function(t,e){return Ft(this,dt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){dt.removeAttr(this,t)})}}),dt.extend({attr:function(t,e,i){var n,s,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof t.getAttribute?dt.prop(t,e,i):(1===o&&dt.isXMLDoc(t)||(s=dt.attrHooks[e.toLowerCase()]||(dt.expr.match.bool.test(e)?ve:void 0)),void 0!==i?null===i?void dt.removeAttr(t,e):s&&"set"in s&&void 0!==(n=s.set(t,i,e))?n:(t.setAttribute(e,i+""),i):s&&"get"in s&&null!==(n=s.get(t,e))?n:(n=dt.find.attr(t,e),null==n?void 0:n))},attrHooks:{type:{set:function(t,e){if(!pt.radioValue&&"radio"===e&&dt.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n=0,s=e&&e.match(Ct);if(s&&1===t.nodeType)for(;i=s[n++];)t.removeAttribute(i)}}),ve={set:function(t,e,i){return e===!1?dt.removeAttr(t,i):t.setAttribute(i,i),i}},dt.each(dt.expr.match.bool.source.match(/\w+/g),function(t,e){var i=ge[e]||dt.find.attr;ge[e]=function(t,e,n){var s,o,r=e.toLowerCase();return n||(o=ge[r],ge[r]=s,s=null!=i(t,e,n)?r:null,ge[r]=o),s}});var _e=/^(?:input|select|textarea|button)$/i,xe=/^(?:a|area)$/i;dt.fn.extend({prop:function(t,e){return Ft(this,dt.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[dt.propFix[t]||t]})}}),dt.extend({prop:function(t,e,i){var n,s,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&dt.isXMLDoc(t)||(e=dt.propFix[e]||e,s=dt.propHooks[e]),void 0!==i?s&&"set"in s&&void 0!==(n=s.set(t,i,e))?n:t[e]=i:s&&"get"in s&&null!==(n=s.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=dt.find.attr(t,"tabindex");return e?parseInt(e,10):_e.test(t.nodeName)||xe.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),pt.optSelected||(dt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),dt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){dt.propFix[this.toLowerCase()]=this}),dt.fn.extend({addClass:function(t){var e,i,n,s,o,r,a,h=0;if(dt.isFunction(t))return this.each(function(e){dt(this).addClass(t.call(this,e,G(this)))});if("string"==typeof t&&t)for(e=t.match(Ct)||[];i=this[h++];)if(s=G(i),n=1===i.nodeType&&" "+U(s)+" "){for(r=0;o=e[r++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");a=U(n),s!==a&&i.setAttribute("class",a)}return this},removeClass:function(t){var e,i,n,s,o,r,a,h=0;if(dt.isFunction(t))return this.each(function(e){dt(this).removeClass(t.call(this,e,G(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(Ct)||[];i=this[h++];)if(s=G(i),n=1===i.nodeType&&" "+U(s)+" "){for(r=0;o=e[r++];)for(;n.indexOf(" "+o+" ")>-1;)n=n.replace(" "+o+" "," ");a=U(n),s!==a&&i.setAttribute("class",a)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):dt.isFunction(t)?this.each(function(i){dt(this).toggleClass(t.call(this,i,G(this),e),e)}):this.each(function(){var e,n,s,o;if("string"===i)for(n=0,s=dt(this),o=t.match(Ct)||[];e=o[n++];)s.hasClass(e)?s.removeClass(e):s.addClass(e);else void 0!==t&&"boolean"!==i||(e=G(this),e&&Rt.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||t===!1?"":Rt.get(this,"__className__")||""))})},hasClass:function(t){var e,i,n=0;for(e=" "+t+" ";i=this[n++];)if(1===i.nodeType&&(" "+U(G(i))+" ").indexOf(e)>-1)return!0;return!1}});var be=/\r/g;dt.fn.extend({val:function(t){var e,i,n,s=this[0];{if(arguments.length)return n=dt.isFunction(t),this.each(function(i){var s;1===this.nodeType&&(s=n?t.call(this,i,dt(this).val()):t,null==s?s="":"number"==typeof s?s+="":dt.isArray(s)&&(s=dt.map(s,function(t){return null==t?"":t+""})),e=dt.valHooks[this.type]||dt.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,s,"value")||(this.value=s))});if(s)return e=dt.valHooks[s.type]||dt.valHooks[s.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(i=e.get(s,"value"))?i:(i=s.value,"string"==typeof i?i.replace(be,""):null==i?"":i)}}}),dt.extend({valHooks:{option:{get:function(t){var e=dt.find.attr(t,"value");return null!=e?e:U(dt.text(t))}},select:{get:function(t){var e,i,n,s=t.options,o=t.selectedIndex,r="select-one"===t.type,a=r?null:[],h=r?o+1:s.length;for(n=o<0?h:r?o:0;n<h;n++)if(i=s[n],(i.selected||n===o)&&!i.disabled&&(!i.parentNode.disabled||!dt.nodeName(i.parentNode,"optgroup"))){if(e=dt(i).val(),r)return e;a.push(e)}return a},set:function(t,e){for(var i,n,s=t.options,o=dt.makeArray(e),r=s.length;r--;)n=s[r],(n.selected=dt.inArray(dt.valHooks.option.get(n),o)>-1)&&(i=!0);return i||(t.selectedIndex=-1),o}}}}),dt.each(["radio","checkbox"],function(){dt.valHooks[this]={set:function(t,e){if(dt.isArray(e))return t.checked=dt.inArray(dt(t).val(),e)>-1}},pt.checkOn||(dt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var we=/^(?:focusinfocus|focusoutblur)$/;dt.extend(dt.event,{trigger:function(e,i,n,s){var o,r,a,h,l,u,c,p=[n||et],f=lt.call(e,"type")?e.type:e,d=lt.call(e,"namespace")?e.namespace.split("."):[];if(r=a=n=n||et,3!==n.nodeType&&8!==n.nodeType&&!we.test(f+dt.event.triggered)&&(f.indexOf(".")>-1&&(d=f.split("."),f=d.shift(),d.sort()),l=f.indexOf(":")<0&&"on"+f,e=e[dt.expando]?e:new dt.Event(f,"object"==typeof e&&e),e.isTrigger=s?2:3,e.namespace=d.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:dt.makeArray(i,[e]),c=dt.event.special[f]||{},s||!c.trigger||c.trigger.apply(n,i)!==!1)){if(!s&&!c.noBubble&&!dt.isWindow(n)){for(h=c.delegateType||f,we.test(h+f)||(r=r.parentNode);r;r=r.parentNode)p.push(r),a=r;a===(n.ownerDocument||et)&&p.push(a.defaultView||a.parentWindow||t)}for(o=0;(r=p[o++])&&!e.isPropagationStopped();)e.type=o>1?h:c.bindType||f,u=(Rt.get(r,"events")||{})[e.type]&&Rt.get(r,"handle"),u&&u.apply(r,i),u=l&&r[l],u&&u.apply&&jt(r)&&(e.result=u.apply(r,i),e.result===!1&&e.preventDefault());return e.type=f,s||e.isDefaultPrevented()||c._default&&c._default.apply(p.pop(),i)!==!1||!jt(n)||l&&dt.isFunction(n[f])&&!dt.isWindow(n)&&(a=n[l],a&&(n[l]=null),dt.event.triggered=f,n[f](),dt.event.triggered=void 0,a&&(n[l]=a)),e.result}},simulate:function(t,e,i){var n=dt.extend(new dt.Event,i,{type:t,isSimulated:!0});dt.event.trigger(n,null,e)}}),dt.fn.extend({trigger:function(t,e){return this.each(function(){dt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];if(i)return dt.event.trigger(t,e,i,!0)}}),dt.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){dt.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),dt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),pt.focusin="onfocusin"in t,pt.focusin||dt.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){dt.event.simulate(e,t.target,dt.event.fix(t))};dt.event.special[e]={setup:function(){var n=this.ownerDocument||this,s=Rt.access(n,e);s||n.addEventListener(t,i,!0),Rt.access(n,e,(s||0)+1)},teardown:function(){var n=this.ownerDocument||this,s=Rt.access(n,e)-1;s?Rt.access(n,e,s):(n.removeEventListener(t,i,!0),Rt.remove(n,e))}}});var Te=t.location,Se=dt.now(),ke=/\?/;dt.parseXML=function(e){var i;if(!e||"string"!=typeof e)return null;try{i=(new t.DOMParser).parseFromString(e,"text/xml")}catch(t){i=void 0}return i&&!i.getElementsByTagName("parsererror").length||dt.error("Invalid XML: "+e),i};var Oe=/\[\]$/,Pe=/\r?\n/g,Ee=/^(?:submit|button|image|reset|file)$/i,Ae=/^(?:input|select|textarea|keygen)/i;dt.param=function(t,e){var i,n=[],s=function(t,e){var i=dt.isFunction(e)?e():e;n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==i?"":i)};if(dt.isArray(t)||t.jquery&&!dt.isPlainObject(t))dt.each(t,function(){s(this.name,this.value)});else for(i in t)$(i,t[i],e,s);return n.join("&")},dt.fn.extend({serialize:function(){return dt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=dt.prop(this,"elements");return t?dt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!dt(this).is(":disabled")&&Ae.test(this.nodeName)&&!Ee.test(t)&&(this.checked||!Ut.test(t))}).map(function(t,e){var i=dt(this).val();return null==i?null:dt.isArray(i)?dt.map(i,function(t){return{name:e.name,value:t.replace(Pe,"\r\n")}}):{name:e.name,value:i.replace(Pe,"\r\n")}}).get()}});var Ce=/%20/g,qe=/#.*$/,Me=/([?&])_=[^&]*/,Fe=/^(.*?):[ \t]*([^\r\n]*)$/gm,je=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Re=/^(?:GET|HEAD)$/,Ne=/^\/\//,De={},Le={},Be="*/".concat("*"),Ie=et.createElement("a");Ie.href=Te.href,dt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Te.href,type:"GET",isLocal:je.test(Te.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Be,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":dt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){
return e?Y(Y(t,dt.ajaxSettings),e):Y(dt.ajaxSettings,t)},ajaxPrefilter:X(De),ajaxTransport:X(Le),ajax:function(e,i){function n(e,i,n,a){var l,p,f,x,b,w=i;u||(u=!0,h&&t.clearTimeout(h),s=void 0,r=a||"",T.readyState=e>0?4:0,l=e>=200&&e<300||304===e,n&&(x=Z(d,T,n)),x=J(d,x,T,l),l?(d.ifModified&&(b=T.getResponseHeader("Last-Modified"),b&&(dt.lastModified[o]=b),b=T.getResponseHeader("etag"),b&&(dt.etag[o]=b)),204===e||"HEAD"===d.type?w="nocontent":304===e?w="notmodified":(w=x.state,p=x.data,f=x.error,l=!f)):(f=w,!e&&w||(w="error",e<0&&(e=0))),T.status=e,T.statusText=(i||w)+"",l?v.resolveWith(y,[p,w,T]):v.rejectWith(y,[T,w,f]),T.statusCode(_),_=void 0,c&&m.trigger(l?"ajaxSuccess":"ajaxError",[T,d,l?p:f]),g.fireWith(y,[T,w]),c&&(m.trigger("ajaxComplete",[T,d]),--dt.active||dt.event.trigger("ajaxStop")))}"object"==typeof e&&(i=e,e=void 0),i=i||{};var s,o,r,a,h,l,u,c,p,f,d=dt.ajaxSetup({},i),y=d.context||d,m=d.context&&(y.nodeType||y.jquery)?dt(y):dt.event,v=dt.Deferred(),g=dt.Callbacks("once memory"),_=d.statusCode||{},x={},b={},w="canceled",T={readyState:0,getResponseHeader:function(t){var e;if(u){if(!a)for(a={};e=Fe.exec(r);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return u?r:null},setRequestHeader:function(t,e){return null==u&&(t=b[t.toLowerCase()]=b[t.toLowerCase()]||t,x[t]=e),this},overrideMimeType:function(t){return null==u&&(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(u)T.always(t[T.status]);else for(e in t)_[e]=[_[e],t[e]];return this},abort:function(t){var e=t||w;return s&&s.abort(e),n(0,e),this}};if(v.promise(T),d.url=((e||d.url||Te.href)+"").replace(Ne,Te.protocol+"//"),d.type=i.method||i.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(Ct)||[""],null==d.crossDomain){l=et.createElement("a");try{l.href=d.url,l.href=l.href,d.crossDomain=Ie.protocol+"//"+Ie.host!=l.protocol+"//"+l.host}catch(t){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=dt.param(d.data,d.traditional)),Q(De,d,i,T),u)return T;c=dt.event&&d.global,c&&0===dt.active++&&dt.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Re.test(d.type),o=d.url.replace(qe,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(Ce,"+")):(f=d.url.slice(o.length),d.data&&(o+=(ke.test(o)?"&":"?")+d.data,delete d.data),d.cache===!1&&(o=o.replace(Me,"$1"),f=(ke.test(o)?"&":"?")+"_="+Se++ +f),d.url=o+f),d.ifModified&&(dt.lastModified[o]&&T.setRequestHeader("If-Modified-Since",dt.lastModified[o]),dt.etag[o]&&T.setRequestHeader("If-None-Match",dt.etag[o])),(d.data&&d.hasContent&&d.contentType!==!1||i.contentType)&&T.setRequestHeader("Content-Type",d.contentType),T.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Be+"; q=0.01":""):d.accepts["*"]);for(p in d.headers)T.setRequestHeader(p,d.headers[p]);if(d.beforeSend&&(d.beforeSend.call(y,T,d)===!1||u))return T.abort();if(w="abort",g.add(d.complete),T.done(d.success),T.fail(d.error),s=Q(Le,d,i,T)){if(T.readyState=1,c&&m.trigger("ajaxSend",[T,d]),u)return T;d.async&&d.timeout>0&&(h=t.setTimeout(function(){T.abort("timeout")},d.timeout));try{u=!1,s.send(x,n)}catch(t){if(u)throw t;n(-1,t)}}else n(-1,"No Transport");return T},getJSON:function(t,e,i){return dt.get(t,e,i,"json")},getScript:function(t,e){return dt.get(t,void 0,e,"script")}}),dt.each(["get","post"],function(t,e){dt[e]=function(t,i,n,s){return dt.isFunction(i)&&(s=s||n,n=i,i=void 0),dt.ajax(dt.extend({url:t,type:e,dataType:s,data:i,success:n},dt.isPlainObject(t)&&t))}}),dt._evalUrl=function(t){return dt.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},dt.fn.extend({wrapAll:function(t){var e;return this[0]&&(dt.isFunction(t)&&(t=t.call(this[0])),e=dt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return dt.isFunction(t)?this.each(function(e){dt(this).wrapInner(t.call(this,e))}):this.each(function(){var e=dt(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=dt.isFunction(t);return this.each(function(i){dt(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){dt(this).replaceWith(this.childNodes)}),this}}),dt.expr.pseudos.hidden=function(t){return!dt.expr.pseudos.visible(t)},dt.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},dt.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(t){}};var Ve={0:200,1223:204},We=dt.ajaxSettings.xhr();pt.cors=!!We&&"withCredentials"in We,pt.ajax=We=!!We,dt.ajaxTransport(function(e){var i,n;if(pt.cors||We&&!e.crossDomain)return{send:function(s,o){var r,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)a[r]=e.xhrFields[r];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest");for(r in s)a.setRequestHeader(r,s[r]);i=function(t){return function(){i&&(i=n=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Ve[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=i(),n=a.onerror=i("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&t.setTimeout(function(){i&&n()})},i=i("abort");try{a.send(e.hasContent&&e.data||null)}catch(t){if(i)throw t}},abort:function(){i&&i()}}}),dt.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),dt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return dt.globalEval(t),t}}}),dt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),dt.ajaxTransport("script",function(t){if(t.crossDomain){var e,i;return{send:function(n,s){e=dt("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&s("error"===t.type?404:200,t.type)}),et.head.appendChild(e[0])},abort:function(){i&&i()}}}});var He=[],ze=/(=)\?(?=&|$)|\?\?/;dt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=He.pop()||dt.expando+"_"+Se++;return this[t]=!0,t}}),dt.ajaxPrefilter("json jsonp",function(e,i,n){var s,o,r,a=e.jsonp!==!1&&(ze.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&ze.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return s=e.jsonpCallback=dt.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(ze,"$1"+s):e.jsonp!==!1&&(e.url+=(ke.test(e.url)?"&":"?")+e.jsonp+"="+s),e.converters["script json"]=function(){return r||dt.error(s+" was not called"),r[0]},e.dataTypes[0]="json",o=t[s],t[s]=function(){r=arguments},n.always(function(){void 0===o?dt(t).removeProp(s):t[s]=o,e[s]&&(e.jsonpCallback=i.jsonpCallback,He.push(s)),r&&dt.isFunction(o)&&o(r[0]),r=o=void 0}),"script"}),pt.createHTMLDocument=function(){var t=et.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),dt.parseHTML=function(t,e,i){if("string"!=typeof t)return[];"boolean"==typeof e&&(i=e,e=!1);var n,s,o;return e||(pt.createHTMLDocument?(e=et.implementation.createHTMLDocument(""),n=e.createElement("base"),n.href=et.location.href,e.head.appendChild(n)):e=et),s=Tt.exec(t),o=!i&&[],s?[e.createElement(s[1])]:(s=_([t],e,o),o&&o.length&&dt(o).remove(),dt.merge([],s.childNodes))},dt.fn.load=function(t,e,i){var n,s,o,r=this,a=t.indexOf(" ");return a>-1&&(n=U(t.slice(a)),t=t.slice(0,a)),dt.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(s="POST"),r.length>0&&dt.ajax({url:t,type:s||"GET",dataType:"html",data:e}).done(function(t){o=arguments,r.html(n?dt("<div>").append(dt.parseHTML(t)).find(n):t)}).always(i&&function(t,e){r.each(function(){i.apply(this,o||[t.responseText,e,t])})}),this},dt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){dt.fn[e]=function(t){return this.on(e,t)}}),dt.expr.pseudos.animated=function(t){return dt.grep(dt.timers,function(e){return t===e.elem}).length},dt.offset={setOffset:function(t,e,i){var n,s,o,r,a,h,l,u=dt.css(t,"position"),c=dt(t),p={};"static"===u&&(t.style.position="relative"),a=c.offset(),o=dt.css(t,"top"),h=dt.css(t,"left"),l=("absolute"===u||"fixed"===u)&&(o+h).indexOf("auto")>-1,l?(n=c.position(),r=n.top,s=n.left):(r=parseFloat(o)||0,s=parseFloat(h)||0),dt.isFunction(e)&&(e=e.call(t,i,dt.extend({},a))),null!=e.top&&(p.top=e.top-a.top+r),null!=e.left&&(p.left=e.left-a.left+s),"using"in e?e.using.call(t,p):c.css(p)}},dt.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){dt.offset.setOffset(this,t,e)});var e,i,n,s,o=this[0];if(o)return o.getClientRects().length?(n=o.getBoundingClientRect(),n.width||n.height?(s=o.ownerDocument,i=K(s),e=s.documentElement,{top:n.top+i.pageYOffset-e.clientTop,left:n.left+i.pageXOffset-e.clientLeft}):n):{top:0,left:0}},position:function(){if(this[0]){var t,e,i=this[0],n={top:0,left:0};return"fixed"===dt.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),dt.nodeName(t[0],"html")||(n=t.offset()),n={top:n.top+dt.css(t[0],"borderTopWidth",!0),left:n.left+dt.css(t[0],"borderLeftWidth",!0)}),{top:e.top-n.top-dt.css(i,"marginTop",!0),left:e.left-n.left-dt.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===dt.css(t,"position");)t=t.offsetParent;return t||Yt})}}),dt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i="pageYOffset"===e;dt.fn[t]=function(n){return Ft(this,function(t,n,s){var o=K(t);return void 0===s?o?o[e]:t[n]:void(o?o.scrollTo(i?o.pageXOffset:s,i?s:o.pageYOffset):t[n]=s)},t,n,arguments.length)}}),dt.each(["top","left"],function(t,e){dt.cssHooks[e]=M(pt.pixelPosition,function(t,i){if(i)return i=q(t,e),re.test(i)?dt(t).position()[e]+"px":i})}),dt.each({Height:"height",Width:"width"},function(t,e){dt.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){dt.fn[n]=function(s,o){var r=arguments.length&&(i||"boolean"!=typeof s),a=i||(s===!0||o===!0?"margin":"border");return Ft(this,function(e,i,s){var o;return dt.isWindow(e)?0===n.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===s?dt.css(e,i,a):dt.style(e,i,s,a)},e,r?s:void 0,r)}})}),dt.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}}),dt.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return dt});var Ue=t.jQuery,Ge=t.$;return dt.noConflict=function(e){return t.$===dt&&(t.$=Ge),e&&t.jQuery===dt&&(t.jQuery=Ue),dt},e||(t.jQuery=t.$=dt),dt})},{}],4:[function(t,e,i){"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function s(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;var n=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"!==n.join(""))return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach(function(t){s[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},s)).join("")}catch(t){return!1}}var o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=s()?Object.assign:function(t,e){for(var i,s,h=n(t),l=1;l<arguments.length;l++){i=Object(arguments[l]);for(var u in i)r.call(i,u)&&(h[u]=i[u]);if(o){s=o(i);for(var c=0;c<s.length;c++)a.call(i,s[c])&&(h[s[c]]=i[s[c]])}}return h}},{}],5:[function(t,e,i){"use strict";function n(t){switch(t.arrayFormat){case"index":return function(e,i,n){return null===i?[o(e,t),"[",n,"]"].join(""):[o(e,t),"[",o(n,t),"]=",o(i,t)].join("")};case"bracket":return function(e,i){return null===i?o(e,t):[o(e,t),"[]=",o(i,t)].join("")};default:return function(e,i){return null===i?o(e,t):[o(e,t),"=",o(i,t)].join("")}}}function s(t){var e;switch(t.arrayFormat){case"index":return function(t,i,n){return e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===n[t]&&(n[t]={}),void(n[t][e[1]]=i)):void(n[t]=i)};case"bracket":return function(t,i,n){return e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e&&void 0!==n[t]?void(n[t]=[].concat(n[t],i)):void(n[t]=i)};default:return function(t,e,i){return void 0===i[t]?void(i[t]=e):void(i[t]=[].concat(i[t],e))}}}function o(t,e){return e.encode?e.strict?a(t):encodeURIComponent(t):t}function r(t){return Array.isArray(t)?t.sort():"object"==typeof t?r(Object.keys(t)).sort(function(t,e){return Number(t)-Number(e)}).map(function(e){return t[e]}):t}var a=t("strict-uri-encode"),h=t("object-assign");i.extract=function(t){return t.split("?")[1]||""},i.parse=function(t,e){e=h({arrayFormat:"none"},e);var i=s(e),n=Object.create(null);return"string"!=typeof t?n:(t=t.trim().replace(/^(\?|#|&)/,""))?(t.split("&").forEach(function(t){var e=t.replace(/\+/g," ").split("="),s=e.shift(),o=e.length>0?e.join("="):void 0;o=void 0===o?null:decodeURIComponent(o),i(decodeURIComponent(s),o,n)}),Object.keys(n).sort().reduce(function(t,e){var i=n[e];return Boolean(i)&&"object"==typeof i&&!Array.isArray(i)?t[e]=r(i):t[e]=i,t},Object.create(null))):n},i.stringify=function(t,e){var i={encode:!0,strict:!0,arrayFormat:"none"};e=h(i,e);var s=n(e);return t?Object.keys(t).sort().map(function(i){var n=t[i];if(void 0===n)return"";if(null===n)return o(i,e);if(Array.isArray(n)){var r=[];return n.slice().forEach(function(t){void 0!==t&&r.push(s(i,t,r.length))}),r.join("&")}return o(i,e)+"="+o(n,e)}).filter(function(t){return t.length>0}).join("&"):""}},{"object-assign":4,"strict-uri-encode":7}],6:[function(t,e,i){!function(t,i){"function"==typeof define&&define.amd?define([],i):"object"==typeof e&&e.exports?e.exports=i():t.StartAudioContext=i()}(this,function(){function t(t){var e=t.createBuffer(1,1,t.sampleRate),i=t.createBufferSource();i.buffer=e,i.connect(t.destination),i.start(0),t.resume&&t.resume()}function e(t){return"running"===t.state}function i(t,i){function n(){e(t)?i():(requestAnimationFrame(n),t.resume&&t.resume())}e(t)?i():n()}function n(t,e,i){if(Array.isArray(t)||NodeList&&t instanceof NodeList)for(var s=0;s<t.length;s++)n(t[s],e,i);else if("string"==typeof t)n(document.querySelectorAll(t),e,i);else if(t.jquery&&"function"==typeof t.toArray)n(t.toArray(),e,i);else if(Element&&t instanceof Element){var r=new o(t,i);e.push(r)}}function s(t,e,s){var o=new Promise(function(e){i(t,e)}),r=[];return e&&n(e,r,t),o.then(function(){for(var t=0;t<r.length;t++)r[t].dispose();r=null,s&&s()}),o}var o=function(t,e){this._dragged=!1,this._element=t,this._bindedMove=this._moved.bind(this),this._bindedEnd=this._ended.bind(this,e),t.addEventListener("touchmove",this._bindedMove),t.addEventListener("touchend",this._bindedEnd),t.addEventListener("mouseup",this._bindedEnd)};return o.prototype._moved=function(t){this._dragged=!0},o.prototype._ended=function(e){this._dragged||t(e),this._dragged=!1},o.prototype.dispose=function(){this._element.removeEventListener("touchmove",this._bindedMove),this._element.removeEventListener("touchend",this._bindedEnd),this._element.removeEventListener("mouseup",this._bindedEnd),this._bindedMove=null,this._bindedEnd=null,this._element=null},s})},{}],7:[function(t,e,i){"use strict";e.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}},{}],8:[function(t,e,i){!function(t,i){"function"==typeof define&&define.amd?define(function(){return i()}):"object"==typeof e?e.exports=i():t.Tone=i()}(this,function(){"use strict";function t(t){i=t()}function e(t){t(i)}var i;return t(function(){function t(t){return"undefined"==typeof t}function e(t){return"function"==typeof t}var i;if(t(window.AudioContext)&&(window.AudioContext=window.webkitAudioContext),t(window.OfflineAudioContext)&&(window.OfflineAudioContext=window.webkitOfflineAudioContext),t(AudioContext))throw new Error("Web Audio is not supported in this browser");i=new AudioContext,e(AudioContext.prototype.createGain)||(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),e(AudioContext.prototype.createDelay)||(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),e(AudioContext.prototype.createPeriodicWave)||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable),e(AudioBufferSourceNode.prototype.start)||(AudioBufferSourceNode.prototype.start=AudioBufferSourceNode.prototype.noteGrainOn),e(AudioBufferSourceNode.prototype.stop)||(AudioBufferSourceNode.prototype.stop=AudioBufferSourceNode.prototype.noteOff),e(OscillatorNode.prototype.start)||(OscillatorNode.prototype.start=OscillatorNode.prototype.noteOn),e(OscillatorNode.prototype.stop)||(OscillatorNode.prototype.stop=OscillatorNode.prototype.noteOff),e(OscillatorNode.prototype.setPeriodicWave)||(OscillatorNode.prototype.setPeriodicWave=OscillatorNode.prototype.setWaveTable),t(AudioNode.prototype._nativeConnect)&&(AudioNode.prototype._nativeConnect=AudioNode.prototype.connect,AudioNode.prototype.connect=function(e,i,n){if(e.input)Array.isArray(e.input)?(t(n)&&(n=0),this.connect(e.input[n])):this.connect(e.input,i,n);else try{e instanceof AudioNode?this._nativeConnect(e,i,n):this._nativeConnect(e,i)}catch(t){throw new Error("error connecting to node: "+e)}});var n=function(e,i){t(e)||1===e?this.input=this.context.createGain():e>1&&(this.input=new Array(e)),t(i)||1===i?this.output=this.context.createGain():i>1&&(this.output=new Array(e))};n.prototype.set=function(e,i,s){if(this.isObject(e))s=i;else if(this.isString(e)){var o={};o[e]=i,e=o}for(var r in e){i=e[r];var a=this;if(r.indexOf(".")!==-1){for(var h=r.split("."),l=0;l<h.length-1;l++)a=a[h[l]];r=h[h.length-1]}var u=a[r];t(u)||(n.Signal&&u instanceof n.Signal||n.Param&&u instanceof n.Param?u.value!==i&&(t(s)?u.value=i:u.rampTo(i,s)):u instanceof AudioParam?u.value!==i&&(u.value=i):u instanceof n?u.set(i):u!==i&&(a[r]=i))}return this},n.prototype.get=function(i){t(i)?i=this._collectDefaults(this.constructor):this.isString(i)&&(i=[i]);for(var s={},o=0;o<i.length;o++){var r=i[o],a=this,h=s;if(r.indexOf(".")!==-1){for(var l=r.split("."),u=0;u<l.length-1;u++){var c=l[u];h[c]=h[c]||{},h=h[c],a=a[c]}r=l[l.length-1]}var p=a[r];this.isObject(i[r])?h[r]=p.get():n.Signal&&p instanceof n.Signal?h[r]=p.value:n.Param&&p instanceof n.Param?h[r]=p.value:p instanceof AudioParam?h[r]=p.value:p instanceof n?h[r]=p.get():e(p)||t(p)||(h[r]=p)}return s},n.prototype._collectDefaults=function(e){var i=[];if(t(e.defaults)||(i=Object.keys(e.defaults)),!t(e._super))for(var n=this._collectDefaults(e._super),s=0;s<n.length;s++)i.indexOf(n[s])===-1&&i.push(n[s]);return i},n.prototype.toString=function(){for(var t in n){var i=t[0].match(/^[A-Z]$/),s=n[t]===this.constructor;if(e(n[t])&&i&&s)return t}return"Tone"},n.context=i,n.prototype.context=n.context,n.prototype.bufferSize=2048,n.prototype.blockTime=128/n.context.sampleRate,n.prototype.sampleTime=1/n.context.sampleRate,n.prototype.dispose=function(){return this.isUndef(this.input)||(this.input instanceof AudioNode&&this.input.disconnect(),this.input=null),this.isUndef(this.output)||(this.output instanceof AudioNode&&this.output.disconnect(),this.output=null),this};var s=null;n.prototype.noGC=function(){return this.output.connect(s),this},AudioNode.prototype.noGC=function(){return this.connect(s),this},n.prototype.connect=function(t,e,i){return Array.isArray(this.output)?(e=this.defaultArg(e,0),this.output[e].connect(t,0,i)):this.output.connect(t,e,i),this},n.prototype.disconnect=function(t){return Array.isArray(this.output)?(t=this.defaultArg(t,0),this.output[t].disconnect()):this.isUndef(t)?this.output.disconnect():this.output.disconnect(t),this},n.prototype.connectSeries=function(){if(arguments.length>1)for(var t=arguments[0],e=1;e<arguments.length;e++){var i=arguments[e];t.connect(i),t=i}return this},n.prototype.chain=function(){if(arguments.length>0)for(var t=this,e=0;e<arguments.length;e++){var i=arguments[e];t.connect(i),t=i}return this},n.prototype.fan=function(){if(arguments.length>0)for(var t=0;t<arguments.length;t++)this.connect(arguments[t]);return this},AudioNode.prototype.chain=n.prototype.chain,AudioNode.prototype.fan=n.prototype.fan,n.prototype.defaultArg=function(e,i){if(this.isObject(e)&&this.isObject(i)){var n={};for(var s in e)n[s]=this.defaultArg(i[s],e[s]);for(var o in i)n[o]=this.defaultArg(e[o],i[o]);return n}return t(e)?i:e},n.prototype.optionsObject=function(t,e,i){var n={};if(1===t.length&&this.isObject(t[0]))n=t[0];else for(var s=0;s<e.length;s++)n[e[s]]=t[s];return this.isUndef(i)?n:this.defaultArg(n,i)},n.prototype.isUndef=t,n.prototype.isFunction=e,n.prototype.isNumber=function(t){return"number"==typeof t},n.prototype.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object},n.prototype.isBoolean=function(t){return"boolean"==typeof t},n.prototype.isArray=function(t){return Array.isArray(t)},n.prototype.isString=function(t){return"string"==typeof t},n.noOp=function(){},n.prototype._readOnly=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._readOnly(t[e]);else Object.defineProperty(this,t,{writable:!1,enumerable:!0})},n.prototype._writable=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._writable(t[e]);else Object.defineProperty(this,t,{writable:!0})},n.State={Started:"started",Stopped:"stopped",Paused:"paused"},n.prototype.equalPowerScale=function(t){var e=.5*Math.PI;return Math.sin(t*e)},n.prototype.dbToGain=function(t){return Math.pow(2,t/6)},n.prototype.gainToDb=function(t){return 20*(Math.log(t)/Math.LN10)},n.prototype.intervalToFrequencyRatio=function(t){return Math.pow(2,t/12)},n.prototype.now=function(){return this.context.currentTime},n.now=function(){return n.context.currentTime},n.extend=function(e,i){function s(){}t(i)&&(i=n),s.prototype=i.prototype,e.prototype=new s,e.prototype.constructor=e,e._super=i};var o=[];return n._initAudioContext=function(t){t(n.context),o.push(t)},n.setContext=function(t){n.prototype.context=t,n.context=t;for(var e=0;e<o.length;e++)o[e](t)},n._initAudioContext(function(t){n.prototype.blockTime=128/t.sampleRate,n.prototype.sampleTime=1/t.sampleRate,s=t.createGain(),s.gain.value=0,s.connect(t.destination)}),n.version="r8",window.TONE_SILENCE_VERSION_LOGGING||console.log("%c * Tone.js "+n.version+" * ","background: #000; color: #fff"),n}),e(function(t){return t.SignalBase=function(){},t.extend(t.SignalBase),t.SignalBase.prototype.connect=function(e,i,n){return t.Signal&&t.Signal===e.constructor||t.Param&&t.Param===e.constructor||t.TimelineSignal&&t.TimelineSignal===e.constructor?(e._param.cancelScheduledValues(0),e._param.value=0,e.overridden=!0):e instanceof AudioParam&&(e.cancelScheduledValues(0),e.value=0),t.prototype.connect.call(this,e,i,n),this},t.SignalBase}),e(function(t){return t.WaveShaper=function(t,e){this._shaper=this.input=this.output=this.context.createWaveShaper(),this._curve=null,Array.isArray(t)?this.curve=t:isFinite(t)||this.isUndef(t)?this._curve=new Float32Array(this.defaultArg(t,1024)):this.isFunction(t)&&(this._curve=new Float32Array(this.defaultArg(e,1024)),this.setMap(t))},t.extend(t.WaveShaper,t.SignalBase),t.WaveShaper.prototype.setMap=function(t){for(var e=0,i=this._curve.length;e<i;e++){var n=e/(i-1)*2-1;this._curve[e]=t(n,e)}return this._shaper.curve=this._curve,this},Object.defineProperty(t.WaveShaper.prototype,"curve",{get:function(){return this._shaper.curve},set:function(t){this._curve=new Float32Array(t),this._shaper.curve=this._curve}}),Object.defineProperty(t.WaveShaper.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){if(["none","2x","4x"].indexOf(t)===-1)throw new RangeError("Tone.WaveShaper: oversampling must be either 'none', '2x', or '4x'");this._shaper.oversample=t}}),t.WaveShaper.prototype.dispose=function(){return t.prototype.dispose.call(this),this._shaper.disconnect(),this._shaper=null,this._curve=null,this},t.WaveShaper}),e(function(t){return t.TimeBase=function(e,i){if(!(this instanceof t.TimeBase))return new t.TimeBase(e,i);if(this._expr=this._noOp,e instanceof t.TimeBase)this.copy(e);else if(!this.isUndef(i)||this.isNumber(e)){i=this.defaultArg(i,this._defaultUnits);var n=this._primaryExpressions[i].method;this._expr=n.bind(this,e)}else this.isString(e)?this.set(e):this.isUndef(e)&&(this._expr=this._defaultExpr())},t.extend(t.TimeBase),t.TimeBase.prototype.set=function(t){return this._expr=this._parseExprString(t),this},t.TimeBase.prototype.clone=function(){var t=new this.constructor;return t.copy(this),t},t.TimeBase.prototype.copy=function(t){var e=t._expr();return this.set(e)},t.TimeBase.prototype._primaryExpressions={n:{regexp:/^(\d+)n/i,method:function(t){return t=parseInt(t),1===t?this._beatsToUnits(this._timeSignature()):this._beatsToUnits(4/t)}},t:{regexp:/^(\d+)t/i,method:function(t){return t=parseInt(t),this._beatsToUnits(8/(3*parseInt(t)))}},m:{regexp:/^(\d+)m/i,method:function(t){return this._beatsToUnits(parseInt(t)*this._timeSignature())}},i:{regexp:/^(\d+)i/i,method:function(t){return this._ticksToUnits(parseInt(t))}},hz:{regexp:/^(\d+(?:\.\d+)?)hz/i,method:function(t){return this._frequencyToUnits(parseFloat(t))}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(t,e,i){var n=0;return t&&"0"!==t&&(n+=this._beatsToUnits(this._timeSignature()*parseFloat(t))),e&&"0"!==e&&(n+=this._beatsToUnits(parseFloat(e))),i&&"0"!==i&&(n+=this._beatsToUnits(parseFloat(i)/4)),n}},s:{regexp:/^(\d+(?:\.\d+)?s)/,method:function(t){return this._secondsToUnits(parseFloat(t))}},samples:{regexp:/^(\d+)samples/,method:function(t){return parseInt(t)/this.context.sampleRate}},default:{regexp:/^(\d+(?:\.\d+)?)/,method:function(t){return this._primaryExpressions[this._defaultUnits].method.call(this,t)}}},t.TimeBase.prototype._binaryExpressions={"+":{regexp:/^\+/,precedence:2,method:function(t,e){return t()+e()}},"-":{regexp:/^\-/,precedence:2,method:function(t,e){return t()-e()}},"*":{regexp:/^\*/,precedence:1,method:function(t,e){return t()*e()}},"/":{regexp:/^\//,precedence:1,method:function(t,e){return t()/e()}}},t.TimeBase.prototype._unaryExpressions={neg:{regexp:/^\-/,method:function(t){return-t()}}},t.TimeBase.prototype._syntaxGlue={"(":{regexp:/^\(/},")":{regexp:/^\)/}},t.TimeBase.prototype._tokenize=function(t){function e(t,e){for(var i=["_binaryExpressions","_unaryExpressions","_primaryExpressions","_syntaxGlue"],n=0;n<i.length;n++){var s=e[i[n]];for(var o in s){var r=s[o],a=r.regexp,h=t.match(a);if(null!==h)return{method:r.method,precedence:r.precedence,regexp:r.regexp,value:h[0]}}}throw new SyntaxError("Tone.TimeBase: Unexpected token "+t)}for(var i=-1,n=[];t.length>0;){t=t.trim();var s=e(t,this);n.push(s),t=t.substr(s.value.length)}return{next:function(){return n[++i]},peek:function(){return n[i+1]}}},t.TimeBase.prototype._matchGroup=function(t,e,i){var n=!1;if(!this.isUndef(t))for(var s in e){var o=e[s];if(o.regexp.test(t.value)){if(this.isUndef(i))return o;if(o.precedence===i)return o}}return n},t.TimeBase.prototype._parseBinary=function(t,e){this.isUndef(e)&&(e=2);var i;i=e<0?this._parseUnary(t):this._parseBinary(t,e-1);for(var n=t.peek();n&&this._matchGroup(n,this._binaryExpressions,e);)n=t.next(),i=n.method.bind(this,i,this._parseBinary(t,e-1)),n=t.peek();return i},t.TimeBase.prototype._parseUnary=function(t){var e,i;e=t.peek();var n=this._matchGroup(e,this._unaryExpressions);return n?(e=t.next(),i=this._parseUnary(t),n.method.bind(this,i)):this._parsePrimary(t)},t.TimeBase.prototype._parsePrimary=function(t){var e,i;if(e=t.peek(),this.isUndef(e))throw new SyntaxError("Tone.TimeBase: Unexpected end of expression");if(this._matchGroup(e,this._primaryExpressions)){e=t.next();var n=e.value.match(e.regexp);return e.method.bind(this,n[1],n[2],n[3])}if(e&&"("===e.value){if(t.next(),i=this._parseBinary(t),e=t.next(),!e||")"!==e.value)throw new SyntaxError("Expected )");return i}throw new SyntaxError("Tone.TimeBase: Cannot process token "+e.value)},t.TimeBase.prototype._parseExprString=function(t){this.isString(t)||(t=t.toString());var e=this._tokenize(t),i=this._parseBinary(e);return i},t.TimeBase.prototype._noOp=function(){return 0},t.TimeBase.prototype._defaultExpr=function(){return this._noOp},t.TimeBase.prototype._defaultUnits="s",t.TimeBase.prototype._frequencyToUnits=function(t){return 1/t},t.TimeBase.prototype._beatsToUnits=function(e){return 60/t.Transport.bpm.value*e},t.TimeBase.prototype._secondsToUnits=function(t){return t},t.TimeBase.prototype._ticksToUnits=function(e){return e*(this._beatsToUnits(1)/t.Transport.PPQ)},t.TimeBase.prototype._timeSignature=function(){return t.Transport.timeSignature},t.TimeBase.prototype._pushExpr=function(e,i,n){return e instanceof t.TimeBase||(e=new this.constructor(e,n)),this._expr=this._binaryExpressions[i].method.bind(this,this._expr,e._expr),this},t.TimeBase.prototype.add=function(t,e){return this._pushExpr(t,"+",e)},t.TimeBase.prototype.sub=function(t,e){return this._pushExpr(t,"-",e)},t.TimeBase.prototype.mult=function(t,e){return this._pushExpr(t,"*",e)},t.TimeBase.prototype.div=function(t,e){return this._pushExpr(t,"/",e)},t.TimeBase.prototype.eval=function(){return this._expr()},t.TimeBase.prototype.dispose=function(){this._expr=null},t.TimeBase}),e(function(t){return t.Time=function(e,i){return this instanceof t.Time?(this._plusNow=!1,void t.TimeBase.call(this,e,i)):new t.Time(e,i)},t.extend(t.Time,t.TimeBase),t.Time.prototype._unaryExpressions=Object.create(t.TimeBase.prototype._unaryExpressions),t.Time.prototype._unaryExpressions.quantize={regexp:/^@/,method:function(e){return t.Transport.nextSubdivision(e())}},t.Time.prototype._unaryExpressions.now={regexp:/^\+/,method:function(t){return this._plusNow=!0,t()}},t.Time.prototype.quantize=function(t,e){return e=this.defaultArg(e,1),this._expr=function(t,e,i){t=t(),e=e.toSeconds();var n=Math.round(t/e),s=n*e,o=s-t;return t+o*i}.bind(this,this._expr,new this.constructor(t),e),this},t.Time.prototype.addNow=function(){return this._plusNow=!0,this},t.Time.prototype._defaultExpr=function(){return this._plusNow=!0,this._noOp},t.Time.prototype.copy=function(e){return t.TimeBase.prototype.copy.call(this,e),this._plusNow=e._plusNow,this},t.Time.prototype.toNotation=function(){var t=this.toSeconds(),e=["1m","2n","4n","8n","16n","32n","64n","128n"],i=this._toNotationHelper(t,e),n=["1m","2n","2t","4n","4t","8n","8t","16n","16t","32n","32t","64n","64t","128n"],s=this._toNotationHelper(t,n);return s.split("+").length<i.split("+").length?s:i},t.Time.prototype._toNotationHelper=function(t,e){for(var i=this._notationToUnits(e[e.length-1]),n="",s=0;s<e.length;s++){var o=this._notationToUnits(e[s]),r=t/o,a=1e-6;if(1-r%1<a&&(r+=a),r=Math.floor(r),r>0){if(n+=1===r?e[s]:r.toString()+"*"+e[s],t-=r*o,t<i)break;n+=" + "}}return""===n&&(n="0"),n},t.Time.prototype._notationToUnits=function(t){for(var e=this._primaryExpressions,i=[e.n,e.t,e.m],n=0;n<i.length;n++){var s=i[n],o=t.match(s.regexp);if(o)return s.method.call(this,o[1]);
}},t.Time.prototype.toBarsBeatsSixteenths=function(){var t=this._beatsToUnits(1),e=this.toSeconds()/t,i=Math.floor(e/this._timeSignature()),n=e%1*4;e=Math.floor(e)%this._timeSignature(),n=n.toString(),n.length>3&&(n=parseFloat(n).toFixed(3));var s=[i,e,n];return s.join(":")},t.Time.prototype.toTicks=function(){var e=this._beatsToUnits(1),i=this.eval()/e;return Math.floor(i*t.Transport.PPQ)},t.Time.prototype.toSamples=function(){return this.toSeconds()*this.context.sampleRate},t.Time.prototype.toFrequency=function(){return 1/this.toSeconds()},t.Time.prototype.toSeconds=function(){return this.eval()},t.Time.prototype.toMilliseconds=function(){return 1e3*this.toSeconds()},t.Time.prototype.eval=function(){var t=this._expr();return t+(this._plusNow?this.now():0)},t.Time}),e(function(t){t.Frequency=function(e,i){return this instanceof t.Frequency?void t.TimeBase.call(this,e,i):new t.Frequency(e,i)},t.extend(t.Frequency,t.TimeBase),t.Frequency.prototype._primaryExpressions=Object.create(t.TimeBase.prototype._primaryExpressions),t.Frequency.prototype._primaryExpressions.midi={regexp:/^(\d+(?:\.\d+)?midi)/,method:function(t){return this.midiToFrequency(t)}},t.Frequency.prototype._primaryExpressions.note={regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method:function(t,i){var n=e[t.toLowerCase()],s=n+12*(parseInt(i)+1);return this.midiToFrequency(s)}},t.Frequency.prototype._primaryExpressions.tr={regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(t,e,i){var n=1;return t&&"0"!==t&&(n*=this._beatsToUnits(this._timeSignature()*parseFloat(t))),e&&"0"!==e&&(n*=this._beatsToUnits(parseFloat(e))),i&&"0"!==i&&(n*=this._beatsToUnits(parseFloat(i)/4)),n}},t.Frequency.prototype.transpose=function(t){return this._expr=function(t,e){var i=t();return i*this.intervalToFrequencyRatio(e)}.bind(this,this._expr,t),this},t.Frequency.prototype.harmonize=function(t){return this._expr=function(t,e){for(var i=t(),n=[],s=0;s<e.length;s++)n[s]=i*this.intervalToFrequencyRatio(e[s]);return n}.bind(this,this._expr,t),this},t.Frequency.prototype.toMidi=function(){return this.frequencyToMidi(this.eval())},t.Frequency.prototype.toNote=function(){var e=this.eval(),n=Math.log(e/t.Frequency.A4)/Math.LN2,s=Math.round(12*n)+57,o=Math.floor(s/12);o<0&&(s+=-12*o);var r=i[s%12];return r+o.toString()},t.Frequency.prototype.toSeconds=function(){return 1/this.eval()},t.Frequency.prototype.toFrequency=function(){return this.eval()},t.Frequency.prototype.toTicks=function(){var e=this._beatsToUnits(1),i=this.eval()/e;return Math.floor(i*t.Transport.PPQ)},t.Frequency.prototype._frequencyToUnits=function(t){return t},t.Frequency.prototype._ticksToUnits=function(e){return 1/(60*e/(t.Transport.bpm.value*t.Transport.PPQ))},t.Frequency.prototype._beatsToUnits=function(e){return 1/t.TimeBase.prototype._beatsToUnits.call(this,e)},t.Frequency.prototype._secondsToUnits=function(t){return 1/t},t.Frequency.prototype._defaultUnits="hz";var e={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},i=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return t.Frequency.A4=440,t.Frequency.prototype.midiToFrequency=function(e){return t.Frequency.A4*Math.pow(2,(e-69)/12)},t.Frequency.prototype.frequencyToMidi=function(e){return 69+12*Math.log(e/t.Frequency.A4)/Math.LN2},t.Frequency}),e(function(t){return t.TransportTime=function(e,i){return this instanceof t.TransportTime?void t.Time.call(this,e,i):new t.TransportTime(e,i)},t.extend(t.TransportTime,t.Time),t.TransportTime.prototype._unaryExpressions=Object.create(t.Time.prototype._unaryExpressions),t.TransportTime.prototype._unaryExpressions.quantize={regexp:/^@/,method:function(e){var i=this._secondsToTicks(e()),n=Math.ceil(t.Transport.ticks/i);return this._ticksToUnits(n*i)}},t.TransportTime.prototype._secondsToTicks=function(e){var i=this._beatsToUnits(1),n=e/i;return Math.round(n*t.Transport.PPQ)},t.TransportTime.prototype.eval=function(){var e=this._secondsToTicks(this._expr());return e+(this._plusNow?t.Transport.ticks:0)},t.TransportTime.prototype.toTicks=function(){return this.eval()},t.TransportTime.prototype.toSeconds=function(){var e=this._expr();return e+(this._plusNow?t.Transport.seconds:0)},t.TransportTime.prototype.toFrequency=function(){return 1/this.toSeconds()},t.TransportTime}),e(function(t){return t.Type={Default:"number",Time:"time",Frequency:"frequency",TransportTime:"transportTime",Ticks:"ticks",NormalRange:"normalRange",AudioRange:"audioRange",Decibels:"db",Interval:"interval",BPM:"bpm",Positive:"positive",Cents:"cents",Degrees:"degrees",MIDI:"midi",BarsBeatsSixteenths:"barsBeatsSixteenths",Samples:"samples",Hertz:"hertz",Note:"note",Milliseconds:"milliseconds",Seconds:"seconds",Notation:"notation"},t.prototype.toSeconds=function(e){return this.isNumber(e)?e:this.isUndef(e)?this.now():this.isString(e)?new t.Time(e).toSeconds():e instanceof t.TimeBase?e.toSeconds():void 0},t.prototype.toFrequency=function(e){return this.isNumber(e)?e:this.isString(e)||this.isUndef(e)?new t.Frequency(e).eval():e instanceof t.TimeBase?e.toFrequency():void 0},t.prototype.toTicks=function(e){return this.isNumber(e)||this.isString(e)?new t.TransportTime(e).toTicks():this.isUndef(e)?t.Transport.ticks:e instanceof t.TimeBase?e.toTicks():void 0},t}),e(function(t){return t.Param=function(){var e=this.optionsObject(arguments,["param","units","convert"],t.Param.defaults);this._param=this.input=e.param,this.units=e.units,this.convert=e.convert,this.overridden=!1,this._lfo=null,this.isObject(e.lfo)?this.value=e.lfo:this.isUndef(e.value)||(this.value=e.value)},t.extend(t.Param),t.Param.defaults={units:t.Type.Default,convert:!0,param:void 0},Object.defineProperty(t.Param.prototype,"value",{get:function(){return this._toUnits(this._param.value)},set:function(e){if(this.isObject(e)){if(this.isUndef(t.LFO))throw new Error("Include 'Tone.LFO' to use an LFO as a Param value.");this._lfo&&this._lfo.dispose(),this._lfo=new t.LFO(e).start(),this._lfo.connect(this.input)}else{var i=this._fromUnits(e);this._param.cancelScheduledValues(0),this._param.value=i}}}),t.Param.prototype._fromUnits=function(e){if(!this.convert&&!this.isUndef(this.convert))return e;switch(this.units){case t.Type.Time:return this.toSeconds(e);case t.Type.Frequency:return this.toFrequency(e);case t.Type.Decibels:return this.dbToGain(e);case t.Type.NormalRange:return Math.min(Math.max(e,0),1);case t.Type.AudioRange:return Math.min(Math.max(e,-1),1);case t.Type.Positive:return Math.max(e,0);default:return e}},t.Param.prototype._toUnits=function(e){if(!this.convert&&!this.isUndef(this.convert))return e;switch(this.units){case t.Type.Decibels:return this.gainToDb(e);default:return e}},t.Param.prototype._minOutput=1e-5,t.Param.prototype.setValueAtTime=function(t,e){return t=this._fromUnits(t),e=this.toSeconds(e),e<=this.now()+this.blockTime?this._param.value=t:this._param.setValueAtTime(t,e),this},t.Param.prototype.setRampPoint=function(t){t=this.defaultArg(t,this.now());var e=this._param.value;return 0===e&&(e=this._minOutput),this._param.setValueAtTime(e,t),this},t.Param.prototype.linearRampToValueAtTime=function(t,e){return t=this._fromUnits(t),this._param.linearRampToValueAtTime(t,this.toSeconds(e)),this},t.Param.prototype.exponentialRampToValueAtTime=function(t,e){return t=this._fromUnits(t),t=Math.max(this._minOutput,t),this._param.exponentialRampToValueAtTime(t,this.toSeconds(e)),this},t.Param.prototype.exponentialRampToValue=function(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialRampToValueAtTime(t,i+this.toSeconds(e)),this},t.Param.prototype.linearRampToValue=function(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.linearRampToValueAtTime(t,i+this.toSeconds(e)),this},t.Param.prototype.setTargetAtTime=function(t,e,i){return t=this._fromUnits(t),t=Math.max(this._minOutput,t),i=Math.max(this._minOutput,i),this._param.setTargetAtTime(t,this.toSeconds(e),i),this},t.Param.prototype.setValueCurveAtTime=function(t,e,i){for(var n=0;n<t.length;n++)t[n]=this._fromUnits(t[n]);return this._param.setValueCurveAtTime(t,this.toSeconds(e),this.toSeconds(i)),this},t.Param.prototype.cancelScheduledValues=function(t){return this._param.cancelScheduledValues(this.toSeconds(t)),this},t.Param.prototype.rampTo=function(e,i,n){return i=this.defaultArg(i,0),this.units===t.Type.Frequency||this.units===t.Type.BPM?this.exponentialRampToValue(e,i,n):this.linearRampToValue(e,i,n),this},Object.defineProperty(t.Param.prototype,"lfo",{get:function(){return this._lfo}}),t.Param.prototype.dispose=function(){return t.prototype.dispose.call(this),this._param=null,this._lfo&&(this._lfo.dispose(),this._lfo=null),this},t.Param}),e(function(t){return t.Gain=function(){var e=this.optionsObject(arguments,["gain","units"],t.Gain.defaults);this.input=this.output=this._gainNode=this.context.createGain(),this.gain=new t.Param({param:this._gainNode.gain,units:e.units,value:e.gain,convert:e.convert}),this._readOnly("gain")},t.extend(t.Gain),t.Gain.defaults={gain:1,convert:!0},t.Gain.prototype.dispose=function(){t.Param.prototype.dispose.call(this),this._gainNode.disconnect(),this._gainNode=null,this._writable("gain"),this.gain.dispose(),this.gain=null},t.prototype.createInsOuts=function(e,i){1===e?this.input=new t.Gain:e>1&&(this.input=new Array(e)),1===i?this.output=new t.Gain:i>1&&(this.output=new Array(e))},t.Gain}),e(function(t){return t.Signal=function(){var e=this.optionsObject(arguments,["value","units"],t.Signal.defaults);this.output=this._gain=this.context.createGain(),e.param=this._gain.gain,t.Param.call(this,e),this.input=this._param=this._gain.gain,t.Signal._constant.chain(this._gain)},t.extend(t.Signal,t.Param),t.Signal.defaults={value:0,units:t.Type.Default,convert:!0},t.Signal.prototype.connect=t.SignalBase.prototype.connect,t.Signal.prototype.dispose=function(){return t.Param.prototype.dispose.call(this),this._param=null,this._gain.disconnect(),this._gain=null,this},t.Signal._constant=null,t._initAudioContext(function(e){for(var i=e.createBuffer(1,128,e.sampleRate),n=i.getChannelData(0),s=0;s<n.length;s++)n[s]=1;t.Signal._constant=e.createBufferSource(),t.Signal._constant.channelCount=1,t.Signal._constant.channelCountMode="explicit",t.Signal._constant.buffer=i,t.Signal._constant.loop=!0,t.Signal._constant.start(0),t.Signal._constant.noGC()}),t.Signal}),e(function(t){return t.Timeline=function(){var e=this.optionsObject(arguments,["memory"],t.Timeline.defaults);this._timeline=[],this._toRemove=[],this._iterating=!1,this.memory=e.memory},t.extend(t.Timeline),t.Timeline.defaults={memory:1/0},Object.defineProperty(t.Timeline.prototype,"length",{get:function(){return this._timeline.length}}),t.Timeline.prototype.addEvent=function(t){if(this.isUndef(t.time))throw new Error("Tone.Timeline: events must have a time attribute");if(this._timeline.length){var e=this._search(t.time);this._timeline.splice(e+1,0,t)}else this._timeline.push(t);if(this.length>this.memory){var i=this.length-this.memory;this._timeline.splice(0,i)}return this},t.Timeline.prototype.removeEvent=function(t){if(this._iterating)this._toRemove.push(t);else{var e=this._timeline.indexOf(t);e!==-1&&this._timeline.splice(e,1)}return this},t.Timeline.prototype.getEvent=function(t){var e=this._search(t);return e!==-1?this._timeline[e]:null},t.Timeline.prototype.getEventAfter=function(t){var e=this._search(t);return e+1<this._timeline.length?this._timeline[e+1]:null},t.Timeline.prototype.getEventBefore=function(t){var e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];var i=this._search(t);return i-1>=0?this._timeline[i-1]:null},t.Timeline.prototype.cancel=function(t){if(this._timeline.length>1){var e=this._search(t);if(e>=0)if(this._timeline[e].time===t){for(var i=e;i>=0&&this._timeline[i].time===t;i--)e=i;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&this._timeline[0].time>=t&&(this._timeline=[]);return this},t.Timeline.prototype.cancelBefore=function(t){if(this._timeline.length){var e=this._search(t);e>=0&&(this._timeline=this._timeline.slice(e+1))}return this},t.Timeline.prototype._search=function(t){var e=0,i=this._timeline.length,n=i;if(i>0&&this._timeline[i-1].time<=t)return i-1;for(;e<n;){var s=Math.floor(e+(n-e)/2),o=this._timeline[s],r=this._timeline[s+1];if(o.time===t){for(var a=s;a<this._timeline.length;a++){var h=this._timeline[a];h.time===t&&(s=a)}return s}if(o.time<t&&r.time>t)return s;o.time>t?n=s:o.time<t&&(e=s+1)}return-1},t.Timeline.prototype._iterate=function(t,e,i){this._iterating=!0,e=this.defaultArg(e,0),i=this.defaultArg(i,this._timeline.length-1);for(var n=e;n<=i;n++)t(this._timeline[n]);if(this._iterating=!1,this._toRemove.length>0){for(var s=0;s<this._toRemove.length;s++){var o=this._timeline.indexOf(this._toRemove[s]);o!==-1&&this._timeline.splice(o,1)}this._toRemove=[]}},t.Timeline.prototype.forEach=function(t){return this._iterate(t),this},t.Timeline.prototype.forEachBefore=function(t,e){var i=this._search(t);return i!==-1&&this._iterate(e,0,i),this},t.Timeline.prototype.forEachAfter=function(t,e){var i=this._search(t);return this._iterate(e,i+1),this},t.Timeline.prototype.forEachFrom=function(t,e){for(var i=this._search(t);i>=0&&this._timeline[i].time>=t;)i--;return this._iterate(e,i+1),this},t.Timeline.prototype.forEachAtTime=function(t,e){var i=this._search(t);return i!==-1&&this._iterate(function(i){i.time===t&&e(i)},0,i),this},t.Timeline.prototype.dispose=function(){t.prototype.dispose.call(this),this._timeline=null,this._toRemove=null},t.Timeline}),e(function(t){return t.TimelineSignal=function(){var e=this.optionsObject(arguments,["value","units"],t.Signal.defaults);this._events=new t.Timeline(10),t.Signal.apply(this,e),e.param=this._param,t.Param.call(this,e),this._initial=this._fromUnits(this._param.value)},t.extend(t.TimelineSignal,t.Param),t.TimelineSignal.Type={Linear:"linear",Exponential:"exponential",Target:"target",Curve:"curve",Set:"set"},Object.defineProperty(t.TimelineSignal.prototype,"value",{get:function(){var t=this.now(),e=this.getValueAtTime(t);return this._toUnits(e)},set:function(t){var e=this._fromUnits(t);this._initial=e,this.cancelScheduledValues(),this._param.value=e}}),t.TimelineSignal.prototype.setValueAtTime=function(e,i){return e=this._fromUnits(e),i=this.toSeconds(i),this._events.addEvent({type:t.TimelineSignal.Type.Set,value:e,time:i}),this._param.setValueAtTime(e,i),this},t.TimelineSignal.prototype.linearRampToValueAtTime=function(e,i){return e=this._fromUnits(e),i=this.toSeconds(i),this._events.addEvent({type:t.TimelineSignal.Type.Linear,value:e,time:i}),this._param.linearRampToValueAtTime(e,i),this},t.TimelineSignal.prototype.exponentialRampToValueAtTime=function(e,i){i=this.toSeconds(i);var n=this._searchBefore(i);n&&0===n.value&&this.setValueAtTime(this._minOutput,n.time),e=this._fromUnits(e);var s=Math.max(e,this._minOutput);return this._events.addEvent({type:t.TimelineSignal.Type.Exponential,value:s,time:i}),e<this._minOutput?(this._param.exponentialRampToValueAtTime(this._minOutput,i-this.sampleTime),this.setValueAtTime(0,i)):this._param.exponentialRampToValueAtTime(e,i),this},t.TimelineSignal.prototype.setTargetAtTime=function(e,i,n){return e=this._fromUnits(e),e=Math.max(this._minOutput,e),n=Math.max(this._minOutput,n),i=this.toSeconds(i),this._events.addEvent({type:t.TimelineSignal.Type.Target,value:e,time:i,constant:n}),this._param.setTargetAtTime(e,i,n),this},t.TimelineSignal.prototype.setValueCurveAtTime=function(e,i,n,s){s=this.defaultArg(s,1);for(var o=new Array(e.length),r=0;r<o.length;r++)o[r]=this._fromUnits(e[r])*s;i=this.toSeconds(i),n=this.toSeconds(n),this._events.addEvent({type:t.TimelineSignal.Type.Curve,value:o,time:i,duration:n}),this._param.setValueAtTime(o[0],i);for(var a=1;a<o.length;a++){var h=i+a/(o.length-1)*n;this._param.linearRampToValueAtTime(o[a],h)}return this},t.TimelineSignal.prototype.cancelScheduledValues=function(t){return t=this.toSeconds(t),this._events.cancel(t),this._param.cancelScheduledValues(t),this},t.TimelineSignal.prototype.setRampPoint=function(e){e=this.toSeconds(e);var i=this._toUnits(this.getValueAtTime(e)),n=this._searchBefore(e);if(n&&n.time===e)this.cancelScheduledValues(e+this.sampleTime);else if(n&&n.type===t.TimelineSignal.Type.Curve&&n.time+n.duration>e)this.cancelScheduledValues(e),this.linearRampToValueAtTime(i,e);else{var s=this._searchAfter(e);s&&(this.cancelScheduledValues(e),s.type===t.TimelineSignal.Type.Linear?this.linearRampToValueAtTime(i,e):s.type===t.TimelineSignal.Type.Exponential&&this.exponentialRampToValueAtTime(i,e)),this.setValueAtTime(i,e)}return this},t.TimelineSignal.prototype.linearRampToValueBetween=function(t,e,i){return this.setRampPoint(e),this.linearRampToValueAtTime(t,i),this},t.TimelineSignal.prototype.exponentialRampToValueBetween=function(t,e,i){return this.setRampPoint(e),this.exponentialRampToValueAtTime(t,i),this},t.TimelineSignal.prototype._searchBefore=function(t){return this._events.getEvent(t)},t.TimelineSignal.prototype._searchAfter=function(t){return this._events.getEventAfter(t)},t.TimelineSignal.prototype.getValueAtTime=function(e){e=this.toSeconds(e);var i=this._searchAfter(e),n=this._searchBefore(e),s=this._initial;if(null===n)s=this._initial;else if(n.type===t.TimelineSignal.Type.Target){var o,r=this._events.getEventBefore(n.time);o=null===r?this._initial:r.value,s=this._exponentialApproach(n.time,o,n.value,n.constant,e)}else s=n.type===t.TimelineSignal.Type.Curve?this._curveInterpolate(n.time,n.value,n.duration,e):null===i?n.value:i.type===t.TimelineSignal.Type.Linear?this._linearInterpolate(n.time,n.value,i.time,i.value,e):i.type===t.TimelineSignal.Type.Exponential?this._exponentialInterpolate(n.time,n.value,i.time,i.value,e):n.value;return s},t.TimelineSignal.prototype.connect=t.SignalBase.prototype.connect,t.TimelineSignal.prototype._exponentialApproach=function(t,e,i,n,s){return i+(e-i)*Math.exp(-(s-t)/n)},t.TimelineSignal.prototype._linearInterpolate=function(t,e,i,n,s){return e+(n-e)*((s-t)/(i-t))},t.TimelineSignal.prototype._exponentialInterpolate=function(t,e,i,n,s){return e=Math.max(this._minOutput,e),e*Math.pow(n/e,(s-t)/(i-t))},t.TimelineSignal.prototype._curveInterpolate=function(t,e,i,n){var s=e.length;if(n>=t+i)return e[s-1];if(n<=t)return e[0];var o=(n-t)/i,r=Math.floor((s-1)*o),a=Math.ceil((s-1)*o),h=e[r],l=e[a];return a===r?h:this._linearInterpolate(r,h,a,l,o*(s-1))},t.TimelineSignal.prototype.dispose=function(){t.Signal.prototype.dispose.call(this),t.Param.prototype.dispose.call(this),this._events.dispose(),this._events=null},t.TimelineSignal}),e(function(t){return t.Pow=function(e){this._exp=this.defaultArg(e,1),this._expScaler=this.input=this.output=new t.WaveShaper(this._expFunc(this._exp),8192)},t.extend(t.Pow,t.SignalBase),Object.defineProperty(t.Pow.prototype,"value",{get:function(){return this._exp},set:function(t){this._exp=t,this._expScaler.setMap(this._expFunc(this._exp))}}),t.Pow.prototype._expFunc=function(t){return function(e){return Math.pow(Math.abs(e),t)}},t.Pow.prototype.dispose=function(){return t.prototype.dispose.call(this),this._expScaler.dispose(),this._expScaler=null,this},t.Pow}),e(function(t){return t.Envelope=function(){var e=this.optionsObject(arguments,["attack","decay","sustain","release"],t.Envelope.defaults);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this._attackCurve="linear",this._releaseCurve="exponential",this._sig=this.output=new t.TimelineSignal,this._sig.setValueAtTime(0,0),this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve},t.extend(t.Envelope),t.Envelope.defaults={attack:.01,decay:.1,sustain:.5,release:1,attackCurve:"linear",releaseCurve:"exponential"},Object.defineProperty(t.Envelope.prototype,"value",{get:function(){return this.getValueAtTime(this.now())}}),Object.defineProperty(t.Envelope.prototype,"attackCurve",{get:function(){if(this.isString(this._attackCurve))return this._attackCurve;if(this.isArray(this._attackCurve)){for(var e in t.Envelope.Type)if(t.Envelope.Type[e].In===this._attackCurve)return e;return this._attackCurve}},set:function(e){if(t.Envelope.Type.hasOwnProperty(e)){var i=t.Envelope.Type[e];this.isObject(i)?this._attackCurve=i.In:this._attackCurve=i}else{if(!this.isArray(e))throw new Error("Tone.Envelope: invalid curve: "+e);this._attackCurve=e}}}),Object.defineProperty(t.Envelope.prototype,"releaseCurve",{get:function(){if(this.isString(this._releaseCurve))return this._releaseCurve;if(this.isArray(this._releaseCurve)){for(var e in t.Envelope.Type)if(t.Envelope.Type[e].Out===this._releaseCurve)return e;return this._releaseCurve}},set:function(e){if(t.Envelope.Type.hasOwnProperty(e)){var i=t.Envelope.Type[e];this.isObject(i)?this._releaseCurve=i.Out:this._releaseCurve=i}else{if(!this.isArray(e))throw new Error("Tone.Envelope: invalid curve: "+e);this._releaseCurve=e}}}),t.Envelope.prototype.triggerAttack=function(t,e){t=this.toSeconds(t);var i=this.toSeconds(this.attack),n=i,s=this.toSeconds(this.decay);e=this.defaultArg(e,1);var o=this.getValueAtTime(t);if(o>0){var r=1/n,a=1-o;n=a/r}if("linear"===this._attackCurve)this._sig.linearRampToValue(e,n,t);else if("exponential"===this._attackCurve)this._sig.exponentialRampToValue(e,n,t);else if(n>0){this._sig.setRampPoint(t);var h=this._attackCurve;if(n<i){var l=1-n/i,u=Math.floor(l*this._attackCurve.length);h=this._attackCurve.slice(u),h[0]=o}this._sig.setValueCurveAtTime(h,t,n,e)}return this._sig.exponentialRampToValue(e*this.sustain,s,n+t),this},t.Envelope.prototype.triggerRelease=function(t){t=this.toSeconds(t);var e=this.getValueAtTime(t);if(e>0){var i=this.toSeconds(this.release);if("linear"===this._releaseCurve)this._sig.linearRampToValue(0,i,t);else if("exponential"===this._releaseCurve)this._sig.exponentialRampToValue(0,i,t);else{var n=this._releaseCurve;this.isArray(n)&&(this._sig.setRampPoint(t),this._sig.setValueCurveAtTime(n,t,i,e))}}return this},t.Envelope.prototype.getValueAtTime=function(t){return this._sig.getValueAtTime(t)},t.Envelope.prototype.triggerAttackRelease=function(t,e,i){return e=this.toSeconds(e),this.triggerAttack(e,i),this.triggerRelease(e+this.toSeconds(t)),this},t.Envelope.prototype.cancel=function(t){return this._sig.cancelScheduledValues(t),this},t.Envelope.prototype.connect=t.Signal.prototype.connect,function(){function e(t){for(var e=new Array(t.length),i=0;i<t.length;i++)e[i]=1-t[i];return e}function i(t){return t.slice(0).reverse()}var n,s,o=128,r=[];for(n=0;n<o;n++)r[n]=Math.sin(n/(o-1)*(Math.PI/2));var a=[],h=6.4;for(n=0;n<o-1;n++){s=n/(o-1);var l=Math.sin(s*(2*Math.PI)*h-Math.PI/2)+1;a[n]=l/10+.83*s}a[o-1]=1;var u=[],c=5;for(n=0;n<o;n++)u[n]=Math.ceil(n/(o-1)*c)/c;var p=[];for(n=0;n<o;n++)s=n/(o-1),p[n]=.5*(1-Math.cos(Math.PI*s));var f=[];for(n=0;n<o;n++){s=n/(o-1);var d=4*Math.pow(s,3)+.2,y=Math.cos(d*Math.PI*2*s);f[n]=Math.abs(y*(1-s))}t.Envelope.Type={linear:"linear",exponential:"exponential",bounce:{In:e(f),Out:f},cosine:{In:r,Out:i(r)},step:{In:u,Out:e(u)},ripple:{In:a,Out:e(a)},sine:{In:p,Out:e(p)}}}(),t.Envelope.prototype.dispose=function(){return t.prototype.dispose.call(this),this._sig.dispose(),this._sig=null,this._attackCurve=null,this._releaseCurve=null,this},t.Envelope}),e(function(t){return t.AmplitudeEnvelope=function(){t.Envelope.apply(this,arguments),this.input=this.output=new t.Gain,this._sig.connect(this.output.gain)},t.extend(t.AmplitudeEnvelope,t.Envelope),t.AmplitudeEnvelope.prototype.dispose=function(){return this.input.dispose(),this.input=null,t.Envelope.prototype.dispose.call(this),this},t.AmplitudeEnvelope}),e(function(t){return t.Analyser=function(){var e=this.optionsObject(arguments,["type","size"],t.Analyser.defaults);this._analyser=this.input=this.output=this.context.createAnalyser(),this._type=e.type,this._returnType=e.returnType,this._buffer=null,this.size=e.size,this.type=e.type,this.returnType=e.returnType,this.minDecibels=e.minDecibels,this.maxDecibels=e.maxDecibels},t.extend(t.Analyser),t.Analyser.defaults={size:1024,returnType:"byte",type:"fft",smoothing:.8,maxDecibels:-30,minDecibels:-100},t.Analyser.Type={Waveform:"waveform",FFT:"fft"},t.Analyser.ReturnType={Byte:"byte",Float:"float"},t.Analyser.prototype.analyse=function(){if(this._type===t.Analyser.Type.FFT)this._returnType===t.Analyser.ReturnType.Byte?this._analyser.getByteFrequencyData(this._buffer):this._analyser.getFloatFrequencyData(this._buffer);else if(this._type===t.Analyser.Type.Waveform)if(this._returnType===t.Analyser.ReturnType.Byte)this._analyser.getByteTimeDomainData(this._buffer);else if(this.isFunction(AnalyserNode.prototype.getFloatTimeDomainData))this._analyser.getFloatTimeDomainData(this._buffer);else{var e=new Uint8Array(this._buffer.length);this._analyser.getByteTimeDomainData(e);for(var i=0;i<e.length;i++)this._buffer[i]=.0078125*(e[i]-128)}return this._buffer},Object.defineProperty(t.Analyser.prototype,"size",{get:function(){return this._analyser.frequencyBinCount},set:function(t){this._analyser.fftSize=2*t,this.type=this._type}}),Object.defineProperty(t.Analyser.prototype,"returnType",{get:function(){return this._returnType},set:function(e){if(e===t.Analyser.ReturnType.Byte)this._buffer=new Uint8Array(this._analyser.frequencyBinCount);else{if(e!==t.Analyser.ReturnType.Float)throw new TypeError("Tone.Analayser: invalid return type: "+e);this._buffer=new Float32Array(this._analyser.frequencyBinCount)}this._returnType=e}}),Object.defineProperty(t.Analyser.prototype,"type",{get:function(){return this._type},set:function(e){if(e!==t.Analyser.Type.Waveform&&e!==t.Analyser.Type.FFT)throw new TypeError("Tone.Analyser: invalid type: "+e);this._type=e}}),Object.defineProperty(t.Analyser.prototype,"smoothing",{get:function(){return this._analyser.smoothingTimeConstant},set:function(t){this._analyser.smoothingTimeConstant=t}}),Object.defineProperty(t.Analyser.prototype,"minDecibels",{get:function(){return this._analyser.minDecibels},set:function(t){this._analyser.minDecibels=t}}),Object.defineProperty(t.Analyser.prototype,"maxDecibels",{get:function(){return this._analyser.maxDecibels},set:function(t){this._analyser.maxDecibels=t}}),t.Analyser.prototype.dispose=function(){t.prototype.dispose.call(this),this._analyser.disconnect(),this._analyser=null,this._buffer=null},t.Analyser}),e(function(t){return t.Compressor=function(){var e=this.optionsObject(arguments,["threshold","ratio"],t.Compressor.defaults);this._compressor=this.input=this.output=this.context.createDynamicsCompressor(),this.threshold=this._compressor.threshold,this.attack=new t.Param(this._compressor.attack,t.Type.Time),this.release=new t.Param(this._compressor.release,t.Type.Time),this.knee=this._compressor.knee,this.ratio=this._compressor.ratio,this._readOnly(["knee","release","attack","ratio","threshold"]),this.set(e)},t.extend(t.Compressor),t.Compressor.defaults={ratio:12,threshold:-24,release:.25,attack:.003,knee:30},t.Compressor.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["knee","release","attack","ratio","threshold"]),this._compressor.disconnect(),this._compressor=null,this.attack.dispose(),this.attack=null,this.release.dispose(),this.release=null,this.threshold=null,this.ratio=null,this.knee=null,this},t.Compressor}),e(function(t){return t.Add=function(e){this.createInsOuts(2,0),this._sum=this.input[0]=this.input[1]=this.output=new t.Gain,this._param=this.input[1]=new t.Signal(e),this._param.connect(this._sum)},t.extend(t.Add,t.Signal),t.Add.prototype.dispose=function(){return t.prototype.dispose.call(this),this._sum.dispose(),this._sum=null,this._param.dispose(),this._param=null,this},t.Add}),e(function(t){return t.Multiply=function(e){this.createInsOuts(2,0),this._mult=this.input[0]=this.output=new t.Gain,this._param=this.input[1]=this.output.gain,this._param.value=this.defaultArg(e,0)},t.extend(t.Multiply,t.Signal),t.Multiply.prototype.dispose=function(){return t.prototype.dispose.call(this),this._mult.dispose(),this._mult=null,this._param=null,this},t.Multiply}),e(function(t){return t.Negate=function(){this._multiply=this.input=this.output=new t.Multiply(-1)},t.extend(t.Negate,t.SignalBase),t.Negate.prototype.dispose=function(){return t.prototype.dispose.call(this),this._multiply.dispose(),this._multiply=null,this},t.Negate}),e(function(t){return t.Subtract=function(e){this.createInsOuts(2,0),this._sum=this.input[0]=this.output=new t.Gain,this._neg=new t.Negate,this._param=this.input[1]=new t.Signal(e),this._param.chain(this._neg,this._sum)},t.extend(t.Subtract,t.Signal),t.Subtract.prototype.dispose=function(){return t.prototype.dispose.call(this),this._neg.dispose(),this._neg=null,this._sum.disconnect(),this._sum=null,this._param.dispose(),this._param=null,this},t.Subtract}),e(function(t){return t.GreaterThanZero=function(){this._thresh=this.output=new t.WaveShaper(function(t){return t<=0?0:1},127),this._scale=this.input=new t.Multiply(1e4),this._scale.connect(this._thresh)},t.extend(t.GreaterThanZero,t.SignalBase),t.GreaterThanZero.prototype.dispose=function(){return t.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._thresh.dispose(),this._thresh=null,this},t.GreaterThanZero}),e(function(t){return t.GreaterThan=function(e){this.createInsOuts(2,0),this._param=this.input[0]=new t.Subtract(e),this.input[1]=this._param.input[1],this._gtz=this.output=new t.GreaterThanZero,this._param.connect(this._gtz)},t.extend(t.GreaterThan,t.Signal),t.GreaterThan.prototype.dispose=function(){return t.prototype.dispose.call(this),this._param.dispose(),this._param=null,this._gtz.dispose(),this._gtz=null,this},t.GreaterThan}),e(function(t){return t.Abs=function(){this._abs=this.input=this.output=new t.WaveShaper(function(t){return 0===t?0:Math.abs(t)},127)},t.extend(t.Abs,t.SignalBase),t.Abs.prototype.dispose=function(){return t.prototype.dispose.call(this),this._abs.dispose(),this._abs=null,this},t.Abs}),e(function(t){return t.Modulo=function(e){this.createInsOuts(1,0),this._shaper=new t.WaveShaper(Math.pow(2,16)),this._multiply=new t.Multiply,this._subtract=this.output=new t.Subtract,this._modSignal=new t.Signal(e),this.input.fan(this._shaper,this._subtract),this._modSignal.connect(this._multiply,0,0),this._shaper.connect(this._multiply,0,1),this._multiply.connect(this._subtract,0,1),this._setWaveShaper(e)},t.extend(t.Modulo,t.SignalBase),t.Modulo.prototype._setWaveShaper=function(t){this._shaper.setMap(function(e){var i=Math.floor((e+1e-4)/t);return i})},Object.defineProperty(t.Modulo.prototype,"value",{get:function(){return this._modSignal.value},set:function(t){this._modSignal.value=t,this._setWaveShaper(t)}}),t.Modulo.prototype.dispose=function(){return t.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this._multiply.dispose(),this._multiply=null,this._subtract.dispose(),this._subtract=null,this._modSignal.dispose(),this._modSignal=null,this},t.Modulo}),e(function(t){return t.AudioToGain=function(){this._norm=this.input=this.output=new t.WaveShaper(function(t){return(t+1)/2})},t.extend(t.AudioToGain,t.SignalBase),t.AudioToGain.prototype.dispose=function(){return t.prototype.dispose.call(this),this._norm.dispose(),this._norm=null,this},t.AudioToGain}),e(function(t){function e(t,e,i){var n=new t;return i._eval(e[0]).connect(n,0,0),i._eval(e[1]).connect(n,0,1),n}function i(t,e,i){var n=new t;return i._eval(e[0]).connect(n,0,0),n}function n(t){return t?parseFloat(t):void 0}function s(t){return t&&t.args?parseFloat(t.args):void 0}return t.Expr=function(){var t=this._replacements(Array.prototype.slice.call(arguments)),e=this._parseInputs(t);this._nodes=[],this.input=new Array(e);for(var i=0;i<e;i++)this.input[i]=this.context.createGain();var n,s=this._parseTree(t);try{n=this._eval(s)}catch(e){throw this._disposeNodes(),new Error("Tone.Expr: Could evaluate expression: "+t);
}this.output=n},t.extend(t.Expr,t.SignalBase),t.Expr._Expressions={value:{signal:{regexp:/^\d+\.\d+|^\d+/,method:function(e){var i=new t.Signal(n(e));return i}},input:{regexp:/^\$\d/,method:function(t,e){return e.input[n(t.substr(1))]}}},glue:{"(":{regexp:/^\(/},")":{regexp:/^\)/},",":{regexp:/^,/}},func:{abs:{regexp:/^abs/,method:i.bind(this,t.Abs)},mod:{regexp:/^mod/,method:function(e,i){var n=s(e[1]),o=new t.Modulo(n);return i._eval(e[0]).connect(o),o}},pow:{regexp:/^pow/,method:function(e,i){var n=s(e[1]),o=new t.Pow(n);return i._eval(e[0]).connect(o),o}},a2g:{regexp:/^a2g/,method:function(e,i){var n=new t.AudioToGain;return i._eval(e[0]).connect(n),n}}},binary:{"+":{regexp:/^\+/,precedence:1,method:e.bind(this,t.Add)},"-":{regexp:/^\-/,precedence:1,method:function(n,s){return 1===n.length?i(t.Negate,n,s):e(t.Subtract,n,s)}},"*":{regexp:/^\*/,precedence:0,method:e.bind(this,t.Multiply)}},unary:{"-":{regexp:/^\-/,method:i.bind(this,t.Negate)},"!":{regexp:/^\!/,method:i.bind(this,t.NOT)}}},t.Expr.prototype._parseInputs=function(t){var e=t.match(/\$\d/g),i=0;if(null!==e)for(var n=0;n<e.length;n++){var s=parseInt(e[n].substr(1))+1;i=Math.max(i,s)}return i},t.Expr.prototype._replacements=function(t){for(var e=t.shift(),i=0;i<t.length;i++)e=e.replace(/\%/i,t[i]);return e},t.Expr.prototype._tokenize=function(e){function i(e){for(var i in t.Expr._Expressions){var n=t.Expr._Expressions[i];for(var s in n){var o=n[s],r=o.regexp,a=e.match(r);if(null!==a)return{type:i,value:a[0],method:o.method}}}throw new SyntaxError("Tone.Expr: Unexpected token "+e)}for(var n=-1,s=[];e.length>0;){e=e.trim();var o=i(e);s.push(o),e=e.substr(o.value.length)}return{next:function(){return s[++n]},peek:function(){return s[n+1]}}},t.Expr.prototype._parseTree=function(e){function i(t,e){return!u(t)&&"glue"===t.type&&t.value===e}function n(e,i,n){var s=!1,o=t.Expr._Expressions[i];if(!u(e))for(var r in o){var a=o[r];if(a.regexp.test(e.value)){if(u(n))return!0;if(a.precedence===n)return!0}}return s}function s(t){u(t)&&(t=5);var e;e=t<0?o():s(t-1);for(var i=l.peek();n(i,"binary",t);)i=l.next(),e={operator:i.value,method:i.method,args:[e,s(t-1)]},i=l.peek();return e}function o(){var t,e;return t=l.peek(),n(t,"unary")?(t=l.next(),e=o(),{operator:t.value,method:t.method,args:[e]}):r()}function r(){var t,e;if(t=l.peek(),u(t))throw new SyntaxError("Tone.Expr: Unexpected termination of expression");if("func"===t.type)return t=l.next(),a(t);if("value"===t.type)return t=l.next(),{method:t.method,args:t.value};if(i(t,"(")){if(l.next(),e=s(),t=l.next(),!i(t,")"))throw new SyntaxError("Expected )");return e}throw new SyntaxError("Tone.Expr: Parse error, cannot process token "+t.value)}function a(t){var e,n=[];if(e=l.next(),!i(e,"("))throw new SyntaxError('Tone.Expr: Expected ( in a function call "'+t.value+'"');if(e=l.peek(),i(e,")")||(n=h()),e=l.next(),!i(e,")"))throw new SyntaxError('Tone.Expr: Expected ) in a function call "'+t.value+'"');return{method:t.method,args:n,name:name}}function h(){for(var t,e,n=[];;){if(e=s(),u(e))break;if(n.push(e),t=l.peek(),!i(t,","))break;l.next()}return n}var l=this._tokenize(e),u=this.isUndef.bind(this);return s()},t.Expr.prototype._eval=function(t){if(!this.isUndef(t)){var e=t.method(t.args,this);return this._nodes.push(e),e}},t.Expr.prototype._disposeNodes=function(){for(var t=0;t<this._nodes.length;t++){var e=this._nodes[t];this.isFunction(e.dispose)?e.dispose():this.isFunction(e.disconnect)&&e.disconnect(),e=null,this._nodes[t]=null}this._nodes=null},t.Expr.prototype.dispose=function(){t.prototype.dispose.call(this),this._disposeNodes()},t.Expr}),e(function(t){return t.EqualPowerGain=function(){this._eqPower=this.input=this.output=new t.WaveShaper(function(t){return Math.abs(t)<.001?0:this.equalPowerScale(t)}.bind(this),4096)},t.extend(t.EqualPowerGain,t.SignalBase),t.EqualPowerGain.prototype.dispose=function(){return t.prototype.dispose.call(this),this._eqPower.dispose(),this._eqPower=null,this},t.EqualPowerGain}),e(function(t){return t.CrossFade=function(e){this.createInsOuts(2,1),this.a=this.input[0]=new t.Gain,this.b=this.input[1]=new t.Gain,this.fade=new t.Signal(this.defaultArg(e,.5),t.Type.NormalRange),this._equalPowerA=new t.EqualPowerGain,this._equalPowerB=new t.EqualPowerGain,this._invert=new t.Expr("1 - $0"),this.a.connect(this.output),this.b.connect(this.output),this.fade.chain(this._equalPowerB,this.b.gain),this.fade.chain(this._invert,this._equalPowerA,this.a.gain),this._readOnly("fade")},t.extend(t.CrossFade),t.CrossFade.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable("fade"),this._equalPowerA.dispose(),this._equalPowerA=null,this._equalPowerB.dispose(),this._equalPowerB=null,this.fade.dispose(),this.fade=null,this._invert.dispose(),this._invert=null,this.a.dispose(),this.a=null,this.b.dispose(),this.b=null,this},t.CrossFade}),e(function(t){return t.Filter=function(){this.createInsOuts(1,1);var e=this.optionsObject(arguments,["frequency","type","rolloff"],t.Filter.defaults);this._filters=[],this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(0,t.Type.Cents),this.gain=new t.Signal({value:e.gain,convert:!1}),this.Q=new t.Signal(e.Q),this._type=e.type,this._rolloff=e.rolloff,this.rolloff=e.rolloff,this._readOnly(["detune","frequency","gain","Q"])},t.extend(t.Filter),t.Filter.defaults={type:"lowpass",frequency:350,rolloff:-12,Q:1,gain:0},Object.defineProperty(t.Filter.prototype,"type",{get:function(){return this._type},set:function(t){var e=["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"];if(e.indexOf(t)===-1)throw new TypeError("Tone.Filter: invalid type "+t);this._type=t;for(var i=0;i<this._filters.length;i++)this._filters[i].type=t}}),Object.defineProperty(t.Filter.prototype,"rolloff",{get:function(){return this._rolloff},set:function(t){t=parseInt(t,10);var e=[-12,-24,-48,-96],i=e.indexOf(t);if(i===-1)throw new RangeError("Tone.Filter: rolloff can only be -12, -24, -48 or -96");i+=1,this._rolloff=t,this.input.disconnect();for(var n=0;n<this._filters.length;n++)this._filters[n].disconnect(),this._filters[n]=null;this._filters=new Array(i);for(var s=0;s<i;s++){var o=this.context.createBiquadFilter();o.type=this._type,this.frequency.connect(o.frequency),this.detune.connect(o.detune),this.Q.connect(o.Q),this.gain.connect(o.gain),this._filters[s]=o}var r=[this.input].concat(this._filters).concat([this.output]);this.connectSeries.apply(this,r)}}),t.Filter.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e=0;e<this._filters.length;e++)this._filters[e].disconnect(),this._filters[e]=null;return this._filters=null,this._writable(["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.frequency=null,this.Q=null,this.detune.dispose(),this.detune=null,this.gain.dispose(),this.gain=null,this},t.Filter}),e(function(t){return t.MultibandSplit=function(){var e=this.optionsObject(arguments,["lowFrequency","highFrequency"],t.MultibandSplit.defaults);this.input=new t.Gain,this.output=new Array(3),this.low=this.output[0]=new t.Filter(0,"lowpass"),this._lowMidFilter=new t.Filter(0,"highpass"),this.mid=this.output[1]=new t.Filter(0,"lowpass"),this.high=this.output[2]=new t.Filter(0,"highpass"),this.lowFrequency=new t.Signal(e.lowFrequency,t.Type.Frequency),this.highFrequency=new t.Signal(e.highFrequency,t.Type.Frequency),this.Q=new t.Signal(e.Q),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.connect(this.low.frequency),this.lowFrequency.connect(this._lowMidFilter.frequency),this.highFrequency.connect(this.mid.frequency),this.highFrequency.connect(this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),this._readOnly(["high","mid","low","highFrequency","lowFrequency"])},t.extend(t.MultibandSplit),t.MultibandSplit.defaults={lowFrequency:400,highFrequency:2500,Q:1},t.MultibandSplit.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this.low=null,this._lowMidFilter.dispose(),this._lowMidFilter=null,this.mid.dispose(),this.mid=null,this.high.dispose(),this.high=null,this.lowFrequency.dispose(),this.lowFrequency=null,this.highFrequency.dispose(),this.highFrequency=null,this.Q.dispose(),this.Q=null,this},t.MultibandSplit}),e(function(t){return t.EQ3=function(){var e=this.optionsObject(arguments,["low","mid","high"],t.EQ3.defaults);this.output=new t.Gain,this._multibandSplit=this.input=new t.MultibandSplit({lowFrequency:e.lowFrequency,highFrequency:e.highFrequency}),this._lowGain=new t.Gain(e.low,t.Type.Decibels),this._midGain=new t.Gain(e.mid,t.Type.Decibels),this._highGain=new t.Gain(e.high,t.Type.Decibels),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),this._readOnly(["low","mid","high","lowFrequency","highFrequency"])},t.extend(t.EQ3),t.EQ3.defaults={low:0,mid:0,high:0,lowFrequency:400,highFrequency:2500},t.EQ3.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this._multibandSplit=null,this.lowFrequency=null,this.highFrequency=null,this._lowGain.dispose(),this._lowGain=null,this._midGain.dispose(),this._midGain=null,this._highGain.dispose(),this._highGain=null,this.low=null,this.mid=null,this.high=null,this.Q=null,this},t.EQ3}),e(function(t){return t.Scale=function(e,i){this._outputMin=this.defaultArg(e,0),this._outputMax=this.defaultArg(i,1),this._scale=this.input=new t.Multiply(1),this._add=this.output=new t.Add(0),this._scale.connect(this._add),this._setRange()},t.extend(t.Scale,t.SignalBase),Object.defineProperty(t.Scale.prototype,"min",{get:function(){return this._outputMin},set:function(t){this._outputMin=t,this._setRange()}}),Object.defineProperty(t.Scale.prototype,"max",{get:function(){return this._outputMax},set:function(t){this._outputMax=t,this._setRange()}}),t.Scale.prototype._setRange=function(){this._add.value=this._outputMin,this._scale.value=this._outputMax-this._outputMin},t.Scale.prototype.dispose=function(){return t.prototype.dispose.call(this),this._add.dispose(),this._add=null,this._scale.dispose(),this._scale=null,this},t.Scale}),e(function(t){return t.ScaleExp=function(e,i,n){this._scale=this.output=new t.Scale(e,i),this._exp=this.input=new t.Pow(this.defaultArg(n,2)),this._exp.connect(this._scale)},t.extend(t.ScaleExp,t.SignalBase),Object.defineProperty(t.ScaleExp.prototype,"exponent",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),Object.defineProperty(t.ScaleExp.prototype,"min",{get:function(){return this._scale.min},set:function(t){this._scale.min=t}}),Object.defineProperty(t.ScaleExp.prototype,"max",{get:function(){return this._scale.max},set:function(t){this._scale.max=t}}),t.ScaleExp.prototype.dispose=function(){return t.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._exp.dispose(),this._exp=null,this},t.ScaleExp}),e(function(t){return t.Delay=function(){var e=this.optionsObject(arguments,["delayTime","maxDelay"],t.Delay.defaults);this._delayNode=this.input=this.output=this.context.createDelay(this.toSeconds(e.maxDelay)),this.delayTime=new t.Param({param:this._delayNode.delayTime,units:t.Type.Time,value:e.delayTime}),this._readOnly("delayTime")},t.extend(t.Delay),t.Delay.defaults={maxDelay:1,delayTime:0},t.Delay.prototype.dispose=function(){return t.Param.prototype.dispose.call(this),this._delayNode.disconnect(),this._delayNode=null,this._writable("delayTime"),this.delayTime=null,this},t.Delay}),e(function(t){return t.FeedbackCombFilter=function(){var e=this.optionsObject(arguments,["delayTime","resonance"],t.FeedbackCombFilter.defaults);this._delay=this.input=this.output=new t.Delay(e.delayTime),this.delayTime=this._delay.delayTime,this._feedback=new t.Gain(e.resonance,t.Type.NormalRange),this.resonance=this._feedback.gain,this._delay.chain(this._feedback,this._delay),this._readOnly(["resonance","delayTime"])},t.extend(t.FeedbackCombFilter),t.FeedbackCombFilter.defaults={delayTime:.1,resonance:.5},t.FeedbackCombFilter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["resonance","delayTime"]),this._delay.dispose(),this._delay=null,this.delayTime=null,this._feedback.dispose(),this._feedback=null,this.resonance=null,this},t.FeedbackCombFilter}),e(function(t){return t.Follower=function(){this.createInsOuts(1,1);var e=this.optionsObject(arguments,["attack","release"],t.Follower.defaults);this._abs=new t.Abs,this._filter=this.context.createBiquadFilter(),this._filter.type="lowpass",this._filter.frequency.value=0,this._filter.Q.value=-100,this._frequencyValues=new t.WaveShaper,this._sub=new t.Subtract,this._delay=new t.Delay(this.blockTime),this._mult=new t.Multiply(1e4),this._attack=e.attack,this._release=e.release,this.input.chain(this._abs,this._filter,this.output),this._abs.connect(this._sub,0,1),this._filter.chain(this._delay,this._sub),this._sub.chain(this._mult,this._frequencyValues,this._filter.frequency),this._setAttackRelease(this._attack,this._release)},t.extend(t.Follower),t.Follower.defaults={attack:.05,release:.5},t.Follower.prototype._setAttackRelease=function(e,i){var n=this.blockTime;e=t.Time(e).toFrequency(),i=t.Time(i).toFrequency(),e=Math.max(e,n),i=Math.max(i,n),this._frequencyValues.setMap(function(t){return t<=0?e:i})},Object.defineProperty(t.Follower.prototype,"attack",{get:function(){return this._attack},set:function(t){this._attack=t,this._setAttackRelease(this._attack,this._release)}}),Object.defineProperty(t.Follower.prototype,"release",{get:function(){return this._release},set:function(t){this._release=t,this._setAttackRelease(this._attack,this._release)}}),t.Follower.prototype.connect=t.Signal.prototype.connect,t.Follower.prototype.dispose=function(){return t.prototype.dispose.call(this),this._filter.disconnect(),this._filter=null,this._frequencyValues.disconnect(),this._frequencyValues=null,this._delay.dispose(),this._delay=null,this._sub.disconnect(),this._sub=null,this._abs.dispose(),this._abs=null,this._mult.dispose(),this._mult=null,this._curve=null,this},t.Follower}),e(function(t){return t.ScaledEnvelope=function(){var e=this.optionsObject(arguments,["attack","decay","sustain","release"],t.Envelope.defaults);t.Envelope.call(this,e),e=this.defaultArg(e,t.ScaledEnvelope.defaults),this._exp=this.output=new t.Pow(e.exponent),this._scale=this.output=new t.Scale(e.min,e.max),this._sig.chain(this._exp,this._scale)},t.extend(t.ScaledEnvelope,t.Envelope),t.ScaledEnvelope.defaults={min:0,max:1,exponent:1},Object.defineProperty(t.ScaledEnvelope.prototype,"min",{get:function(){return this._scale.min},set:function(t){this._scale.min=t}}),Object.defineProperty(t.ScaledEnvelope.prototype,"max",{get:function(){return this._scale.max},set:function(t){this._scale.max=t}}),Object.defineProperty(t.ScaledEnvelope.prototype,"exponent",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),t.ScaledEnvelope.prototype.dispose=function(){return t.Envelope.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._exp.dispose(),this._exp=null,this},t.ScaledEnvelope}),e(function(t){return t.FrequencyEnvelope=function(){var e=this.optionsObject(arguments,["attack","decay","sustain","release"],t.Envelope.defaults);t.ScaledEnvelope.call(this,e),e=this.defaultArg(e,t.FrequencyEnvelope.defaults),this._octaves=e.octaves,this.baseFrequency=e.baseFrequency,this.octaves=e.octaves},t.extend(t.FrequencyEnvelope,t.Envelope),t.FrequencyEnvelope.defaults={baseFrequency:200,octaves:4,exponent:2},Object.defineProperty(t.FrequencyEnvelope.prototype,"baseFrequency",{get:function(){return this._scale.min},set:function(t){this._scale.min=this.toFrequency(t),this.octaves=this._octaves}}),Object.defineProperty(t.FrequencyEnvelope.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._scale.max=this.baseFrequency*Math.pow(2,t)}}),Object.defineProperty(t.FrequencyEnvelope.prototype,"exponent",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),t.FrequencyEnvelope.prototype.dispose=function(){return t.ScaledEnvelope.prototype.dispose.call(this),this},t.FrequencyEnvelope}),e(function(t){return t.Gate=function(){this.createInsOuts(1,1);var e=this.optionsObject(arguments,["threshold","attack","release"],t.Gate.defaults);this._follower=new t.Follower(e.attack,e.release),this._gt=new t.GreaterThan(this.dbToGain(e.threshold)),this.input.connect(this.output),this.input.chain(this._gt,this._follower,this.output.gain)},t.extend(t.Gate),t.Gate.defaults={attack:.1,release:.1,threshold:-40},Object.defineProperty(t.Gate.prototype,"threshold",{get:function(){return this.gainToDb(this._gt.value)},set:function(t){this._gt.value=this.dbToGain(t)}}),Object.defineProperty(t.Gate.prototype,"attack",{get:function(){return this._follower.attack},set:function(t){this._follower.attack=t}}),Object.defineProperty(t.Gate.prototype,"release",{get:function(){return this._follower.release},set:function(t){this._follower.release=t}}),t.Gate.prototype.dispose=function(){return t.prototype.dispose.call(this),this._follower.dispose(),this._gt.dispose(),this._follower=null,this._gt=null,this},t.Gate}),e(function(t){return t.TimelineState=function(e){t.Timeline.call(this),this._initial=e},t.extend(t.TimelineState,t.Timeline),t.TimelineState.prototype.getStateAtTime=function(t){var e=this.getEvent(t);return null!==e?e.state:this._initial},t.TimelineState.prototype.setStateAtTime=function(t,e){this.addEvent({state:t,time:e})},t.TimelineState}),e(function(t){return t.Emitter=function(){this._events={}},t.extend(t.Emitter),t.Emitter.prototype.on=function(t,e){for(var i=t.split(/\W+/),n=0;n<i.length;n++){var s=i[n];this._events.hasOwnProperty(s)||(this._events[s]=[]),this._events[s].push(e)}return this},t.Emitter.prototype.off=function(e,i){for(var n=e.split(/\W+/),s=0;s<n.length;s++)if(e=n[s],this._events.hasOwnProperty(e))if(t.prototype.isUndef(i))this._events[e]=[];else for(var o=this._events[e],r=0;r<o.length;r++)o[r]===i&&o.splice(r,1);return this},t.Emitter.prototype.emit=function(t){if(this._events){var e=Array.prototype.slice.call(arguments,1);if(this._events.hasOwnProperty(t))for(var i=this._events[t],n=0,s=i.length;n<s;n++)i[n].apply(this,e)}return this},t.Emitter.mixin=function(e){var i=["on","off","emit"];e._events={};for(var n=0;n<i.length;n++){var s=i[n],o=t.Emitter.prototype[s];e[s]=o}},t.Emitter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._events=null,this},t.Emitter}),e(function(t){t.Clock=function(){t.Emitter.call(this);var e=this.optionsObject(arguments,["callback","frequency"],t.Clock.defaults);this.callback=e.callback,this._lookAhead="auto",this._computedLookAhead=.02,this._nextTick=-1,this._lastUpdate=-1,this.frequency=new t.TimelineSignal(e.frequency,t.Type.Frequency),this.ticks=0,this._state=new t.TimelineState(t.State.Stopped),this._boundLoop=this._loop.bind(this),t.Clock._worker.addEventListener("message",this._boundLoop),this._readOnly("frequency")},t.extend(t.Clock,t.Emitter),t.Clock.defaults={callback:t.noOp,frequency:1,lookAhead:"auto"},Object.defineProperty(t.Clock.prototype,"state",{get:function(){return this._state.getStateAtTime(this.now())}}),Object.defineProperty(t.Clock.prototype,"lookAhead",{get:function(){return this._lookAhead},set:function(t){"auto"===t?this._lookAhead="auto":this._lookAhead=this.toSeconds(t)}}),t.Clock.prototype.start=function(e,i){return e=this.toSeconds(e),this._state.getStateAtTime(e)!==t.State.Started&&this._state.addEvent({state:t.State.Started,time:e,offset:i}),this},t.Clock.prototype.stop=function(e){return e=this.toSeconds(e),this._state.cancel(e),this._state.setStateAtTime(t.State.Stopped,e),this},t.Clock.prototype.pause=function(e){return e=this.toSeconds(e),this._state.getStateAtTime(e)===t.State.Started&&this._state.setStateAtTime(t.State.Paused,e),this},t.Clock.prototype._loop=function(){if("auto"===this._lookAhead){var e=this.now();if(this._lastUpdate!==-1){var i=e-this._lastUpdate;i=Math.min(.2,i),this._computedLookAhead=(9*this._computedLookAhead+i)/10}this._lastUpdate=e}else this._computedLookAhead=this._lookAhead;var n=this.now(),s=2*this._computedLookAhead,o=this._state.getEvent(n+s),r=t.State.Stopped;if(o&&(r=o.state,this._nextTick===-1&&r===t.State.Started&&(this._nextTick=o.time,this.isUndef(o.offset)||(this.ticks=o.offset),this.emit("start",o.time,this.ticks))),r===t.State.Started)for(;n+s>this._nextTick;){var a=this._nextTick;this._nextTick+=1/this.frequency.getValueAtTime(this._nextTick),this.callback(a),this.ticks++}else r===t.State.Stopped?(o&&0!==this.ticks&&this.emit("stop",o.time),this._nextTick=-1,this.ticks=0):r===t.State.Paused&&(this._nextTick!==-1&&this.emit("pause",o.time),this._nextTick=-1)},t.Clock.prototype.getStateAtTime=function(t){return t=this.toSeconds(t),this._state.getStateAtTime(t)},t.Clock.prototype.dispose=function(){t.Emitter.prototype.dispose.call(this),t.TimelineState.prototype.dispose.call(this),t.Clock._worker.removeEventListener("message",this._boundLoop),this._writable("frequency"),this.frequency.dispose(),this.frequency=null,this._boundLoop=null,this._nextTick=1/0,this.callback=null,this._state.dispose(),this._state=null},window.URL=window.URL||window.webkitURL;var e=new Blob(["setInterval(function(){self.postMessage('tick')}, 20)"]),i=URL.createObjectURL(e);return t.Clock._worker=new Worker(i),t.Clock}),e(function(t){t.IntervalTimeline=function(){this._root=null,this._length=0},t.extend(t.IntervalTimeline),t.IntervalTimeline.prototype.addEvent=function(t){if(this.isUndef(t.time)||this.isUndef(t.duration))throw new Error("Tone.IntervalTimeline: events must have time and duration parameters");var i=new e(t.time,t.time+t.duration,t);for(null===this._root?this._root=i:this._root.insert(i),this._length++;null!==i;)i.updateHeight(),i.updateMax(),this._rebalance(i),i=i.parent;return this},t.IntervalTimeline.prototype.removeEvent=function(t){if(null!==this._root){var e=[];this._root.search(t.time,e);for(var i=0;i<e.length;i++){var n=e[i];if(n.event===t){this._removeNode(n),this._length--;break}}}return this},Object.defineProperty(t.IntervalTimeline.prototype,"length",{get:function(){return this._length}}),t.IntervalTimeline.prototype.cancel=function(t){return this.forEachAfter(t,function(t){this.removeEvent(t)}.bind(this)),this},t.IntervalTimeline.prototype._setRoot=function(t){this._root=t,null!==this._root&&(this._root.parent=null)},t.IntervalTimeline.prototype._replaceNodeInParent=function(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)},t.IntervalTimeline.prototype._removeNode=function(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{var e,i,n=t.getBalance();if(n>0)if(null===t.left.right)e=t.left,e.right=t.right,i=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent.right=e.left,i=e.parent,e.left=t.left,e.right=t.right}else if(null===t.right.left)e=t.right,e.left=t.left,i=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent=e.parent,e.parent.left=e.right,i=e.parent,e.left=t.left,e.right=t.right}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),this._rebalance(i)}t.dispose()},t.IntervalTimeline.prototype._rotateLeft=function(t){var e=t.parent,i=t.isLeftChild(),n=t.right;t.right=n.left,n.left=t,null!==e?i?e.left=n:e.right=n:this._setRoot(n)},t.IntervalTimeline.prototype._rotateRight=function(t){var e=t.parent,i=t.isLeftChild(),n=t.left;t.left=n.right,n.right=t,null!==e?i?e.left=n:e.right=n:this._setRoot(n)},t.IntervalTimeline.prototype._rebalance=function(t){var e=t.getBalance();e>1?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))},t.IntervalTimeline.prototype.getEvent=function(t){if(null!==this._root){var e=[];if(this._root.search(t,e),e.length>0){for(var i=e[0],n=1;n<e.length;n++)e[n].low>i.low&&(i=e[n]);return i.event}}return null},t.IntervalTimeline.prototype.forEach=function(t){if(null!==this._root){var e=[];null!==this._root&&this._root.traverse(function(t){e.push(t)});for(var i=0;i<e.length;i++){var n=e[i].event;n&&t(n)}}return this},t.IntervalTimeline.prototype.forEachAtTime=function(t,e){if(null!==this._root){var i=[];this._root.search(t,i);for(var n=i.length-1;n>=0;n--){var s=i[n].event;s&&e(s)}}return this},t.IntervalTimeline.prototype.forEachAfter=function(t,e){if(null!==this._root){var i=[];this._root.searchAfter(t,i);for(var n=i.length-1;n>=0;n--){var s=i[n].event;s&&e(s)}}return this},t.IntervalTimeline.prototype.dispose=function(){var t=[];null!==this._root&&this._root.traverse(function(e){t.push(e)});for(var e=0;e<t.length;e++)t[e].dispose();return t=null,this._root=null,this};var e=function(t,e,i){this.event=i,this.low=t,this.high=e,this.max=this.high,this._left=null,this._right=null,this.parent=null,this.height=0};return e.prototype.insert=function(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)},e.prototype.search=function(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))},e.prototype.searchAfter=function(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)},e.prototype.traverse=function(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)},e.prototype.updateHeight=function(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0},e.prototype.updateMax=function(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))},e.prototype.getBalance=function(){var t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t},e.prototype.isLeftChild=function(){return null!==this.parent&&this.parent.left===this},Object.defineProperty(e.prototype,"left",{get:function(){return this._left},set:function(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}}),Object.defineProperty(e.prototype,"right",{get:function(){return this._right},set:function(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}}),e.prototype.dispose=function(){this.parent=null,this._left=null,this._right=null,this.event=null},t.IntervalTimeline}),e(function(t){t.Transport=function(){t.Emitter.call(this),this.loop=!1,this._loopStart=0,this._loopEnd=0,this._ppq=e.defaults.PPQ,this._clock=new t.Clock({callback:this._processTick.bind(this),frequency:0}),this._bindClockEvents(),this.bpm=this._clock.frequency,this.bpm._toUnits=this._toUnits.bind(this),this.bpm._fromUnits=this._fromUnits.bind(this),this.bpm.units=t.Type.BPM,this.bpm.value=e.defaults.bpm,this._readOnly("bpm"),this._timeSignature=e.defaults.timeSignature,this._scheduledEvents={},this._eventID=0,this._timeline=new t.Timeline,this._repeatedEvents=new t.IntervalTimeline,this._onceEvents=new t.Timeline,this._syncedSignals=[],this._swingTicks=e.defaults.PPQ/2,this._swingAmount=0},t.extend(t.Transport,t.Emitter),t.Transport.defaults={bpm:120,swing:0,swingSubdivision:"8n",timeSignature:4,loopStart:0,loopEnd:"4m",PPQ:192},t.Transport.prototype._processTick=function(e){var i=this._clock.ticks;if(this._swingAmount>0&&i%this._ppq!==0&&i%(2*this._swingTicks)!==0){var n=i%(2*this._swingTicks)/(2*this._swingTicks),s=Math.sin(n*Math.PI)*this._swingAmount;e+=t.Time(2*this._swingTicks/3,"i").eval()*s}this.loop&&i===this._loopEnd&&(this.emit("stop",e),this._clock.ticks=this._loopStart,i=this._loopStart,this.emit("start",e,this.seconds),this.emit("loop",e)),this._onceEvents.forEachBefore(i,function(t){t.callback(e)}),this._onceEvents.cancelBefore(i),this._timeline.forEachAtTime(i,function(t){t.callback(e)}),this._repeatedEvents.forEachAtTime(i,function(t){(i-t.time)%t.interval===0&&t.callback(e)})},t.Transport.prototype.schedule=function(t,e){var i={time:this.toTicks(e),callback:t},n=this._eventID++;return this._scheduledEvents[n.toString()]={event:i,timeline:this._timeline},this._timeline.addEvent(i),n},t.Transport.prototype.scheduleRepeat=function(t,e,i,n){if(e<=0)throw new Error("Tone.Transport: repeat events must have an interval larger than 0");var s={time:this.toTicks(i),duration:this.toTicks(this.defaultArg(n,1/0)),interval:this.toTicks(e),callback:t},o=this._eventID++;return this._scheduledEvents[o.toString()]={event:s,timeline:this._repeatedEvents},this._repeatedEvents.addEvent(s),o},t.Transport.prototype.scheduleOnce=function(t,e){var i={time:this.toTicks(e),callback:t},n=this._eventID++;return this._scheduledEvents[n.toString()]={event:i,timeline:this._onceEvents},this._onceEvents.addEvent(i),n},t.Transport.prototype.clear=function(t){if(this._scheduledEvents.hasOwnProperty(t)){var e=this._scheduledEvents[t.toString()];e.timeline.removeEvent(e.event),delete this._scheduledEvents[t.toString()]}return this},t.Transport.prototype.cancel=function(t){return t=this.defaultArg(t,0),t=this.toTicks(t),this._timeline.cancel(t),this._onceEvents.cancel(t),this._repeatedEvents.cancel(t),this},t.Transport.prototype._bindClockEvents=function(){this._clock.on("start",function(e,i){i=t.Time(this._clock.ticks,"i").toSeconds(),this.emit("start",e,i)}.bind(this)),this._clock.on("stop",function(t){this.emit("stop",t)}.bind(this)),this._clock.on("pause",function(t){this.emit("pause",t)}.bind(this))},Object.defineProperty(t.Transport.prototype,"state",{get:function(){return this._clock.getStateAtTime(this.now())}}),t.Transport.prototype.start=function(t,e){return this.isUndef(e)||(e=this.toTicks(e)),this._clock.start(t,e),this},t.Transport.prototype.stop=function(t){return this._clock.stop(t),this},t.Transport.prototype.pause=function(t){return this._clock.pause(t),this},Object.defineProperty(t.Transport.prototype,"timeSignature",{get:function(){return this._timeSignature},set:function(t){this.isArray(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}}),Object.defineProperty(t.Transport.prototype,"loopStart",{get:function(){return t.TransportTime(this._loopStart,"i").toSeconds()},set:function(t){this._loopStart=this.toTicks(t)}}),Object.defineProperty(t.Transport.prototype,"loopEnd",{get:function(){return t.TransportTime(this._loopEnd,"i").toSeconds()},set:function(t){this._loopEnd=this.toTicks(t)}}),t.Transport.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(t.Transport.prototype,"swing",{get:function(){return this._swingAmount},set:function(t){this._swingAmount=t}}),Object.defineProperty(t.Transport.prototype,"swingSubdivision",{get:function(){return t.Time(this._swingTicks,"i").toNotation()},set:function(t){this._swingTicks=this.toTicks(t)}}),Object.defineProperty(t.Transport.prototype,"position",{get:function(){return t.TransportTime(this.ticks,"i").toBarsBeatsSixteenths()},set:function(t){var e=this.toTicks(t);this.ticks=e}}),Object.defineProperty(t.Transport.prototype,"seconds",{get:function(){
return t.TransportTime(this.ticks,"i").toSeconds()},set:function(t){var e=this.toTicks(t);this.ticks=e}}),Object.defineProperty(t.Transport.prototype,"progress",{get:function(){return this.loop?(this.ticks-this._loopStart)/(this._loopEnd-this._loopStart):0}}),Object.defineProperty(t.Transport.prototype,"ticks",{get:function(){return this._clock.ticks},set:function(e){var i=this.now();this.state===t.State.Started?(this.emit("stop",i),this._clock.ticks=e,this.emit("start",i,this.seconds)):this._clock.ticks=e}}),Object.defineProperty(t.Transport.prototype,"PPQ",{get:function(){return this._ppq},set:function(t){var e=this.bpm.value;this._ppq=t,this.bpm.value=e}}),t.Transport.prototype._fromUnits=function(t){return 1/(60/t/this.PPQ)},t.Transport.prototype._toUnits=function(t){return t/this.PPQ*60},t.Transport.prototype.nextSubdivision=function(e){e=this.toSeconds(e);var i;if(this.state!==t.State.Started)return 0;i=this._clock._nextTick;var n=t.Time(this.ticks,"i").eval(),s=e-n%e;return 0===s&&(s=e),i+s},t.Transport.prototype.syncSignal=function(e,i){i||(i=0!==e._param.value?e._param.value/this.bpm._param.value:0);var n=new t.Gain(i);return this.bpm.chain(n,e._param),this._syncedSignals.push({ratio:n,signal:e,initial:e._param.value}),e._param.value=0,this},t.Transport.prototype.unsyncSignal=function(t){for(var e=this._syncedSignals.length-1;e>=0;e--){var i=this._syncedSignals[e];i.signal===t&&(i.ratio.dispose(),i.signal._param.value=i.initial,this._syncedSignals.splice(e,1))}return this},t.Transport.prototype.dispose=function(){return t.Emitter.prototype.dispose.call(this),this._clock.dispose(),this._clock=null,this._writable("bpm"),this.bpm=null,this._timeline.dispose(),this._timeline=null,this._onceEvents.dispose(),this._onceEvents=null,this._repeatedEvents.dispose(),this._repeatedEvents=null,this};var e=t.Transport;return t._initAudioContext(function(){if("function"==typeof t.Transport)t.Transport=new t.Transport;else{t.Transport.stop();var i=t.Transport.get();t.Transport.dispose(),e.call(t.Transport),t.Transport.set(i)}}),t.Transport}),e(function(t){return t.Volume=function(){var e=this.optionsObject(arguments,["volume"],t.Volume.defaults);this.output=this.input=new t.Gain(e.volume,t.Type.Decibels),this._unmutedVolume=0,this._muted=!1,this.volume=this.output.gain,this._readOnly("volume"),this.mute=e.mute},t.extend(t.Volume),t.Volume.defaults={volume:0,mute:!1},Object.defineProperty(t.Volume.prototype,"mute",{get:function(){return this._muted},set:function(t){!this._muted&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-(1/0)):this._muted&&!t&&(this.volume.value=this._unmutedVolume),this._muted=t}}),t.Volume.prototype.dispose=function(){return this.input.dispose(),t.prototype.dispose.call(this),this._writable("volume"),this.volume.dispose(),this.volume=null,this},t.Volume}),e(function(t){t.Master=function(){this.createInsOuts(1,1),this._volume=this.output=new t.Volume,this.volume=this._volume.volume,this._readOnly("volume"),this.input.chain(this.output,this.context.destination)},t.extend(t.Master),t.Master.defaults={volume:0,mute:!1},Object.defineProperty(t.Master.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.Master.prototype.chain=function(){this.input.disconnect(),this.input.chain.apply(this.input,arguments),arguments[arguments.length-1].connect(this.output)},t.Master.prototype.dispose=function(){t.prototype.dispose.call(this),this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null},t.prototype.toMaster=function(){return this.connect(t.Master),this},AudioNode.prototype.toMaster=function(){return this.connect(t.Master),this};var e=t.Master;return t._initAudioContext(function(){t.prototype.isUndef(t.Master)?(e.prototype.dispose.call(t.Master),e.call(t.Master)):t.Master=new e}),t.Master}),e(function(t){return t.Source=function(e){e=this.defaultArg(e,t.Source.defaults),this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._readOnly("volume"),this._state=new t.TimelineState(t.State.Stopped),this._state.memory=10,this._synced=!1,this._scheduled=[],this._volume.output.output.channelCount=2,this._volume.output.output.channelCountMode="explicit",this.mute=e.mute},t.extend(t.Source),t.Source.defaults={volume:0,mute:!1},Object.defineProperty(t.Source.prototype,"state",{get:function(){return this._synced?t.Transport.state===t.State.Started?this._state.getStateAtTime(t.Transport.seconds):t.State.Stopped:this._state.getStateAtTime(this.now())}}),Object.defineProperty(t.Source.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.Source.prototype._start=t.noOp,t.Source.prototype._stop=t.noOp,t.Source.prototype.start=function(e,i,n){if(e=this.isUndef(e)&&this._synced?t.Transport.seconds:this.toSeconds(e),this._state.getStateAtTime(e)===t.State.Started&&this.stop(e),this._state.setStateAtTime(t.State.Started,e),this._synced){var s=this._state.getEvent(e);s.offset=this.defaultArg(i,0),s.duration=n;var o=t.Transport.schedule(function(t){this._start(t,i,n)}.bind(this),e);this._scheduled.push(o)}else this._start.apply(this,arguments);return this},t.Source.prototype.stop=function(e){if(e=this.isUndef(e)&&this._synced?t.Transport.seconds:this.toSeconds(e),this._state.cancel(e),this._state.setStateAtTime(t.State.Stopped,e),this._synced){var i=t.Transport.schedule(this._stop.bind(this),e);this._scheduled.push(i)}else this._stop.apply(this,arguments);return this},t.Source.prototype.sync=function(){return this._synced=!0,t.Transport.on("start",function(e,i){if(i>0){var n=this._state.getEvent(i);if(n&&n.state===t.State.Started&&n.time!==i){var s,o=i-this.toSeconds(n.time);n.duration&&(s=this.toSeconds(n.duration)-o),this._start(e,this.toSeconds(n.offset)+o,s)}}}.bind(this)),t.Transport.on("stop pause",function(e){this._state.getStateAtTime(t.Transport.seconds)===t.State.Started&&this._stop(e)}.bind(this)),this},t.Source.prototype.unsync=function(){this._synced=!1,t.Transport.off("start stop pause");for(var e=0;e<this._scheduled.length;e++){var i=this._scheduled[e];t.Transport.clear(i)}return this._scheduled=[],this._state.cancel(0),this},t.Source.prototype.dispose=function(){t.prototype.dispose.call(this),this.unsync(),this._scheduled=null,this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null,this._state.dispose(),this._state=null},t.Source}),e(function(t){return t.Oscillator=function(){var e=this.optionsObject(arguments,["frequency","type"],t.Oscillator.defaults);t.Source.call(this,e),this._oscillator=null,this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this._wave=null,this._partials=this.defaultArg(e.partials,[1]),this._phase=e.phase,this._type=null,this.type=e.type,this.phase=this._phase,this._readOnly(["frequency","detune"])},t.extend(t.Oscillator,t.Source),t.Oscillator.defaults={type:"sine",frequency:440,detune:0,phase:0,partials:[]},t.Oscillator.Type={Sine:"sine",Triangle:"triangle",Sawtooth:"sawtooth",Square:"square",Custom:"custom"},t.Oscillator.prototype._start=function(t){this._oscillator=this.context.createOscillator(),this._oscillator.setPeriodicWave(this._wave),this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(this.toSeconds(t))},t.Oscillator.prototype._stop=function(t){return this._oscillator&&(this._oscillator.stop(this.toSeconds(t)),this._oscillator=null),this},t.Oscillator.prototype.syncFrequency=function(){return t.Transport.syncSignal(this.frequency),this},t.Oscillator.prototype.unsyncFrequency=function(){return t.Transport.unsyncSignal(this.frequency),this},Object.defineProperty(t.Oscillator.prototype,"type",{get:function(){return this._type},set:function(t){var e=this._getRealImaginary(t,this._phase),i=this.context.createPeriodicWave(e[0],e[1]);this._wave=i,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),this._type=t}}),t.Oscillator.prototype._getRealImaginary=function(e,i){var n=4096,s=n/2,o=new Float32Array(s),r=new Float32Array(s),a=1;if(e===t.Oscillator.Type.Custom)a=this._partials.length+1,s=a;else{var h=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);h&&(a=parseInt(h[2])+1,e=h[1],a=Math.max(a,2),s=a)}for(var l=1;l<s;++l){var u,c=2/(l*Math.PI);switch(e){case t.Oscillator.Type.Sine:u=l<=a?1:0;break;case t.Oscillator.Type.Square:u=1&l?2*c:0;break;case t.Oscillator.Type.Sawtooth:u=c*(1&l?1:-1);break;case t.Oscillator.Type.Triangle:u=1&l?2*(c*c)*(l-1>>1&1?-1:1):0;break;case t.Oscillator.Type.Custom:u=this._partials[l-1];break;default:throw new TypeError("Tone.Oscillator: invalid type: "+e)}0!==u?(o[l]=-u*Math.sin(i*l),r[l]=u*Math.cos(i*l)):(o[l]=0,r[l]=0)}return[o,r]},t.Oscillator.prototype._inverseFFT=function(t,e,i){for(var n=0,s=t.length,o=0;o<s;o++)n+=t[o]*Math.cos(o*i)+e[o]*Math.sin(o*i);return n},t.Oscillator.prototype._getInitialValue=function(){for(var t=this._getRealImaginary(this._type,0),e=t[0],i=t[1],n=0,s=2*Math.PI,o=0;o<8;o++)n=Math.max(this._inverseFFT(e,i,o/8*s),n);return-this._inverseFFT(e,i,this._phase)/n},Object.defineProperty(t.Oscillator.prototype,"partials",{get:function(){return this._type!==t.Oscillator.Type.Custom?[]:this._partials},set:function(e){this._partials=e,this.type=t.Oscillator.Type.Custom}}),Object.defineProperty(t.Oscillator.prototype,"phase",{get:function(){return this._phase*(180/Math.PI)},set:function(t){this._phase=t*Math.PI/180,this.type=this._type}}),t.Oscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),null!==this._oscillator&&(this._oscillator.disconnect(),this._oscillator=null),this._wave=null,this._writable(["frequency","detune"]),this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this._partials=null,this},t.Oscillator}),e(function(t){return t.Zero=function(){this._gain=this.input=this.output=new t.Gain,t.Zero._zeros.connect(this._gain)},t.extend(t.Zero),t.Zero.prototype.dispose=function(){return t.prototype.dispose.call(this),this._gain.dispose(),this._gain=null,this},t.Zero._zeros=null,t._initAudioContext(function(e){for(var i=e.createBuffer(1,128,e.sampleRate),n=i.getChannelData(0),s=0;s<n.length;s++)n[s]=0;t.Zero._zeros=e.createBufferSource(),t.Zero._zeros.channelCount=1,t.Zero._zeros.channelCountMode="explicit",t.Zero._zeros.buffer=i,t.Zero._zeros.loop=!0,t.Zero._zeros.start(0),t.Zero._zeros.noGC()}),t.Zero}),e(function(t){return t.LFO=function(){var e=this.optionsObject(arguments,["frequency","min","max"],t.LFO.defaults);this._oscillator=new t.Oscillator({frequency:e.frequency,type:e.type}),this.frequency=this._oscillator.frequency,this.amplitude=this._oscillator.volume,this.amplitude.units=t.Type.NormalRange,this.amplitude.value=e.amplitude,this._stoppedSignal=new t.Signal(0,t.Type.AudioRange),this._zeros=new t.Zero,this._stoppedValue=0,this._a2g=new t.AudioToGain,this._scaler=this.output=new t.Scale(e.min,e.max),this._units=t.Type.Default,this.units=e.units,this._oscillator.chain(this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),this._readOnly(["amplitude","frequency"]),this.phase=e.phase},t.extend(t.LFO,t.Oscillator),t.LFO.defaults={type:"sine",min:0,max:1,phase:0,frequency:"4n",amplitude:1,units:t.Type.Default},t.LFO.prototype.start=function(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this},t.LFO.prototype.stop=function(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this},t.LFO.prototype.sync=function(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this},t.LFO.prototype.unsync=function(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this},Object.defineProperty(t.LFO.prototype,"min",{get:function(){return this._toUnits(this._scaler.min)},set:function(t){t=this._fromUnits(t),this._scaler.min=t}}),Object.defineProperty(t.LFO.prototype,"max",{get:function(){return this._toUnits(this._scaler.max)},set:function(t){t=this._fromUnits(t),this._scaler.max=t}}),Object.defineProperty(t.LFO.prototype,"type",{get:function(){return this._oscillator.type},set:function(t){this._oscillator.type=t,this._stoppedValue=this._oscillator._getInitialValue(),this._stoppedSignal.value=this._stoppedValue}}),Object.defineProperty(t.LFO.prototype,"phase",{get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t,this._stoppedValue=this._oscillator._getInitialValue(),this._stoppedSignal.value=this._stoppedValue}}),Object.defineProperty(t.LFO.prototype,"units",{get:function(){return this._units},set:function(t){var e=this.min,i=this.max;this._units=t,this.min=e,this.max=i}}),Object.defineProperty(t.LFO.prototype,"mute",{get:function(){return this._oscillator.mute},set:function(t){this._oscillator.mute=t}}),Object.defineProperty(t.LFO.prototype,"state",{get:function(){return this._oscillator.state}}),t.LFO.prototype.connect=function(e){return e.constructor!==t.Signal&&e.constructor!==t.Param&&e.constructor!==t.TimelineSignal||(this.convert=e.convert,this.units=e.units),t.Signal.prototype.connect.apply(this,arguments),this},t.LFO.prototype._fromUnits=t.Param.prototype._fromUnits,t.LFO.prototype._toUnits=t.Param.prototype._toUnits,t.LFO.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["amplitude","frequency"]),this._oscillator.dispose(),this._oscillator=null,this._stoppedSignal.dispose(),this._stoppedSignal=null,this._zeros.dispose(),this._zeros=null,this._scaler.dispose(),this._scaler=null,this._a2g.dispose(),this._a2g=null,this.frequency=null,this.amplitude=null,this},t.LFO}),e(function(t){return t.Limiter=function(){var e=this.optionsObject(arguments,["threshold"],t.Limiter.defaults);this._compressor=this.input=this.output=new t.Compressor({attack:.001,decay:.001,threshold:e.threshold}),this.threshold=this._compressor.threshold,this._readOnly("threshold")},t.extend(t.Limiter),t.Limiter.defaults={threshold:-12},t.Limiter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._compressor.dispose(),this._compressor=null,this._writable("threshold"),this.threshold=null,this},t.Limiter}),e(function(t){return t.LowpassCombFilter=function(){this.createInsOuts(1,1);var e=this.optionsObject(arguments,["delayTime","resonance","dampening"],t.LowpassCombFilter.defaults);this._delay=this.input=new t.Delay(e.delayTime),this.delayTime=this._delay.delayTime,this._lowpass=this.output=this.context.createBiquadFilter(),this._lowpass.Q.value=-3.0102999566398125,this._lowpass.type="lowpass",this.dampening=new t.Param({param:this._lowpass.frequency,units:t.Type.Frequency,value:e.dampening}),this._feedback=new t.Gain(e.resonance,t.Type.NormalRange),this.resonance=this._feedback.gain,this._delay.chain(this._lowpass,this._feedback,this._delay),this._readOnly(["dampening","resonance","delayTime"])},t.extend(t.LowpassCombFilter),t.LowpassCombFilter.defaults={delayTime:.1,resonance:.5,dampening:3e3},t.LowpassCombFilter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["dampening","resonance","delayTime"]),this.dampening.dispose(),this.dampening=null,this.resonance.dispose(),this.resonance=null,this._delay.dispose(),this._delay=null,this.delayTime=null,this._lowpass.disconnect(),this._lowpass=null,this._feedback.disconnect(),this._feedback=null,this},t.LowpassCombFilter}),e(function(t){return t.Merge=function(){this.createInsOuts(2,0),this.left=this.input[0]=new t.Gain,this.right=this.input[1]=new t.Gain,this._merger=this.output=this.context.createChannelMerger(2),this.left.connect(this._merger,0,0),this.right.connect(this._merger,0,1),this.left.channelCount=1,this.right.channelCount=1,this.left.channelCountMode="explicit",this.right.channelCountMode="explicit"},t.extend(t.Merge),t.Merge.prototype.dispose=function(){return t.prototype.dispose.call(this),this.left.dispose(),this.left=null,this.right.dispose(),this.right=null,this._merger.disconnect(),this._merger=null,this},t.Merge}),e(function(t){return t.Meter=function(){var e=this.optionsObject(arguments,["type","smoothing"],t.Meter.defaults);this.type=e.type,this.input=this.output=this._analyser=new t.Analyser("waveform",512),this._analyser.returnType="float",this.smoothing=e.smoothing,this._lastValue=0},t.extend(t.Meter),t.Meter.Type={Level:"level",Signal:"signal"},t.Meter.defaults={smoothing:.8,type:t.Meter.Type.Level},Object.defineProperty(t.Meter.prototype,"value",{get:function(){var e=this._analyser.analyse();if(this.type===t.Meter.Type.Level){for(var i=0,n=0;n<e.length;n++)i+=Math.pow(e[n],2);var s=Math.sqrt(i/e.length);s=Math.max(s,this._lastValue*this.smoothing),this._lastValue=s;var o=.35,r=s/o;return Math.sqrt(r)}return e[0]}}),t.Meter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._analyser.dispose(),this._analyser=null,this},t.Meter}),e(function(t){return t.Split=function(){this.createInsOuts(0,2),this._splitter=this.input=this.context.createChannelSplitter(2),this.left=this.output[0]=new t.Gain,this.right=this.output[1]=new t.Gain,this._splitter.connect(this.left,0,0),this._splitter.connect(this.right,1,0)},t.extend(t.Split),t.Split.prototype.dispose=function(){return t.prototype.dispose.call(this),this._splitter.disconnect(),this.left.dispose(),this.left=null,this.right.dispose(),this.right=null,this._splitter=null,this},t.Split}),e(function(t){t.MidSideSplit=function(){this.createInsOuts(0,2),this._split=this.input=new t.Split,this.mid=this.output[0]=new t.Expr("($0 + $1) * $2"),this.side=this.output[1]=new t.Expr("($0 - $1) * $2"),this._split.connect(this.mid,0,0),this._split.connect(this.mid,1,1),this._split.connect(this.side,0,0),this._split.connect(this.side,1,1),e.connect(this.mid,0,2),e.connect(this.side,0,2)},t.extend(t.MidSideSplit);var e=null;return t._initAudioContext(function(){e=new t.Signal(1/Math.sqrt(2))}),t.MidSideSplit.prototype.dispose=function(){return t.prototype.dispose.call(this),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._split.dispose(),this._split=null,this},t.MidSideSplit}),e(function(t){t.MidSideMerge=function(){this.createInsOuts(2,0),this.mid=this.input[0]=new t.Gain,this._left=new t.Expr("($0 + $1) * $2"),this.side=this.input[1]=new t.Gain,this._right=new t.Expr("($0 - $1) * $2"),this._merge=this.output=new t.Merge,this.mid.connect(this._left,0,0),this.side.connect(this._left,0,1),this.mid.connect(this._right,0,0),this.side.connect(this._right,0,1),this._left.connect(this._merge,0,0),this._right.connect(this._merge,0,1),e.connect(this._left,0,2),e.connect(this._right,0,2)},t.extend(t.MidSideMerge);var e=null;return t._initAudioContext(function(){e=new t.Signal(1/Math.sqrt(2))}),t.MidSideMerge.prototype.dispose=function(){return t.prototype.dispose.call(this),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._left.dispose(),this._left=null,this._right.dispose(),this._right=null,this._merge.dispose(),this._merge=null,this},t.MidSideMerge}),e(function(t){return t.MidSideCompressor=function(e){e=this.defaultArg(e,t.MidSideCompressor.defaults),this._midSideSplit=this.input=new t.MidSideSplit,this._midSideMerge=this.output=new t.MidSideMerge,this.mid=new t.Compressor(e.mid),this.side=new t.Compressor(e.side),this._midSideSplit.mid.chain(this.mid,this._midSideMerge.mid),this._midSideSplit.side.chain(this.side,this._midSideMerge.side),this._readOnly(["mid","side"])},t.extend(t.MidSideCompressor),t.MidSideCompressor.defaults={mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}},t.MidSideCompressor.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["mid","side"]),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._midSideSplit.dispose(),this._midSideSplit=null,this._midSideMerge.dispose(),this._midSideMerge=null,this},t.MidSideCompressor}),e(function(t){return t.Mono=function(){this.createInsOuts(1,0),this._merge=this.output=new t.Merge,this.input.connect(this._merge,0,0),this.input.connect(this._merge,0,1),this.input.gain.value=this.dbToGain(-10)},t.extend(t.Mono),t.Mono.prototype.dispose=function(){return t.prototype.dispose.call(this),this._merge.dispose(),this._merge=null,this},t.Mono}),e(function(t){return t.MultibandCompressor=function(e){e=this.defaultArg(arguments,t.MultibandCompressor.defaults),this._splitter=this.input=new t.MultibandSplit({lowFrequency:e.lowFrequency,highFrequency:e.highFrequency}),this.lowFrequency=this._splitter.lowFrequency,this.highFrequency=this._splitter.highFrequency,this.output=new t.Gain,this.low=new t.Compressor(e.low),this.mid=new t.Compressor(e.mid),this.high=new t.Compressor(e.high),this._splitter.low.chain(this.low,this.output),this._splitter.mid.chain(this.mid,this.output),this._splitter.high.chain(this.high,this.output),this._readOnly(["high","mid","low","highFrequency","lowFrequency"])},t.extend(t.MultibandCompressor),t.MultibandCompressor.defaults={low:t.Compressor.defaults,mid:t.Compressor.defaults,high:t.Compressor.defaults,lowFrequency:250,highFrequency:2e3},t.MultibandCompressor.prototype.dispose=function(){return t.prototype.dispose.call(this),this._splitter.dispose(),this._writable(["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this._splitter=null,this.low=null,this.mid=null,this.high=null,this.lowFrequency=null,this.highFrequency=null,this},t.MultibandCompressor}),e(function(t){return t.Panner=function(e){this._hasStereoPanner?(this._panner=this.input=this.output=this.context.createStereoPanner(),this.pan=this._panner.pan):(this._crossFade=new t.CrossFade,this._merger=this.output=new t.Merge,this._splitter=this.input=new t.Split,this.pan=new t.Signal(0,t.Type.AudioRange),this._zero=new t.Zero,this._a2g=new t.AudioToGain,this._zero.connect(this._a2g),this.pan.chain(this._a2g,this._crossFade.fade),this._splitter.connect(this._crossFade,0,0),this._splitter.connect(this._crossFade,1,1),this._crossFade.a.connect(this._merger,0,0),this._crossFade.b.connect(this._merger,0,1)),this.pan.value=this.defaultArg(e,0),this._readOnly("pan")},t.extend(t.Panner),t.Panner.prototype._hasStereoPanner=t.prototype.isFunction(t.context.createStereoPanner),t.Panner.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable("pan"),this._hasStereoPanner?(this._panner.disconnect(),this._panner=null,this.pan=null):(this._zero.dispose(),this._zero=null,this._crossFade.dispose(),this._crossFade=null,this._splitter.dispose(),this._splitter=null,this._merger.dispose(),this._merger=null,this.pan.dispose(),this.pan=null,this._a2g.dispose(),this._a2g=null),this},t.Panner}),e(function(t){return t.Panner3D=function(){var e=this.optionsObject(arguments,["positionX","positionY","positionZ"],t.Panner3D.defaults);this._panner=this.input=this.output=this.context.createPanner(),this._panner.panningModel=e.panningModel,this._panner.maxDistance=e.maxDistance,this._panner.distanceModel=e.distanceModel,this._panner.coneOuterGain=e.coneOuterGain,this._panner.coneOuterAngle=e.coneOuterAngle,this._panner.coneInnerAngle=e.coneInnerAngle,this._panner.refDistance=e.refDistance,this._panner.rolloffFactor=e.rolloffFactor,this._orientation=[e.orientationX,e.orientationY,e.orientationZ],this._position=[e.positionX,e.positionY,e.positionZ],this.orientationX=e.orientationX,this.orientationY=e.orientationY,this.orientationZ=e.orientationZ,this.positionX=e.positionX,this.positionY=e.positionY,this.positionZ=e.positionZ},t.extend(t.Panner3D),t.Panner3D.defaults={positionX:0,positionY:0,positionZ:0,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",maxDistance:1e4,distanceModel:"inverse",coneOuterGain:0,coneOuterAngle:360,coneInnerAngle:360,refDistance:1,rolloffFactor:1},t.Panner3D.prototype._rampTimeConstant=.3,t.Panner3D.prototype.setPosition=function(t,e,i){if(this._panner.positionX){var n=this.now();this._panner.positionX.setTargetAtTime(t,n,this._rampTimeConstant),this._panner.positionY.setTargetAtTime(e,n,this._rampTimeConstant),this._panner.positionZ.setTargetAtTime(i,n,this._rampTimeConstant)}else this._panner.setPosition(t,e,i);return this._position=Array.prototype.slice.call(arguments),this},t.Panner3D.prototype.setOrientation=function(t,e,i){if(this._panner.orientationX){var n=this.now();this._panner.orientationX.setTargetAtTime(t,n,this._rampTimeConstant),this._panner.orientationY.setTargetAtTime(e,n,this._rampTimeConstant),this._panner.orientationZ.setTargetAtTime(i,n,this._rampTimeConstant)}else this._panner.setOrientation(t,e,i);return this._orientation=Array.prototype.slice.call(arguments),this},Object.defineProperty(t.Panner3D.prototype,"positionX",{set:function(t){this._position[0]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[0]}}),Object.defineProperty(t.Panner3D.prototype,"positionY",{set:function(t){this._position[1]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[1]}}),Object.defineProperty(t.Panner3D.prototype,"positionZ",{set:function(t){this._position[2]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[2]}}),Object.defineProperty(t.Panner3D.prototype,"orientationX",{set:function(t){this._orientation[0]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[0]}}),Object.defineProperty(t.Panner3D.prototype,"orientationY",{set:function(t){this._orientation[1]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[1]}}),Object.defineProperty(t.Panner3D.prototype,"orientationZ",{set:function(t){this._orientation[2]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[2]}}),t.Panner3D._aliasProperty=function(e){Object.defineProperty(t.Panner3D.prototype,e,{set:function(t){this._panner[e]=t},get:function(){return this._panner[e]}})},t.Panner3D._aliasProperty("panningModel"),t.Panner3D._aliasProperty("refDistance"),t.Panner3D._aliasProperty("rolloffFactor"),t.Panner3D._aliasProperty("distanceModel"),t.Panner3D._aliasProperty("coneInnerAngle"),t.Panner3D._aliasProperty("coneOuterAngle"),t.Panner3D._aliasProperty("coneOuterGain"),t.Panner3D._aliasProperty("maxDistance"),t.Panner3D.prototype.dispose=function(){return this._panner.disconnect(),this._panner=null,this._orientation=null,this._position=null,this},t.Panner3D}),e(function(t){return t.PanVol=function(){var e=this.optionsObject(arguments,["pan","volume"],t.PanVol.defaults);this._panner=this.input=new t.Panner(e.pan),this.pan=this._panner.pan,this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._panner.connect(this._volume),this._readOnly(["pan","volume"])},t.extend(t.PanVol),t.PanVol.defaults={pan:.5,volume:0},t.PanVol.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["pan","volume"]),this._panner.dispose(),this._panner=null,this.pan=null,this._volume.dispose(),this._volume=null,this.volume=null,this},t.PanVol}),e(function(t){return t.CtrlInterpolate=function(){var e=this.optionsObject(arguments,["values","index"],t.CtrlInterpolate.defaults);this.values=e.values,this.index=e.index},t.extend(t.CtrlInterpolate),t.CtrlInterpolate.defaults={index:0,values:[]},Object.defineProperty(t.CtrlInterpolate.prototype,"value",{get:function(){var t=this.index;t=Math.min(t,this.values.length-1);var e=Math.floor(t),i=this.values[e],n=this.values[Math.ceil(t)];return this._interpolate(t-e,i,n)}}),t.CtrlInterpolate.prototype._interpolate=function(t,e,i){if(this.isArray(e)){for(var n=[],s=0;s<e.length;s++)n[s]=this._interpolate(t,e[s],i[s]);return n}if(this.isObject(e)){var o={};for(var r in e)o[r]=this._interpolate(t,e[r],i[r]);return o}return e=this._toNumber(e),i=this._toNumber(i),(1-t)*e+t*i},t.CtrlInterpolate.prototype._toNumber=function(t){return this.isNumber(t)?t:this.toSeconds(t)},t.CtrlInterpolate.prototype.dispose=function(){this.values=null},t.CtrlInterpolate}),e(function(t){return t.CtrlMarkov=function(t,e){this.values=this.defaultArg(t,{}),this.value=this.defaultArg(e,Object.keys(this.values)[0])},t.extend(t.CtrlMarkov),t.CtrlMarkov.prototype.next=function(){if(this.values.hasOwnProperty(this.value)){var t=this.values[this.value];if(this.isArray(t))for(var e=this._getProbDistribution(t),i=Math.random(),n=0,s=0;s<e.length;s++){var o=e[s];if(i>n&&i<n+o){var r=t[s];this.isObject(r)?this.value=r.value:this.value=r}n+=o}else this.value=t}return this.value},t.CtrlMarkov.prototype._getProbDistribution=function(t){for(var e=[],i=0,n=!1,s=0;s<t.length;s++){var o=t[s];this.isObject(o)?(n=!0,e[s]=o.probability):e[s]=1/t.length,i+=e[s]}if(n)for(var r=0;r<e.length;r++)e[r]=e[r]/i;return e},t.CtrlMarkov.prototype.dispose=function(){this.values=null},t.CtrlMarkov}),e(function(t){return t.CtrlPattern=function(){var e=this.optionsObject(arguments,["values","type"],t.CtrlPattern.defaults);this.values=e.values,this.index=0,this._type=null,this._shuffled=null,this._direction=null,this.type=e.type},t.extend(t.CtrlPattern),t.CtrlPattern.Type={Up:"up",Down:"down",UpDown:"upDown",DownUp:"downUp",AlternateUp:"alternateUp",AlternateDown:"alternateDown",Random:"random",RandomWalk:"randomWalk",RandomOnce:"randomOnce"},t.CtrlPattern.defaults={type:t.CtrlPattern.Type.Up,values:[]},Object.defineProperty(t.CtrlPattern.prototype,"value",{get:function(){if(0!==this.values.length){if(1===this.values.length)return this.values[0];this.index=Math.min(this.index,this.values.length-1);var e=this.values[this.index];return this.type===t.CtrlPattern.Type.RandomOnce&&(this.values.length!==this._shuffled.length&&this._shuffleValues(),e=this.values[this._shuffled[this.index]]),e}}}),Object.defineProperty(t.CtrlPattern.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e,this._shuffled=null,this._type===t.CtrlPattern.Type.Up||this._type===t.CtrlPattern.Type.UpDown||this._type===t.CtrlPattern.Type.RandomOnce||this._type===t.CtrlPattern.Type.AlternateUp?this.index=0:this._type!==t.CtrlPattern.Type.Down&&this._type!==t.CtrlPattern.Type.DownUp&&this._type!==t.CtrlPattern.Type.AlternateDown||(this.index=this.values.length-1),this._type===t.CtrlPattern.Type.UpDown||this._type===t.CtrlPattern.Type.AlternateUp?this._direction=t.CtrlPattern.Type.Up:this._type!==t.CtrlPattern.Type.DownUp&&this._type!==t.CtrlPattern.Type.AlternateDown||(this._direction=t.CtrlPattern.Type.Down),this._type===t.CtrlPattern.Type.RandomOnce?this._shuffleValues():this._type===t.CtrlPattern.Random&&(this.index=Math.floor(Math.random()*this.values.length))}}),t.CtrlPattern.prototype.next=function(){var e=this.type;return e===t.CtrlPattern.Type.Up?(this.index++,this.index>=this.values.length&&(this.index=0)):e===t.CtrlPattern.Type.Down?(this.index--,this.index<0&&(this.index=this.values.length-1)):e===t.CtrlPattern.Type.UpDown||e===t.CtrlPattern.Type.DownUp?(this._direction===t.CtrlPattern.Type.Up?this.index++:this.index--,this.index<0?(this.index=1,this._direction=t.CtrlPattern.Type.Up):this.index>=this.values.length&&(this.index=this.values.length-2,this._direction=t.CtrlPattern.Type.Down)):e===t.CtrlPattern.Type.Random?this.index=Math.floor(Math.random()*this.values.length):e===t.CtrlPattern.Type.RandomWalk?Math.random()<.5?(this.index--,this.index=Math.max(this.index,0)):(this.index++,this.index=Math.min(this.index,this.values.length-1)):e===t.CtrlPattern.Type.RandomOnce?(this.index++,this.index>=this.values.length&&(this.index=0,this._shuffleValues())):e===t.CtrlPattern.Type.AlternateUp?(this._direction===t.CtrlPattern.Type.Up?(this.index+=2,this._direction=t.CtrlPattern.Type.Down):(this.index-=1,this._direction=t.CtrlPattern.Type.Up),this.index>=this.values.length&&(this.index=0,this._direction=t.CtrlPattern.Type.Up)):e===t.CtrlPattern.Type.AlternateDown&&(this._direction===t.CtrlPattern.Type.Up?(this.index+=1,
this._direction=t.CtrlPattern.Type.Down):(this.index-=2,this._direction=t.CtrlPattern.Type.Up),this.index<0&&(this.index=this.values.length-1,this._direction=t.CtrlPattern.Type.Down)),this.value},t.CtrlPattern.prototype._shuffleValues=function(){var t=[];this._shuffled=[];for(var e=0;e<this.values.length;e++)t[e]=e;for(;t.length>0;){var i=t.splice(Math.floor(t.length*Math.random()),1);this._shuffled.push(i[0])}},t.CtrlPattern.prototype.dispose=function(){this._shuffled=null,this.values=null},t.CtrlPattern}),e(function(t){return t.CtrlRandom=function(){var e=this.optionsObject(arguments,["min","max"],t.CtrlRandom.defaults);this.min=e.min,this.max=e.max,this.integer=e.integer},t.extend(t.CtrlRandom),t.CtrlRandom.defaults={min:0,max:1,integer:!1},Object.defineProperty(t.CtrlRandom.prototype,"value",{get:function(){var t=this.toSeconds(this.min),e=this.toSeconds(this.max),i=Math.random(),n=i*t+(1-i)*e;return this.integer&&(n=Math.floor(n)),n}}),t.CtrlRandom}),e(function(t){return t.Buffer=function(){var e=this.optionsObject(arguments,["url","onload","onerror"],t.Buffer.defaults);this._buffer=null,this._reversed=e.reverse,this._xhr=null,e.url instanceof AudioBuffer||e.url instanceof t.Buffer?(this.set(e.url),e.onload&&e.onload(this)):this.isString(e.url)&&this.load(e.url,e.onload,e.onerror)},t.extend(t.Buffer),t.Buffer.defaults={url:void 0,reverse:!1},t.Buffer.prototype.set=function(e){return e instanceof t.Buffer?this._buffer=e.get():this._buffer=e,this},t.Buffer.prototype.get=function(){return this._buffer},t.Buffer.prototype.load=function(e,i,n){var s=new Promise(function(s,o){this._xhr=t.Buffer.load(e,function(t){this._xhr=null,this.set(t),s(this),i&&i(this)}.bind(this),function(t){this._xhr=null,o(t),n&&n(t)}.bind(this))}.bind(this));return s},t.Buffer.prototype.dispose=function(){return t.Emitter.prototype.dispose.call(this),this._buffer=null,this._xhr&&(t.Buffer._currentDownloads--,this._xhr.abort(),this._xhr=null),this},Object.defineProperty(t.Buffer.prototype,"loaded",{get:function(){return this.length>0}}),Object.defineProperty(t.Buffer.prototype,"duration",{get:function(){return this._buffer?this._buffer.duration:0}}),Object.defineProperty(t.Buffer.prototype,"length",{get:function(){return this._buffer?this._buffer.length:0}}),Object.defineProperty(t.Buffer.prototype,"numberOfChannels",{get:function(){return this._buffer?this._buffer.numberOfChannels:0}}),t.Buffer.prototype.fromArray=function(t){var e=t[0].length>0,i=e?t.length:1,n=e?t[0].length:t.length,s=this.context.createBuffer(i,n,this.context.sampleRate);e||1!==i||(t=[t]);for(var o=0;o<i;o++)if(this.isFunction(s.copyToChannel))s.copyToChannel(t[o],o);else for(var r=s.getChannelData(o),a=t[o],h=0;h<a.length;h++)r[h]=a[h];return this._buffer=s,this},t.Buffer.prototype.toArray=function(t){if(this.isNumber(t))return this._buffer.getChannelData(t);for(var e=[],i=0;i<this.numberOfChannels;i++)if(e[i]=new Float32Array(this.length),this.isFunction(this._buffer.copyFromChannel))this._buffer.copyFromChannel(e[i],i);else for(var n=this._buffer.getChannelData(i),s=e[i],o=0;o<n.length;o++)s[o]=n[o];return 1===e.length?e[0]:e},t.Buffer.prototype.slice=function(e,i){i=this.defaultArg(i,this.duration);for(var n=Math.floor(this.context.sampleRate*this.toSeconds(e)),s=Math.floor(this.context.sampleRate*this.toSeconds(i)),o=[],r=0;r<this.numberOfChannels;r++)o[r]=this.toArray(r).slice(n,s);var a=(new t.Buffer).fromArray(o);return a},t.Buffer.prototype._reverse=function(){if(this.loaded)for(var t=0;t<this._buffer.numberOfChannels;t++)Array.prototype.reverse.call(this._buffer.getChannelData(t));return this},Object.defineProperty(t.Buffer.prototype,"reverse",{get:function(){return this._reversed},set:function(t){this._reversed!==t&&(this._reversed=t,this._reverse())}}),t.Emitter.mixin(t.Buffer),t.Buffer._downloadQueue=[],t.Buffer._currentDownloads=0,t.Buffer.baseUrl="",t.Buffer.load=function(e,i,n){function s(e){if(t.Buffer._currentDownloads--,!n)throw new Error(e);n(e)}function o(){for(var e=0,i=0;i<t.Buffer._downloadQueue.length;i++)e+=t.Buffer._downloadQueue[i].progress;t.Buffer.emit("progress",e/t.Buffer._downloadQueue.length)}i=i||t.noOp;var r=new XMLHttpRequest;return r.open("GET",t.Buffer.baseUrl+e,!0),r.responseType="arraybuffer",r.progress=0,t.Buffer._currentDownloads++,t.Buffer._downloadQueue.push(r),r.addEventListener("load",function(){200===r.status?t.context.decodeAudioData(r.response,function(e){r.progress=1,o(),i(e),t.Buffer._currentDownloads--,0===t.Buffer._currentDownloads&&(t.Buffer._downloadQueue=[],t.Buffer.emit("load"))},function(){s("Tone.Buffer: could not decode audio data: "+e)}):s("Tone.Buffer: could not locate file: "+e)}),r.addEventListener("error",s),r.addEventListener("progress",function(t){t.lengthComputable&&(r.progress=t.loaded/t.total*.95,o())}),r.send(),r},t.Buffer.supportsType=function(t){var e=t.split(".");e=e[e.length-1];var i=document.createElement("audio").canPlayType("audio/"+e);return""!==i},t.Buffer}),e(function(t){return t.Buffers=function(t,e,i){this._buffers={},this.baseUrl=this.defaultArg(i,""),t=this._flattenUrls(t),this._loadingCount=0;for(var n in t)this._loadingCount++,this.add(n,t[n],this._bufferLoaded.bind(this,e))},t.extend(t.Buffers),t.Buffers.prototype.has=function(t){return this._buffers.hasOwnProperty(t)},t.Buffers.prototype.get=function(t){if(this.has(t))return this._buffers[t];throw new Error("Tone.Buffers: no buffer named "+t)},t.Buffers.prototype._bufferLoaded=function(t){this._loadingCount--,0===this._loadingCount&&t&&t(this)},Object.defineProperty(t.Buffers.prototype,"loaded",{get:function(){var t=!0;for(var e in this._buffers){var i=this.get(e);t=t&&i.loaded}return t}}),t.Buffers.prototype.add=function(e,i,n){return n=this.defaultArg(n,t.noOp),i instanceof t.Buffer?(this._buffers[e]=i,n(this)):i instanceof AudioBuffer?(this._buffers[e]=new t.Buffer(i),n(this)):this.isString(i)&&(this._buffers[e]=new t.Buffer(this.baseUrl+i,n)),this},t.Buffers.prototype._flattenUrls=function(t){var e={};for(var i in t)if(t.hasOwnProperty(i))if(this.isObject(t[i])){var n=this._flattenUrls(t[i]);for(var s in n)n.hasOwnProperty(s)&&(e[i+"."+s]=n[s])}else e[i]=t[i];return e},t.Buffers.prototype.dispose=function(){for(var t in this._buffers)this._buffers[t].dispose();return this._buffers=null,this},t.Buffers}),e(function(t){var e={};return t.prototype.send=function(i,n){e.hasOwnProperty(i)||(e[i]=this.context.createGain()),n=this.defaultArg(n,0);var s=new t.Gain(n,t.Type.Decibels);return this.output.chain(s,e[i]),s},t.prototype.receive=function(t,i){return e.hasOwnProperty(t)||(e[t]=this.context.createGain()),this.isUndef(i)&&(i=this.input),e[t].connect(i),this},t._initAudioContext(function(){e={}}),t}),e(function(t){t.Listener=function(){var t=this.optionsObject(arguments,["positionX","positionY","positionZ"],e.defaults);this._listener=this.context.listener,this._orientation=[t.forwardX,t.forwardY,t.forwardZ,t.upX,t.upY,t.upZ],this._position=[t.positionX,t.positionY,t.positionZ],this.forwardX=t.forwardX,this.forwardY=t.forwardY,this.forwardZ=t.forwardZ,this.upX=t.upX,this.upY=t.upY,this.upZ=t.upZ,this.positionX=t.positionX,this.positionY=t.positionY,this.positionZ=t.positionZ},t.extend(t.Listener),t.Listener.defaults={positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:1,upX:0,upY:1,upZ:0},t.Listener.prototype._rampTimeConstant=.3,t.Listener.prototype.setPosition=function(t,e,i){if(this._listener.positionX){var n=this.now();this._listener.positionX.setTargetAtTime(t,n,this._rampTimeConstant),this._listener.positionY.setTargetAtTime(e,n,this._rampTimeConstant),this._listener.positionZ.setTargetAtTime(i,n,this._rampTimeConstant)}else this._listener.setPosition(t,e,i);return this._position=Array.prototype.slice.call(arguments),this},t.Listener.prototype.setOrientation=function(t,e,i,n,s,o){if(this._listener.forwardX){var r=this.now();this._listener.forwardX.setTargetAtTime(t,r,this._rampTimeConstant),this._listener.forwardY.setTargetAtTime(e,r,this._rampTimeConstant),this._listener.forwardZ.setTargetAtTime(i,r,this._rampTimeConstant),this._listener.upX.setTargetAtTime(n,r,this._rampTimeConstant),this._listener.upY.setTargetAtTime(s,r,this._rampTimeConstant),this._listener.upZ.setTargetAtTime(o,r,this._rampTimeConstant)}else this._listener.setOrientation(t,e,i,n,s,o);return this._orientation=Array.prototype.slice.call(arguments),this},Object.defineProperty(t.Listener.prototype,"positionX",{set:function(t){this._position[0]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[0]}}),Object.defineProperty(t.Listener.prototype,"positionY",{set:function(t){this._position[1]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[1]}}),Object.defineProperty(t.Listener.prototype,"positionZ",{set:function(t){this._position[2]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[2]}}),Object.defineProperty(t.Listener.prototype,"forwardX",{set:function(t){this._orientation[0]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[0]}}),Object.defineProperty(t.Listener.prototype,"forwardY",{set:function(t){this._orientation[1]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[1]}}),Object.defineProperty(t.Listener.prototype,"forwardZ",{set:function(t){this._orientation[2]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[2]}}),Object.defineProperty(t.Listener.prototype,"upX",{set:function(t){this._orientation[3]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[3]}}),Object.defineProperty(t.Listener.prototype,"upY",{set:function(t){this._orientation[4]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[4]}}),Object.defineProperty(t.Listener.prototype,"upZ",{set:function(t){this._orientation[5]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[5]}}),t.Listener.prototype.dispose=function(){return this._listener.disconnect(),this._listener=null,this._orientation=null,this._position=null,this};var e=t.Listener;return t._initAudioContext(function(){"function"==typeof t.Listener?t.Listener=new t.Listener:e.call(t.Listener)}),t.Listener}),e(function(t){return t.Effect=function(){this.createInsOuts(1,1);var e=this.optionsObject(arguments,["wet"],t.Effect.defaults);this._dryWet=new t.CrossFade(e.wet),this.wet=this._dryWet.fade,this.effectSend=new t.Gain,this.effectReturn=new t.Gain,this.input.connect(this._dryWet.a),this.input.connect(this.effectSend),this.effectReturn.connect(this._dryWet.b),this._dryWet.connect(this.output),this._readOnly(["wet"])},t.extend(t.Effect),t.Effect.defaults={wet:1},t.Effect.prototype.connectEffect=function(t){return this.effectSend.chain(t,this.effectReturn),this},t.Effect.prototype.dispose=function(){return t.prototype.dispose.call(this),this._dryWet.dispose(),this._dryWet=null,this.effectSend.dispose(),this.effectSend=null,this.effectReturn.dispose(),this.effectReturn=null,this._writable(["wet"]),this.wet=null,this},t.Effect}),e(function(t){return t.AutoFilter=function(){var e=this.optionsObject(arguments,["frequency","baseFrequency","octaves"],t.AutoFilter.defaults);t.Effect.call(this,e),this._lfo=new t.LFO({frequency:e.frequency,amplitude:e.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.filter=new t.Filter(e.filter),this._octaves=0,this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.type=e.type,this._readOnly(["frequency","depth"]),this.octaves=e.octaves,this.baseFrequency=e.baseFrequency},t.extend(t.AutoFilter,t.Effect),t.AutoFilter.defaults={frequency:1,type:"sine",depth:1,baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}},t.AutoFilter.prototype.start=function(t){return this._lfo.start(t),this},t.AutoFilter.prototype.stop=function(t){return this._lfo.stop(t),this},t.AutoFilter.prototype.sync=function(t){return this._lfo.sync(t),this},t.AutoFilter.prototype.unsync=function(){return this._lfo.unsync(),this},Object.defineProperty(t.AutoFilter.prototype,"type",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),Object.defineProperty(t.AutoFilter.prototype,"baseFrequency",{get:function(){return this._lfo.min},set:function(t){this._lfo.min=this.toFrequency(t),this.octaves=this._octaves}}),Object.defineProperty(t.AutoFilter.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._lfo.max=this.baseFrequency*Math.pow(2,t)}}),t.AutoFilter.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._lfo.dispose(),this._lfo=null,this.filter.dispose(),this.filter=null,this._writable(["frequency","depth"]),this.frequency=null,this.depth=null,this},t.AutoFilter}),e(function(t){return t.AutoPanner=function(){var e=this.optionsObject(arguments,["frequency"],t.AutoPanner.defaults);t.Effect.call(this,e),this._lfo=new t.LFO({frequency:e.frequency,amplitude:e.depth,min:-1,max:1}),this.depth=this._lfo.amplitude,this._panner=new t.Panner,this.frequency=this._lfo.frequency,this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this.type=e.type,this._readOnly(["depth","frequency"])},t.extend(t.AutoPanner,t.Effect),t.AutoPanner.defaults={frequency:1,type:"sine",depth:1},t.AutoPanner.prototype.start=function(t){return this._lfo.start(t),this},t.AutoPanner.prototype.stop=function(t){return this._lfo.stop(t),this},t.AutoPanner.prototype.sync=function(t){return this._lfo.sync(t),this},t.AutoPanner.prototype.unsync=function(){return this._lfo.unsync(),this},Object.defineProperty(t.AutoPanner.prototype,"type",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),t.AutoPanner.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._lfo.dispose(),this._lfo=null,this._panner.dispose(),this._panner=null,this._writable(["depth","frequency"]),this.frequency=null,this.depth=null,this},t.AutoPanner}),e(function(t){return t.AutoWah=function(){var e=this.optionsObject(arguments,["baseFrequency","octaves","sensitivity"],t.AutoWah.defaults);t.Effect.call(this,e),this.follower=new t.Follower(e.follower),this._sweepRange=new t.ScaleExp(0,1,.5),this._baseFrequency=e.baseFrequency,this._octaves=e.octaves,this._inputBoost=new t.Gain,this._bandpass=new t.Filter({rolloff:-48,frequency:0,Q:e.Q}),this._peaking=new t.Filter(0,"peaking"),this._peaking.gain.value=e.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this.follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=e.sensitivity,this._readOnly(["gain","Q"])},t.extend(t.AutoWah,t.Effect),t.AutoWah.defaults={baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:{attack:.3,release:.5}},Object.defineProperty(t.AutoWah.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._setSweepRange()}}),Object.defineProperty(t.AutoWah.prototype,"baseFrequency",{get:function(){return this._baseFrequency},set:function(t){this._baseFrequency=t,this._setSweepRange()}}),Object.defineProperty(t.AutoWah.prototype,"sensitivity",{get:function(){return this.gainToDb(1/this._inputBoost.gain.value)},set:function(t){this._inputBoost.gain.value=1/this.dbToGain(t)}}),t.AutoWah.prototype._setSweepRange=function(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)},t.AutoWah.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this.follower.dispose(),this.follower=null,this._sweepRange.dispose(),this._sweepRange=null,this._bandpass.dispose(),this._bandpass=null,this._peaking.dispose(),this._peaking=null,this._inputBoost.dispose(),this._inputBoost=null,this._writable(["gain","Q"]),this.gain=null,this.Q=null,this},t.AutoWah}),e(function(t){return t.BitCrusher=function(){var e=this.optionsObject(arguments,["bits"],t.BitCrusher.defaults);t.Effect.call(this,e);var i=1/Math.pow(2,e.bits-1);this._subtract=new t.Subtract,this._modulo=new t.Modulo(i),this._bits=e.bits,this.effectSend.fan(this._subtract,this._modulo),this._modulo.connect(this._subtract,0,1),this._subtract.connect(this.effectReturn)},t.extend(t.BitCrusher,t.Effect),t.BitCrusher.defaults={bits:4},Object.defineProperty(t.BitCrusher.prototype,"bits",{get:function(){return this._bits},set:function(t){this._bits=t;var e=1/Math.pow(2,t-1);this._modulo.value=e}}),t.BitCrusher.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._subtract.dispose(),this._subtract=null,this._modulo.dispose(),this._modulo=null,this},t.BitCrusher}),e(function(t){return t.Chebyshev=function(){var e=this.optionsObject(arguments,["order"],t.Chebyshev.defaults);t.Effect.call(this,e),this._shaper=new t.WaveShaper(4096),this._order=e.order,this.connectEffect(this._shaper),this.order=e.order,this.oversample=e.oversample},t.extend(t.Chebyshev,t.Effect),t.Chebyshev.defaults={order:1,oversample:"none"},t.Chebyshev.prototype._getCoefficient=function(t,e,i){return i.hasOwnProperty(e)?i[e]:(0===e?i[e]=0:1===e?i[e]=t:i[e]=2*t*this._getCoefficient(t,e-1,i)-this._getCoefficient(t,e-2,i),i[e])},Object.defineProperty(t.Chebyshev.prototype,"order",{get:function(){return this._order},set:function(t){this._order=t;for(var e=new Array(4096),i=e.length,n=0;n<i;++n){var s=2*n/i-1;0===s?e[n]=0:e[n]=this._getCoefficient(s,t,{})}this._shaper.curve=e}}),Object.defineProperty(t.Chebyshev.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){this._shaper.oversample=t}}),t.Chebyshev.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this},t.Chebyshev}),e(function(t){return t.StereoEffect=function(){this.createInsOuts(1,1);var e=this.optionsObject(arguments,["wet"],t.Effect.defaults);this._dryWet=new t.CrossFade(e.wet),this.wet=this._dryWet.fade,this._split=new t.Split,this.effectSendL=this._split.left,this.effectSendR=this._split.right,this._merge=new t.Merge,this.effectReturnL=this._merge.left,this.effectReturnR=this._merge.right,this.input.connect(this._split),this.input.connect(this._dryWet,0,0),this._merge.connect(this._dryWet,0,1),this._dryWet.connect(this.output),this._readOnly(["wet"])},t.extend(t.StereoEffect,t.Effect),t.StereoEffect.prototype.dispose=function(){return t.prototype.dispose.call(this),this._dryWet.dispose(),this._dryWet=null,this._split.dispose(),this._split=null,this._merge.dispose(),this._merge=null,this.effectSendL=null,this.effectSendR=null,this.effectReturnL=null,this.effectReturnR=null,this._writable(["wet"]),this.wet=null,this},t.StereoEffect}),e(function(t){return t.FeedbackEffect=function(){var e=this.optionsObject(arguments,["feedback"]);e=this.defaultArg(e,t.FeedbackEffect.defaults),t.Effect.call(this,e),this._feedbackGain=new t.Gain(e.feedback,t.Type.NormalRange),this.feedback=this._feedbackGain.gain,this.effectReturn.chain(this._feedbackGain,this.effectSend),this._readOnly(["feedback"])},t.extend(t.FeedbackEffect,t.Effect),t.FeedbackEffect.defaults={feedback:.125},t.FeedbackEffect.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._writable(["feedback"]),this._feedbackGain.dispose(),this._feedbackGain=null,this.feedback=null,this},t.FeedbackEffect}),e(function(t){return t.StereoXFeedbackEffect=function(){var e=this.optionsObject(arguments,["feedback"],t.FeedbackEffect.defaults);t.StereoEffect.call(this,e),this.feedback=new t.Signal(e.feedback,t.Type.NormalRange),this._feedbackLR=new t.Gain,this._feedbackRL=new t.Gain,this.effectReturnL.chain(this._feedbackLR,this.effectSendR),this.effectReturnR.chain(this._feedbackRL,this.effectSendL),this.feedback.fan(this._feedbackLR.gain,this._feedbackRL.gain),this._readOnly(["feedback"])},t.extend(t.StereoXFeedbackEffect,t.FeedbackEffect),t.StereoXFeedbackEffect.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._writable(["feedback"]),this.feedback.dispose(),this.feedback=null,this._feedbackLR.dispose(),this._feedbackLR=null,this._feedbackRL.dispose(),this._feedbackRL=null,this},t.StereoXFeedbackEffect}),e(function(t){return t.Chorus=function(){var e=this.optionsObject(arguments,["frequency","delayTime","depth"],t.Chorus.defaults);t.StereoXFeedbackEffect.call(this,e),this._depth=e.depth,this._delayTime=e.delayTime/1e3,this._lfoL=new t.LFO({frequency:e.frequency,min:0,max:1}),this._lfoR=new t.LFO({frequency:e.frequency,min:0,max:1,phase:180}),this._delayNodeL=new t.Delay,this._delayNodeR=new t.Delay,this.frequency=this._lfoL.frequency,this.effectSendL.chain(this._delayNodeL,this.effectReturnL),this.effectSendR.chain(this._delayNodeR,this.effectReturnR),this.effectSendL.connect(this.effectReturnL),this.effectSendR.connect(this.effectReturnR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this._lfoL.start(),this._lfoR.start(),this._lfoL.frequency.connect(this._lfoR.frequency),this.depth=this._depth,this.frequency.value=e.frequency,this.type=e.type,this._readOnly(["frequency"]),this.spread=e.spread},t.extend(t.Chorus,t.StereoXFeedbackEffect),t.Chorus.defaults={frequency:1.5,delayTime:3.5,depth:.7,feedback:.1,type:"sine",spread:180},Object.defineProperty(t.Chorus.prototype,"depth",{get:function(){return this._depth},set:function(t){this._depth=t;var e=this._delayTime*t;this._lfoL.min=Math.max(this._delayTime-e,0),this._lfoL.max=this._delayTime+e,this._lfoR.min=Math.max(this._delayTime-e,0),this._lfoR.max=this._delayTime+e}}),Object.defineProperty(t.Chorus.prototype,"delayTime",{get:function(){return 1e3*this._delayTime},set:function(t){this._delayTime=t/1e3,this.depth=this._depth}}),Object.defineProperty(t.Chorus.prototype,"type",{get:function(){return this._lfoL.type},set:function(t){this._lfoL.type=t,this._lfoR.type=t}}),Object.defineProperty(t.Chorus.prototype,"spread",{get:function(){return this._lfoR.phase-this._lfoL.phase},set:function(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}}),t.Chorus.prototype.dispose=function(){return t.StereoXFeedbackEffect.prototype.dispose.call(this),this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null,this._delayNodeL.dispose(),this._delayNodeL=null,this._delayNodeR.dispose(),this._delayNodeR=null,this._writable("frequency"),this.frequency=null,this},t.Chorus}),e(function(t){return t.Convolver=function(){var e=this.optionsObject(arguments,["url","onload"],t.Convolver.defaults);t.Effect.call(this,e),this._convolver=this.context.createConvolver(),this._buffer=new t.Buffer,this.isString(e.url)?this._buffer.load(e.url,function(t){this.buffer=t,e.onload()}.bind(this)):e.url&&(this.buffer=e.url,e.onload()),this.connectEffect(this._convolver)},t.extend(t.Convolver,t.Effect),t.Convolver.defaults={onload:t.noOp},Object.defineProperty(t.Convolver.prototype,"buffer",{get:function(){return this._buffer.get()},set:function(t){this._buffer.set(t),this._convolver.buffer=this._buffer.get()}}),t.Convolver.prototype.load=function(t,e){return this._buffer.load(t,function(t){this.buffer=t,e&&e()}.bind(this)),this},t.Convolver.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._convolver.disconnect(),this._convolver=null,this._buffer.dispose(),this._buffer=null,this},t.Convolver}),e(function(t){return t.Distortion=function(){var e=this.optionsObject(arguments,["distortion"],t.Distortion.defaults);t.Effect.call(this,e),this._shaper=new t.WaveShaper(4096),this._distortion=e.distortion,this.connectEffect(this._shaper),this.distortion=e.distortion,this.oversample=e.oversample},t.extend(t.Distortion,t.Effect),t.Distortion.defaults={distortion:.4,oversample:"none"},Object.defineProperty(t.Distortion.prototype,"distortion",{get:function(){return this._distortion},set:function(t){this._distortion=t;var e=100*t,i=Math.PI/180;this._shaper.setMap(function(t){return Math.abs(t)<.001?0:(3+e)*t*20*i/(Math.PI+e*Math.abs(t))})}}),Object.defineProperty(t.Distortion.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){this._shaper.oversample=t}}),t.Distortion.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this},t.Distortion}),e(function(t){return t.FeedbackDelay=function(){var e=this.optionsObject(arguments,["delayTime","feedback"],t.FeedbackDelay.defaults);t.FeedbackEffect.call(this,e),this._delayNode=new t.Delay(e.delayTime),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),this._readOnly(["delayTime"])},t.extend(t.FeedbackDelay,t.FeedbackEffect),t.FeedbackDelay.defaults={delayTime:.25},t.FeedbackDelay.prototype.dispose=function(){return t.FeedbackEffect.prototype.dispose.call(this),this._delayNode.dispose(),this._delayNode=null,this._writable(["delayTime"]),this.delayTime=null,this},t.FeedbackDelay}),e(function(t){var e=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],i=[225,556,441,341];return t.Freeverb=function(){var n=this.optionsObject(arguments,["roomSize","dampening"],t.Freeverb.defaults);t.StereoEffect.call(this,n),this.roomSize=new t.Signal(n.roomSize,t.Type.NormalRange),this.dampening=new t.Signal(n.dampening,t.Type.Frequency),this._combFilters=[],this._allpassFiltersL=[],this._allpassFiltersR=[];for(var s=0;s<i.length;s++){var o=this.context.createBiquadFilter();o.type="allpass",o.frequency.value=i[s],this._allpassFiltersL.push(o)}for(var r=0;r<i.length;r++){var a=this.context.createBiquadFilter();a.type="allpass",a.frequency.value=i[r],this._allpassFiltersR.push(a)}for(var h=0;h<e.length;h++){var l=new t.LowpassCombFilter(e[h]);h<e.length/2?this.effectSendL.chain(l,this._allpassFiltersL[0]):this.effectSendR.chain(l,this._allpassFiltersR[0]),this.roomSize.connect(l.resonance),this.dampening.connect(l.dampening),this._combFilters.push(l)}this.connectSeries.apply(this,this._allpassFiltersL),this.connectSeries.apply(this,this._allpassFiltersR),this._allpassFiltersL[this._allpassFiltersL.length-1].connect(this.effectReturnL),this._allpassFiltersR[this._allpassFiltersR.length-1].connect(this.effectReturnR),this._readOnly(["roomSize","dampening"])},t.extend(t.Freeverb,t.StereoEffect),t.Freeverb.defaults={roomSize:.7,dampening:3e3},t.Freeverb.prototype.dispose=function(){t.StereoEffect.prototype.dispose.call(this);for(var e=0;e<this._allpassFiltersL.length;e++)this._allpassFiltersL[e].disconnect(),this._allpassFiltersL[e]=null;this._allpassFiltersL=null;for(var i=0;i<this._allpassFiltersR.length;i++)this._allpassFiltersR[i].disconnect(),this._allpassFiltersR[i]=null;this._allpassFiltersR=null;for(var n=0;n<this._combFilters.length;n++)this._combFilters[n].dispose(),this._combFilters[n]=null;return this._combFilters=null,this._writable(["roomSize","dampening"]),this.roomSize.dispose(),this.roomSize=null,this.dampening.dispose(),this.dampening=null,this},t.Freeverb}),e(function(t){var e=[.06748,.06404,.08212,.09004],i=[.773,.802,.753,.733],n=[347,113,37];return t.JCReverb=function(){var s=this.optionsObject(arguments,["roomSize"],t.JCReverb.defaults);t.StereoEffect.call(this,s),this.roomSize=new t.Signal(s.roomSize,t.Type.NormalRange),this._scaleRoomSize=new t.Scale(-.733,.197),this._allpassFilters=[],this._feedbackCombFilters=[];for(var o=0;o<n.length;o++){var r=this.context.createBiquadFilter();r.type="allpass",r.frequency.value=n[o],this._allpassFilters.push(r)}for(var a=0;a<e.length;a++){var h=new t.FeedbackCombFilter(e[a],.1);this._scaleRoomSize.connect(h.resonance),h.resonance.value=i[a],this._allpassFilters[this._allpassFilters.length-1].connect(h),a<e.length/2?h.connect(this.effectReturnL):h.connect(this.effectReturnR),this._feedbackCombFilters.push(h)}this.roomSize.connect(this._scaleRoomSize),this.connectSeries.apply(this,this._allpassFilters),this.effectSendL.connect(this._allpassFilters[0]),this.effectSendR.connect(this._allpassFilters[0]),this._readOnly(["roomSize"])},t.extend(t.JCReverb,t.StereoEffect),t.JCReverb.defaults={roomSize:.5},t.JCReverb.prototype.dispose=function(){t.StereoEffect.prototype.dispose.call(this);for(var e=0;e<this._allpassFilters.length;e++)this._allpassFilters[e].disconnect(),this._allpassFilters[e]=null;this._allpassFilters=null;for(var i=0;i<this._feedbackCombFilters.length;i++)this._feedbackCombFilters[i].dispose(),this._feedbackCombFilters[i]=null;return this._feedbackCombFilters=null,this._writable(["roomSize"]),this.roomSize.dispose(),this.roomSize=null,this._scaleRoomSize.dispose(),this._scaleRoomSize=null,this},t.JCReverb}),e(function(t){return t.MidSideEffect=function(){t.Effect.apply(this,arguments),this._midSideSplit=new t.MidSideSplit,this._midSideMerge=new t.MidSideMerge,this.midSend=this._midSideSplit.mid,this.sideSend=this._midSideSplit.side,this.midReturn=this._midSideMerge.mid,this.sideReturn=this._midSideMerge.side,this.effectSend.connect(this._midSideSplit),this._midSideMerge.connect(this.effectReturn)},t.extend(t.MidSideEffect,t.Effect),t.MidSideEffect.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._midSideSplit.dispose(),this._midSideSplit=null,this._midSideMerge.dispose(),this._midSideMerge=null,this.midSend=null,this.sideSend=null,this.midReturn=null,this.sideReturn=null,this},t.MidSideEffect}),e(function(t){return t.Phaser=function(){var e=this.optionsObject(arguments,["frequency","octaves","baseFrequency"],t.Phaser.defaults);t.StereoEffect.call(this,e),this._lfoL=new t.LFO(e.frequency,0,1),this._lfoR=new t.LFO(e.frequency,0,1),this._lfoR.phase=180,this._baseFrequency=e.baseFrequency,this._octaves=e.octaves,this.Q=new t.Signal(e.Q,t.Type.Positive),this._filtersL=this._makeFilters(e.stages,this._lfoL,this.Q),this._filtersR=this._makeFilters(e.stages,this._lfoR,this.Q),this.frequency=this._lfoL.frequency,this.frequency.value=e.frequency,this.effectSendL.connect(this._filtersL[0]),this.effectSendR.connect(this._filtersR[0]),this._filtersL[e.stages-1].connect(this.effectReturnL),this._filtersR[e.stages-1].connect(this.effectReturnR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=e.baseFrequency,this.octaves=e.octaves,this._lfoL.start(),this._lfoR.start(),this._readOnly(["frequency","Q"])},t.extend(t.Phaser,t.StereoEffect),t.Phaser.defaults={frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350},t.Phaser.prototype._makeFilters=function(t,e,i){for(var n=new Array(t),s=0;s<t;s++){var o=this.context.createBiquadFilter();o.type="allpass",i.connect(o.Q),e.connect(o.frequency),n[s]=o}return this.connectSeries.apply(this,n),n},Object.defineProperty(t.Phaser.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t;var e=this._baseFrequency*Math.pow(2,t);this._lfoL.max=e,this._lfoR.max=e}}),Object.defineProperty(t.Phaser.prototype,"baseFrequency",{get:function(){return this._baseFrequency},set:function(t){this._baseFrequency=t,this._lfoL.min=t,this._lfoR.min=t,this.octaves=this._octaves}}),t.Phaser.prototype.dispose=function(){t.StereoEffect.prototype.dispose.call(this),this._writable(["frequency","Q"]),this.Q.dispose(),this.Q=null,this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null;for(var e=0;e<this._filtersL.length;e++)this._filtersL[e].disconnect(),this._filtersL[e]=null;this._filtersL=null;for(var i=0;i<this._filtersR.length;i++)this._filtersR[i].disconnect(),this._filtersR[i]=null;return this._filtersR=null,this.frequency=null,this},t.Phaser}),e(function(t){return t.PingPongDelay=function(){var e=this.optionsObject(arguments,["delayTime","feedback"],t.PingPongDelay.defaults);t.StereoXFeedbackEffect.call(this,e),this._leftDelay=new t.Delay(0,e.maxDelayTime),this._rightDelay=new t.Delay(0,e.maxDelayTime),
this._rightPreDelay=new t.Delay(0,e.maxDelayTime),this.delayTime=new t.Signal(e.delayTime,t.Type.Time),this.effectSendL.chain(this._leftDelay,this.effectReturnL),this.effectSendR.chain(this._rightPreDelay,this._rightDelay,this.effectReturnR),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackLR.disconnect(),this._feedbackLR.connect(this._rightDelay),this._readOnly(["delayTime"])},t.extend(t.PingPongDelay,t.StereoXFeedbackEffect),t.PingPongDelay.defaults={delayTime:.25,maxDelayTime:1},t.PingPongDelay.prototype.dispose=function(){return t.StereoXFeedbackEffect.prototype.dispose.call(this),this._leftDelay.dispose(),this._leftDelay=null,this._rightDelay.dispose(),this._rightDelay=null,this._rightPreDelay.dispose(),this._rightPreDelay=null,this._writable(["delayTime"]),this.delayTime.dispose(),this.delayTime=null,this},t.PingPongDelay}),e(function(t){return t.PitchShift=function(){var e=this.optionsObject(arguments,["pitch"],t.PitchShift.defaults);t.FeedbackEffect.call(this,e),this._frequency=new t.Signal(0),this._delayA=new t.Delay(0,1),this._lfoA=new t.LFO({min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new t.Delay(0,1),this._lfoB=new t.LFO({min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new t.CrossFade,this._crossFadeLFO=new t.LFO({min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new t.Delay(e.delayTime),this.delayTime=this._feedbackDelay.delayTime,this._readOnly("delayTime"),this._pitch=e.pitch,this._windowSize=e.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);var i=this.now();this._lfoA.start(i),this._lfoB.start(i),this._crossFadeLFO.start(i),this.windowSize=this._windowSize},t.extend(t.PitchShift,t.FeedbackEffect),t.PitchShift.defaults={pitch:0,windowSize:.1,delayTime:0,feedback:0},Object.defineProperty(t.PitchShift.prototype,"pitch",{get:function(){return this._pitch},set:function(t){this._pitch=t;var e=0;t<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,e=this.intervalToFrequencyRatio(t-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,e=this.intervalToFrequencyRatio(t)-1),this._frequency.value=e*(1.2/this._windowSize)}}),Object.defineProperty(t.PitchShift.prototype,"windowSize",{get:function(){return this._windowSize},set:function(t){this._windowSize=this.toSeconds(t),this.pitch=this._pitch}}),t.PitchShift.prototype.dispose=function(){return t.FeedbackEffect.prototype.dispose.call(this),this._frequency.dispose(),this._frequency=null,this._delayA.disconnect(),this._delayA=null,this._delayB.disconnect(),this._delayB=null,this._lfoA.dispose(),this._lfoA=null,this._lfoB.dispose(),this._lfoB=null,this._crossFade.dispose(),this._crossFade=null,this._crossFadeLFO.dispose(),this._crossFadeLFO=null,this._writable("delayTime"),this._feedbackDelay.dispose(),this._feedbackDelay=null,this.delayTime=null,this},t.PitchShift}),e(function(t){return t.StereoFeedbackEffect=function(){var e=this.optionsObject(arguments,["feedback"],t.FeedbackEffect.defaults);t.StereoEffect.call(this,e),this.feedback=new t.Signal(e.feedback,t.Type.NormalRange),this._feedbackL=new t.Gain,this._feedbackR=new t.Gain,this.effectReturnL.chain(this._feedbackL,this.effectSendL),this.effectReturnR.chain(this._feedbackR,this.effectSendR),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),this._readOnly(["feedback"])},t.extend(t.StereoFeedbackEffect,t.FeedbackEffect),t.StereoFeedbackEffect.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._writable(["feedback"]),this.feedback.dispose(),this.feedback=null,this._feedbackL.dispose(),this._feedbackL=null,this._feedbackR.dispose(),this._feedbackR=null,this},t.StereoFeedbackEffect}),e(function(t){return t.StereoWidener=function(){var e=this.optionsObject(arguments,["width"],t.StereoWidener.defaults);t.MidSideEffect.call(this,e),this.width=new t.Signal(e.width,t.Type.NormalRange),this._midMult=new t.Expr("$0 * ($1 * (1 - $2))"),this._sideMult=new t.Expr("$0 * ($1 * $2)"),this._two=new t.Signal(2),this._two.connect(this._midMult,0,1),this.width.connect(this._midMult,0,2),this._two.connect(this._sideMult,0,1),this.width.connect(this._sideMult,0,2),this.midSend.chain(this._midMult,this.midReturn),this.sideSend.chain(this._sideMult,this.sideReturn),this._readOnly(["width"])},t.extend(t.StereoWidener,t.MidSideEffect),t.StereoWidener.defaults={width:.5},t.StereoWidener.prototype.dispose=function(){return t.MidSideEffect.prototype.dispose.call(this),this._writable(["width"]),this.width.dispose(),this.width=null,this._midMult.dispose(),this._midMult=null,this._sideMult.dispose(),this._sideMult=null,this._two.dispose(),this._two=null,this},t.StereoWidener}),e(function(t){return t.Tremolo=function(){var e=this.optionsObject(arguments,["frequency","depth"],t.Tremolo.defaults);t.StereoEffect.call(this,e),this._lfoL=new t.LFO({phase:e.spread,min:1,max:0}),this._lfoR=new t.LFO({phase:e.spread,min:1,max:0}),this._amplitudeL=new t.Gain,this._amplitudeR=new t.Gain,this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.depth=new t.Signal(e.depth,t.Type.NormalRange),this._readOnly(["frequency","depth"]),this.effectSendL.chain(this._amplitudeL,this.effectReturnL),this.effectSendR.chain(this._amplitudeR,this.effectReturnR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.type=e.type,this.spread=e.spread},t.extend(t.Tremolo,t.StereoEffect),t.Tremolo.defaults={frequency:10,type:"sine",depth:.5,spread:180},t.Tremolo.prototype.start=function(t){return this._lfoL.start(t),this._lfoR.start(t),this},t.Tremolo.prototype.stop=function(t){return this._lfoL.stop(t),this._lfoR.stop(t),this},t.Tremolo.prototype.sync=function(t){return this._lfoL.sync(t),this._lfoR.sync(t),this},t.Tremolo.prototype.unsync=function(){return this._lfoL.unsync(),this._lfoR.unsync(),this},Object.defineProperty(t.Tremolo.prototype,"type",{get:function(){return this._lfoL.type},set:function(t){this._lfoL.type=t,this._lfoR.type=t}}),Object.defineProperty(t.Tremolo.prototype,"spread",{get:function(){return this._lfoR.phase-this._lfoL.phase},set:function(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}}),t.Tremolo.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._writable(["frequency","depth"]),this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null,this._amplitudeL.dispose(),this._amplitudeL=null,this._amplitudeR.dispose(),this._amplitudeR=null,this.frequency=null,this.depth=null,this},t.Tremolo}),e(function(t){return t.Vibrato=function(){var e=this.optionsObject(arguments,["frequency","depth"],t.Vibrato.defaults);t.Effect.call(this,e),this._delayNode=new t.Delay(0,e.maxDelay),this._lfo=new t.LFO({type:e.type,min:0,max:e.maxDelay,frequency:e.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=e.depth,this._readOnly(["frequency","depth"]),this.effectSend.chain(this._delayNode,this.effectReturn)},t.extend(t.Vibrato,t.Effect),t.Vibrato.defaults={maxDelay:.005,frequency:5,depth:.1,type:"sine"},Object.defineProperty(t.Vibrato.prototype,"type",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),t.Vibrato.prototype.dispose=function(){t.Effect.prototype.dispose.call(this),this._delayNode.dispose(),this._delayNode=null,this._lfo.dispose(),this._lfo=null,this._writable(["frequency","depth"]),this.frequency=null,this.depth=null},t.Vibrato}),e(function(t){return t.Event=function(){var e=this.optionsObject(arguments,["callback","value"],t.Event.defaults);this._loop=e.loop,this.callback=e.callback,this.value=e.value,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._state=new t.TimelineState(t.State.Stopped),this._playbackRate=1,this._startOffset=0,this.probability=e.probability,this.humanize=e.humanize,this.mute=e.mute,this.playbackRate=e.playbackRate},t.extend(t.Event),t.Event.defaults={callback:t.noOp,loop:!1,loopEnd:"1m",loopStart:0,playbackRate:1,value:null,probability:1,mute:!1,humanize:!1},t.Event.prototype._rescheduleEvents=function(e){return e=this.defaultArg(e,-1),this._state.forEachFrom(e,function(e){var i;if(e.state===t.State.Started){this.isUndef(e.id)||t.Transport.clear(e.id);var n=e.time+Math.round(this.startOffset/this._playbackRate);if(this._loop){i=1/0,this.isNumber(this._loop)&&(i=this._loop*this._getLoopDuration());var s=this._state.getEventAfter(n);null!==s&&(i=Math.min(i,s.time-n)),i!==1/0&&(this._state.setStateAtTime(t.State.Stopped,n+i+1),i=t.Time(i,"i"));var o=t.Time(this._getLoopDuration(),"i");e.id=t.Transport.scheduleRepeat(this._tick.bind(this),o,t.TransportTime(n,"i"),i)}else e.id=t.Transport.schedule(this._tick.bind(this),n+"i")}}.bind(this)),this},Object.defineProperty(t.Event.prototype,"state",{get:function(){return this._state.getStateAtTime(t.Transport.ticks)}}),Object.defineProperty(t.Event.prototype,"startOffset",{get:function(){return this._startOffset},set:function(t){this._startOffset=t}}),t.Event.prototype.start=function(e){return e=this.toTicks(e),this._state.getStateAtTime(e)===t.State.Stopped&&(this._state.addEvent({state:t.State.Started,time:e,id:void 0}),this._rescheduleEvents(e)),this},t.Event.prototype.stop=function(e){if(this.cancel(e),e=this.toTicks(e),this._state.getStateAtTime(e)===t.State.Started){this._state.setStateAtTime(t.State.Stopped,e);var i=this._state.getEventBefore(e),n=e;null!==i&&(n=i.time),this._rescheduleEvents(n)}return this},t.Event.prototype.cancel=function(e){return e=this.defaultArg(e,-(1/0)),e=this.toTicks(e),this._state.forEachFrom(e,function(e){t.Transport.clear(e.id)}),this._state.cancel(e),this},t.Event.prototype._tick=function(e){if(!this.mute&&this._state.getStateAtTime(t.Transport.ticks)===t.State.Started){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){var i=.02;this.isBoolean(this.humanize)||(i=this.toSeconds(this.humanize)),e+=(2*Math.random()-1)*i}this.callback(e,this.value)}},t.Event.prototype._getLoopDuration=function(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)},Object.defineProperty(t.Event.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"loopEnd",{get:function(){return t.TransportTime(this._loopEnd,"i").toNotation()},set:function(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"loopStart",{get:function(){return t.TransportTime(this._loopStart,"i").toNotation()},set:function(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"progress",{get:function(){if(this._loop){var e=t.Transport.ticks,i=this._state.getEvent(e);if(null!==i&&i.state===t.State.Started){var n=this._getLoopDuration(),s=(e-i.time)%n;return s/n}return 0}return 0}}),t.Event.prototype.dispose=function(){this.cancel(),this._state.dispose(),this._state=null,this.callback=null,this.value=null},t.Event}),e(function(t){return t.Loop=function(){var e=this.optionsObject(arguments,["callback","interval"],t.Loop.defaults);this._event=new t.Event({callback:this._tick.bind(this),loop:!0,loopEnd:e.interval,playbackRate:e.playbackRate,probability:e.probability}),this.callback=e.callback,this.iterations=e.iterations},t.extend(t.Loop),t.Loop.defaults={interval:"4n",callback:t.noOp,playbackRate:1,iterations:1/0,probability:!0,mute:!1},t.Loop.prototype.start=function(t){return this._event.start(t),this},t.Loop.prototype.stop=function(t){return this._event.stop(t),this},t.Loop.prototype.cancel=function(t){return this._event.cancel(t),this},t.Loop.prototype._tick=function(t){this.callback(t)},Object.defineProperty(t.Loop.prototype,"state",{get:function(){return this._event.state}}),Object.defineProperty(t.Loop.prototype,"progress",{get:function(){return this._event.progress}}),Object.defineProperty(t.Loop.prototype,"interval",{get:function(){return this._event.loopEnd},set:function(t){this._event.loopEnd=t}}),Object.defineProperty(t.Loop.prototype,"playbackRate",{get:function(){return this._event.playbackRate},set:function(t){this._event.playbackRate=t}}),Object.defineProperty(t.Loop.prototype,"humanize",{get:function(){return this._event.humanize},set:function(t){this._event.humanize=t}}),Object.defineProperty(t.Loop.prototype,"probability",{get:function(){return this._event.probability},set:function(t){this._event.probability=t}}),Object.defineProperty(t.Loop.prototype,"mute",{get:function(){return this._event.mute},set:function(t){this._event.mute=t}}),Object.defineProperty(t.Loop.prototype,"iterations",{get:function(){return this._event.loop===!0?1/0:this._event.loop},set:function(t){t===1/0?this._event.loop=!0:this._event.loop=t}}),t.Loop.prototype.dispose=function(){this._event.dispose(),this._event=null,this.callback=null},t.Loop}),e(function(t){return t.Part=function(){var e=this.optionsObject(arguments,["callback","events"],t.Part.defaults);this._loop=e.loop,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._playbackRate=e.playbackRate,this._probability=e.probability,this._humanize=e.humanize,this._startOffset=0,this._state=new t.TimelineState(t.State.Stopped),this._events=[],this.callback=e.callback,this.mute=e.mute;var i=this.defaultArg(e.events,[]);if(!this.isUndef(e.events))for(var n=0;n<i.length;n++)Array.isArray(i[n])?this.add(i[n][0],i[n][1]):this.add(i[n])},t.extend(t.Part,t.Event),t.Part.defaults={callback:t.noOp,loop:!1,loopEnd:"1m",loopStart:0,playbackRate:1,probability:1,humanize:!1,mute:!1},t.Part.prototype.start=function(e,i){var n=this.toTicks(e);return this._state.getStateAtTime(n)!==t.State.Started&&(i=this._loop?this.defaultArg(i,this._loopStart):this.defaultArg(i,0),i=this.toTicks(i),this._state.addEvent({state:t.State.Started,time:n,offset:i}),this._forEach(function(t){this._startNote(t,n,i)})),this},t.Part.prototype._startNote=function(e,i,n){i-=n,this._loop?e.startOffset>=this._loopStart&&e.startOffset<this._loopEnd?(e.startOffset<n&&(i+=this._getLoopDuration()),e.start(t.TransportTime(i,"i"))):e.startOffset<this._loopStart&&e.startOffset>=n&&(e.loop=!1,e.start(t.TransportTime(i,"i"))):e.startOffset>=n&&e.start(t.TransportTime(i,"i"))},Object.defineProperty(t.Part.prototype,"startOffset",{get:function(){return this._startOffset},set:function(t){this._startOffset=t,this._forEach(function(t){t.startOffset+=this._startOffset})}}),t.Part.prototype.stop=function(e){var i=this.toTicks(e);return this._state.cancel(i),this._state.setStateAtTime(t.State.Stopped,i),this._forEach(function(t){t.stop(e)}),this},t.Part.prototype.at=function(e,i){e=t.TransportTime(e);for(var n=t.Time(1,"i").toSeconds(),s=0;s<this._events.length;s++){var o=this._events[s];if(Math.abs(e.toTicks()-o.startOffset)<n)return this.isUndef(i)||(o.value=i),o}return this.isUndef(i)?null:(this.add(e,i),this._events[this._events.length-1])},t.Part.prototype.add=function(e,i){e.hasOwnProperty("time")&&(i=e,e=i.time),e=this.toTicks(e);var n;return i instanceof t.Event?(n=i,n.callback=this._tick.bind(this)):n=new t.Event({callback:this._tick.bind(this),value:i}),n.startOffset=e,n.set({loopEnd:this.loopEnd,loopStart:this.loopStart,loop:this.loop,humanize:this.humanize,playbackRate:this.playbackRate,probability:this.probability}),this._events.push(n),this._restartEvent(n),this},t.Part.prototype._restartEvent=function(e){var i=this._state.getEvent(t.Transport.ticks);i&&i.state===t.State.Started&&this._startNote(e,i.time,i.offset)},t.Part.prototype.remove=function(e,i){e.hasOwnProperty("time")&&(i=e,e=i.time),e=this.toTicks(e);for(var n=this._events.length-1;n>=0;n--){var s=this._events[n];s instanceof t.Part?s.remove(e,i):s.startOffset===e&&(this.isUndef(i)||!this.isUndef(i)&&s.value===i)&&(this._events.splice(n,1),s.dispose())}return this},t.Part.prototype.removeAll=function(){return this._forEach(function(t){t.dispose()}),this._events=[],this},t.Part.prototype.cancel=function(t){return t=this.toTicks(t),this._forEach(function(e){e.cancel(t)}),this._state.cancel(t),this},t.Part.prototype._forEach=function(e,i){i=this.defaultArg(i,this);for(var n=this._events.length-1;n>=0;n--){var s=this._events[n];s instanceof t.Part?s._forEach(e,i):e.call(i,s)}return this},t.Part.prototype._setAll=function(t,e){this._forEach(function(i){i[t]=e})},t.Part.prototype._tick=function(t,e){this.mute||this.callback(t,e)},t.Part.prototype._testLoopBoundries=function(e){e.startOffset<this._loopStart||e.startOffset>=this._loopEnd?e.cancel():e.state===t.State.Stopped&&this._restartEvent(e)},Object.defineProperty(t.Part.prototype,"probability",{get:function(){return this._probability},set:function(t){this._probability=t,this._setAll("probability",t)}}),Object.defineProperty(t.Part.prototype,"humanize",{get:function(){return this._humanize},set:function(t){this._humanize=t,this._setAll("humanize",t)}}),Object.defineProperty(t.Part.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._forEach(function(e){e._loopStart=this._loopStart,e._loopEnd=this._loopEnd,e.loop=t,this._testLoopBoundries(e)})}}),Object.defineProperty(t.Part.prototype,"loopEnd",{get:function(){return t.TransportTime(this._loopEnd,"i").toNotation()},set:function(t){this._loopEnd=this.toTicks(t),this._loop&&this._forEach(function(t){t.loopEnd=this.loopEnd,this._testLoopBoundries(t)})}}),Object.defineProperty(t.Part.prototype,"loopStart",{get:function(){return t.TransportTime(this._loopStart,"i").toNotation()},set:function(t){this._loopStart=this.toTicks(t),this._loop&&this._forEach(function(t){t.loopStart=this.loopStart,this._testLoopBoundries(t)})}}),Object.defineProperty(t.Part.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._setAll("playbackRate",t)}}),Object.defineProperty(t.Part.prototype,"length",{get:function(){return this._events.length}}),t.Part.prototype.dispose=function(){return this.removeAll(),this._state.dispose(),this._state=null,this.callback=null,this._events=null,this},t.Part}),e(function(t){return t.Pattern=function(){var e=this.optionsObject(arguments,["callback","values","pattern"],t.Pattern.defaults);t.Loop.call(this,e),this._pattern=new t.CtrlPattern({values:e.values,type:e.pattern,index:e.index})},t.extend(t.Pattern,t.Loop),t.Pattern.defaults={pattern:t.CtrlPattern.Type.Up,values:[]},t.Pattern.prototype._tick=function(t){this.callback(t,this._pattern.value),this._pattern.next()},Object.defineProperty(t.Pattern.prototype,"index",{get:function(){return this._pattern.index},set:function(t){this._pattern.index=t}}),Object.defineProperty(t.Pattern.prototype,"values",{get:function(){return this._pattern.values},set:function(t){this._pattern.values=t}}),Object.defineProperty(t.Pattern.prototype,"value",{get:function(){return this._pattern.value}}),Object.defineProperty(t.Pattern.prototype,"pattern",{get:function(){return this._pattern.type},set:function(t){this._pattern.type=t}}),t.Pattern.prototype.dispose=function(){t.Loop.prototype.dispose.call(this),this._pattern.dispose(),this._pattern=null},t.Pattern}),e(function(t){return t.Sequence=function(){var e=this.optionsObject(arguments,["callback","events","subdivision"],t.Sequence.defaults),i=e.events;if(delete e.events,t.Part.call(this,e),this._subdivision=this.toTicks(e.subdivision),this.isUndef(e.loopEnd)&&!this.isUndef(i)&&(this._loopEnd=i.length*this._subdivision),this._loop=!0,!this.isUndef(i))for(var n=0;n<i.length;n++)this.add(n,i[n])},t.extend(t.Sequence,t.Part),t.Sequence.defaults={subdivision:"4n"},Object.defineProperty(t.Sequence.prototype,"subdivision",{get:function(){return t.Time(this._subdivision,"i").toNotation()}}),t.Sequence.prototype.at=function(e,i){return this.isArray(i)&&this.remove(e),t.Part.prototype.at.call(this,this._indexTime(e),i)},t.Sequence.prototype.add=function(e,i){if(null===i)return this;if(this.isArray(i)){var n=Math.round(this._subdivision/i.length);i=new t.Sequence(this._tick.bind(this),i,t.Time(n,"i"))}return t.Part.prototype.add.call(this,this._indexTime(e),i),this},t.Sequence.prototype.remove=function(e,i){return t.Part.prototype.remove.call(this,this._indexTime(e),i),this},t.Sequence.prototype._indexTime=function(e){return e instanceof t.TransportTime?e:t.TransportTime(e*this._subdivision+this.startOffset,"i")},t.Sequence.prototype.dispose=function(){return t.Part.prototype.dispose.call(this),this},t.Sequence}),e(function(t){return t.PulseOscillator=function(){var e=this.optionsObject(arguments,["frequency","width"],t.Oscillator.defaults);t.Source.call(this,e),this.width=new t.Signal(e.width,t.Type.NormalRange),this._widthGate=new t.Gain,this._sawtooth=new t.Oscillator({frequency:e.frequency,detune:e.detune,type:"sawtooth",phase:e.phase}),this.frequency=this._sawtooth.frequency,this.detune=this._sawtooth.detune,this._thresh=new t.WaveShaper(function(t){return t<0?-1:1}),this._sawtooth.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),this._readOnly(["width","frequency","detune"])},t.extend(t.PulseOscillator,t.Oscillator),t.PulseOscillator.defaults={frequency:440,detune:0,phase:0,width:.2},t.PulseOscillator.prototype._start=function(t){t=this.toSeconds(t),this._sawtooth.start(t),this._widthGate.gain.setValueAtTime(1,t)},t.PulseOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._sawtooth.stop(t),this._widthGate.gain.setValueAtTime(0,t)},Object.defineProperty(t.PulseOscillator.prototype,"phase",{get:function(){return this._sawtooth.phase},set:function(t){this._sawtooth.phase=t}}),Object.defineProperty(t.PulseOscillator.prototype,"type",{get:function(){return"pulse"}}),Object.defineProperty(t.PulseOscillator.prototype,"partials",{get:function(){return[]}}),t.PulseOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._sawtooth.dispose(),this._sawtooth=null,this._writable(["width","frequency","detune"]),this.width.dispose(),this.width=null,this._widthGate.dispose(),this._widthGate=null,this._thresh.dispose(),this._thresh=null,this.frequency=null,this.detune=null,this},t.PulseOscillator}),e(function(t){return t.PWMOscillator=function(){var e=this.optionsObject(arguments,["frequency","modulationFrequency"],t.PWMOscillator.defaults);t.Source.call(this,e),this._pulse=new t.PulseOscillator(e.modulationFrequency),this._pulse._sawtooth.type="sine",this._modulator=new t.Oscillator({frequency:e.frequency,detune:e.detune,phase:e.phase}),this._scale=new t.Multiply(2),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this.modulationFrequency=this._pulse.frequency,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),this._readOnly(["modulationFrequency","frequency","detune"])},t.extend(t.PWMOscillator,t.Oscillator),t.PWMOscillator.defaults={frequency:440,detune:0,phase:0,modulationFrequency:.4},t.PWMOscillator.prototype._start=function(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)},t.PWMOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)},Object.defineProperty(t.PWMOscillator.prototype,"type",{get:function(){return"pwm"}}),Object.defineProperty(t.PWMOscillator.prototype,"partials",{get:function(){return[]}}),Object.defineProperty(t.PWMOscillator.prototype,"phase",{get:function(){return this._modulator.phase},set:function(t){this._modulator.phase=t}}),t.PWMOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._pulse.dispose(),this._pulse=null,this._scale.dispose(),this._scale=null,this._modulator.dispose(),this._modulator=null,this._writable(["modulationFrequency","frequency","detune"]),this.frequency=null,this.detune=null,this.modulationFrequency=null,this},t.PWMOscillator}),e(function(t){return t.FMOscillator=function(){var e=this.optionsObject(arguments,["frequency","type","modulationType"],t.FMOscillator.defaults);t.Source.call(this,e),this._carrier=new t.Oscillator(e.frequency,e.type),this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=this._carrier.detune,this.detune.value=e.detune,this.modulationIndex=new t.Multiply(e.modulationIndex),this.modulationIndex.units=t.Type.Positive,this._modulator=new t.Oscillator(e.frequency,e.modulationType),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this._modulationNode=new t.Gain(0),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),this.phase=e.phase,this._readOnly(["modulationIndex","frequency","detune","harmonicity"])},t.extend(t.FMOscillator,t.Oscillator),t.FMOscillator.defaults={frequency:440,detune:0,phase:0,modulationIndex:2,modulationType:"square",harmonicity:1},t.FMOscillator.prototype._start=function(t){t=this.toSeconds(t),this._modulator.start(t),this._carrier.start(t)},t.FMOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._modulator.stop(t),this._carrier.stop(t)},Object.defineProperty(t.FMOscillator.prototype,"type",{get:function(){return this._carrier.type},set:function(t){this._carrier.type=t}}),Object.defineProperty(t.FMOscillator.prototype,"modulationType",{get:function(){return this._modulator.type},set:function(t){this._modulator.type=t}}),Object.defineProperty(t.FMOscillator.prototype,"phase",{get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t}}),Object.defineProperty(t.FMOscillator.prototype,"partials",{get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t}}),t.FMOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable(["modulationIndex","frequency","detune","harmonicity"]),this.frequency.dispose(),this.frequency=null,this.detune=null,this.harmonicity.dispose(),this.harmonicity=null,this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this._modulationNode.dispose(),this._modulationNode=null,this.modulationIndex.dispose(),this.modulationIndex=null,this},t.FMOscillator}),e(function(t){return t.AMOscillator=function(){var e=this.optionsObject(arguments,["frequency","type","modulationType"],t.AMOscillator.defaults);t.Source.call(this,e),this._carrier=new t.Oscillator(e.frequency,e.type),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this.detune.value=e.detune,this._modulator=new t.Oscillator(e.frequency,e.modulationType),this._modulationScale=new t.AudioToGain,this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this._modulationNode=new t.Gain(0),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.connect(this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),this.phase=e.phase,this._readOnly(["frequency","detune","harmonicity"])},t.extend(t.AMOscillator,t.Oscillator),t.AMOscillator.defaults={frequency:440,detune:0,phase:0,modulationType:"square",harmonicity:1},t.AMOscillator.prototype._start=function(t){t=this.toSeconds(t),this._modulator.start(t),this._carrier.start(t)},t.AMOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._modulator.stop(t),this._carrier.stop(t)},Object.defineProperty(t.AMOscillator.prototype,"type",{get:function(){return this._carrier.type},set:function(t){this._carrier.type=t}}),Object.defineProperty(t.AMOscillator.prototype,"modulationType",{get:function(){return this._modulator.type},set:function(t){this._modulator.type=t}}),Object.defineProperty(t.AMOscillator.prototype,"phase",{get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t}}),Object.defineProperty(t.AMOscillator.prototype,"partials",{get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t}}),t.AMOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable(["frequency","detune","harmonicity"]),this.frequency=null,this.detune=null,this.harmonicity.dispose(),this.harmonicity=null,this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this._modulationNode.dispose(),this._modulationNode=null,this._modulationScale.dispose(),this._modulationScale=null,this},t.AMOscillator}),e(function(t){return t.FatOscillator=function(){var e=this.optionsObject(arguments,["frequency","type","spread"],t.FatOscillator.defaults);t.Source.call(this,e),this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this._oscillators=[],this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=this.defaultArg(e.partials,[]),this.count=e.count,this._readOnly(["frequency","detune"])},t.extend(t.FatOscillator,t.Oscillator),t.FatOscillator.defaults={frequency:440,detune:0,phase:0,spread:20,count:3,type:"sawtooth"},t.FatOscillator.prototype._start=function(t){t=this.toSeconds(t),this._forEach(function(e){e.start(t)})},t.FatOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._forEach(function(e){e.stop(t)})},t.FatOscillator.prototype._forEach=function(t){for(var e=0;e<this._oscillators.length;e++)t.call(this,this._oscillators[e],e)},Object.defineProperty(t.FatOscillator.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t,this._forEach(function(e){e.type=t})}}),Object.defineProperty(t.FatOscillator.prototype,"spread",{get:function(){return this._spread},set:function(t){if(this._spread=t,this._oscillators.length>1){var e=-t/2,i=t/(this._oscillators.length-1);this._forEach(function(t,n){t.detune.value=e+i*n})}}}),Object.defineProperty(t.FatOscillator.prototype,"count",{get:function(){return this._oscillators.length},set:function(e){if(e=Math.max(e,1),this._oscillators.length!==e){this._forEach(function(t){t.dispose()}),this._oscillators=[];for(var i=0;i<e;i++){var n=new t.Oscillator;this.type===t.Oscillator.Type.Custom?n.partials=this._partials:n.type=this._type,n.phase=this._phase,n.volume.value=-6-e,this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.connect(this.output),this._oscillators[i]=n}this.spread=this._spread,this.state===t.State.Started&&this._forEach(function(t){t.start()})}}}),Object.defineProperty(t.FatOscillator.prototype,"phase",{get:function(){return this._phase},set:function(t){this._phase=t,this._forEach(function(e){e.phase=t})}}),Object.defineProperty(t.FatOscillator.prototype,"partials",{get:function(){return this._partials},set:function(e){this._partials=e,this._type=t.Oscillator.Type.Custom,this._forEach(function(t){t.partials=e})}}),t.FatOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable(["frequency","detune"]),this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this._forEach(function(t){t.dispose()}),this._oscillators=null,this._partials=null,this},t.FatOscillator}),e(function(t){
t.OmniOscillator=function(){var e=this.optionsObject(arguments,["frequency","type"],t.OmniOscillator.defaults);t.Source.call(this,e),this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this._sourceType=void 0,this._oscillator=null,this.type=e.type,this._readOnly(["frequency","detune"]),this.set(e)},t.extend(t.OmniOscillator,t.Oscillator),t.OmniOscillator.defaults={frequency:440,detune:0,type:"sine",phase:0};var e={Pulse:"PulseOscillator",PWM:"PWMOscillator",Osc:"Oscillator",FM:"FMOscillator",AM:"AMOscillator",Fat:"FatOscillator"};return t.OmniOscillator.prototype._start=function(t){this._oscillator.start(t)},t.OmniOscillator.prototype._stop=function(t){this._oscillator.stop(t)},Object.defineProperty(t.OmniOscillator.prototype,"type",{get:function(){var t="";return this._sourceType===e.FM?t="fm":this._sourceType===e.AM?t="am":this._sourceType===e.Fat&&(t="fat"),t+this._oscillator.type},set:function(t){"fm"===t.substr(0,2)?(this._createNewOscillator(e.FM),this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator(e.AM),this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator(e.Fat),this._oscillator.type=t.substr(3)):"pwm"===t?this._createNewOscillator(e.PWM):"pulse"===t?this._createNewOscillator(e.Pulse):(this._createNewOscillator(e.Osc),this._oscillator.type=t)}}),Object.defineProperty(t.OmniOscillator.prototype,"partials",{get:function(){return this._oscillator.partials},set:function(t){this._oscillator.partials=t}}),t.OmniOscillator.prototype.set=function(e,i){return"type"===e?this.type=i:this.isObject(e)&&e.hasOwnProperty("type")&&(this.type=e.type),t.prototype.set.apply(this,arguments),this},t.OmniOscillator.prototype._createNewOscillator=function(e){if(e!==this._sourceType){this._sourceType=e;var i=t[e],n=this.now()+this.blockTime;if(null!==this._oscillator){var s=this._oscillator;s.stop(n),setTimeout(function(){s.dispose(),s=null},1e3*this.blockTime)}this._oscillator=new i,this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this.state===t.State.Started&&this._oscillator.start(n)}},Object.defineProperty(t.OmniOscillator.prototype,"phase",{get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t}}),Object.defineProperty(t.OmniOscillator.prototype,"width",{get:function(){if(this._sourceType===e.Pulse)return this._oscillator.width}}),Object.defineProperty(t.OmniOscillator.prototype,"count",{get:function(){if(this._sourceType===e.Fat)return this._oscillator.count},set:function(t){this._sourceType===e.Fat&&(this._oscillator.count=t)}}),Object.defineProperty(t.OmniOscillator.prototype,"spread",{get:function(){if(this._sourceType===e.Fat)return this._oscillator.spread},set:function(t){this._sourceType===e.Fat&&(this._oscillator.spread=t)}}),Object.defineProperty(t.OmniOscillator.prototype,"modulationType",{get:function(){if(this._sourceType===e.FM||this._sourceType===e.AM)return this._oscillator.modulationType},set:function(t){this._sourceType!==e.FM&&this._sourceType!==e.AM||(this._oscillator.modulationType=t)}}),Object.defineProperty(t.OmniOscillator.prototype,"modulationIndex",{get:function(){if(this._sourceType===e.FM)return this._oscillator.modulationIndex}}),Object.defineProperty(t.OmniOscillator.prototype,"harmonicity",{get:function(){if(this._sourceType===e.FM||this._sourceType===e.AM)return this._oscillator.harmonicity}}),Object.defineProperty(t.OmniOscillator.prototype,"modulationFrequency",{get:function(){if(this._sourceType===e.PWM)return this._oscillator.modulationFrequency}}),t.OmniOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable(["frequency","detune"]),this.detune.dispose(),this.detune=null,this.frequency.dispose(),this.frequency=null,this._oscillator.dispose(),this._oscillator=null,this._sourceType=null,this},t.OmniOscillator}),e(function(t){return t.Instrument=function(e){e=this.defaultArg(e,t.Instrument.defaults),this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._readOnly("volume")},t.extend(t.Instrument),t.Instrument.defaults={volume:0},t.Instrument.prototype.triggerAttack=t.noOp,t.Instrument.prototype.triggerRelease=t.noOp,t.Instrument.prototype.triggerAttackRelease=function(t,e,i,n){return i=this.isUndef(i)?this.now()+this.blockTime:this.toSeconds(i),e=this.toSeconds(e),this.triggerAttack(t,i,n),this.triggerRelease(i+e),this},t.Instrument.prototype.dispose=function(){return t.prototype.dispose.call(this),this._volume.dispose(),this._volume=null,this._writable(["volume"]),this.volume=null,this},t.Instrument}),e(function(t){return t.Monophonic=function(e){e=this.defaultArg(e,t.Monophonic.defaults),t.Instrument.call(this,e),this.portamento=e.portamento},t.extend(t.Monophonic,t.Instrument),t.Monophonic.defaults={portamento:0},t.Monophonic.prototype.triggerAttack=function(t,e,i){return e=this.isUndef(e)?this.now()+this.blockTime:this.toSeconds(e),this._triggerEnvelopeAttack(e,i),this.setNote(t,e),this},t.Monophonic.prototype.triggerRelease=function(t){return t=this.isUndef(t)?this.now()+this.blockTime:this.toSeconds(t),this._triggerEnvelopeRelease(t),this},t.Monophonic.prototype._triggerEnvelopeAttack=function(){},t.Monophonic.prototype._triggerEnvelopeRelease=function(){},t.Monophonic.prototype.setNote=function(t,e){if(e=this.toSeconds(e),this.portamento>0){var i=this.frequency.value;this.frequency.setValueAtTime(i,e);var n=this.toSeconds(this.portamento);this.frequency.exponentialRampToValueAtTime(t,e+n)}else this.frequency.setValueAtTime(t,e);return this},t.Monophonic}),e(function(t){return t.Synth=function(e){e=this.defaultArg(e,t.Synth.defaults),t.Monophonic.call(this,e),this.oscillator=new t.OmniOscillator(e.oscillator),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new t.AmplitudeEnvelope(e.envelope),this.oscillator.chain(this.envelope,this.output),this.oscillator.start(),this._readOnly(["oscillator","frequency","detune","envelope"])},t.extend(t.Synth,t.Monophonic),t.Synth.defaults={oscillator:{type:"triangle"},envelope:{attack:.005,decay:.1,sustain:.3,release:1}},t.Synth.prototype._triggerEnvelopeAttack=function(t,e){return this.envelope.triggerAttack(t,e),this},t.Synth.prototype._triggerEnvelopeRelease=function(t){return this.envelope.triggerRelease(t),this},t.Synth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["oscillator","frequency","detune","envelope"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this.frequency=null,this.detune=null,this},t.Synth}),e(function(t){return t.AMSynth=function(e){e=this.defaultArg(e,t.AMSynth.defaults),t.Monophonic.call(this,e),this._carrier=new t.Synth,this._carrier.volume.value=-10,this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope.set(e.envelope),this._modulator=new t.Synth,this._modulator.volume.value=-10,this.modulation=this._modulator.oscillator.set(e.modulation),this.modulationEnvelope=this._modulator.envelope.set(e.modulationEnvelope),this.frequency=new t.Signal(440,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this._modulationScale=new t.AudioToGain,this._modulationNode=new t.Gain,this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),this._readOnly(["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])},t.extend(t.AMSynth,t.Monophonic),t.AMSynth.defaults={harmonicity:3,detune:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},moduation:{type:"square"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}},t.AMSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.envelope.triggerAttack(t,e),this.modulationEnvelope.triggerAttack(t,e),this},t.AMSynth.prototype._triggerEnvelopeRelease=function(t){return this.envelope.triggerRelease(t),this.modulationEnvelope.triggerRelease(t),this},t.AMSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"]),this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this.harmonicity.dispose(),this.harmonicity=null,this._modulationScale.dispose(),this._modulationScale=null,this._modulationNode.dispose(),this._modulationNode=null,this.oscillator=null,this.envelope=null,this.modulationEnvelope=null,this.modulation=null,this},t.AMSynth}),e(function(t){return t.MonoSynth=function(e){e=this.defaultArg(e,t.MonoSynth.defaults),t.Monophonic.call(this,e),this.oscillator=new t.OmniOscillator(e.oscillator),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new t.Filter(e.filter),this.filterEnvelope=new t.FrequencyEnvelope(e.filterEnvelope),this.envelope=new t.AmplitudeEnvelope(e.envelope),this.oscillator.chain(this.filter,this.envelope,this.output),this.oscillator.start(),this.filterEnvelope.connect(this.filter.frequency),this._readOnly(["oscillator","frequency","detune","filter","filterEnvelope","envelope"])},t.extend(t.MonoSynth,t.Monophonic),t.MonoSynth.defaults={frequency:"C4",detune:0,oscillator:{type:"square"},filter:{Q:6,type:"lowpass",rolloff:-24},envelope:{attack:.005,decay:.1,sustain:.9,release:1},filterEnvelope:{attack:.06,decay:.2,sustain:.5,release:2,baseFrequency:200,octaves:7,exponent:2}},t.MonoSynth.prototype._triggerEnvelopeAttack=function(t,e){return this.envelope.triggerAttack(t,e),this.filterEnvelope.triggerAttack(t),this},t.MonoSynth.prototype._triggerEnvelopeRelease=function(t){return this.envelope.triggerRelease(t),this.filterEnvelope.triggerRelease(t),this},t.MonoSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["oscillator","frequency","detune","filter","filterEnvelope","envelope"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this.filterEnvelope.dispose(),this.filterEnvelope=null,this.filter.dispose(),this.filter=null,this.frequency=null,this.detune=null,this},t.MonoSynth}),e(function(t){return t.DuoSynth=function(e){e=this.defaultArg(e,t.DuoSynth.defaults),t.Monophonic.call(this,e),this.voice0=new t.MonoSynth(e.voice0),this.voice0.volume.value=-10,this.voice1=new t.MonoSynth(e.voice1),this.voice1.volume.value=-10,this._vibrato=new t.LFO(e.vibratoRate,-50,50),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new t.Gain(e.vibratoAmount,t.Type.Positive),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new t.Signal(440,t.Type.Frequency),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),this._readOnly(["voice0","voice1","frequency","vibratoAmount","vibratoRate"])},t.extend(t.DuoSynth,t.Monophonic),t.DuoSynth.defaults={vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:{volume:-10,portamento:0,oscillator:{type:"sine"},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}},voice1:{volume:-10,portamento:0,oscillator:{type:"sine"},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}},t.DuoSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.voice0.envelope.triggerAttack(t,e),this.voice1.envelope.triggerAttack(t,e),this.voice0.filterEnvelope.triggerAttack(t),this.voice1.filterEnvelope.triggerAttack(t),this},t.DuoSynth.prototype._triggerEnvelopeRelease=function(t){return this.voice0.triggerRelease(t),this.voice1.triggerRelease(t),this},t.DuoSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["voice0","voice1","frequency","vibratoAmount","vibratoRate"]),this.voice0.dispose(),this.voice0=null,this.voice1.dispose(),this.voice1=null,this.frequency.dispose(),this.frequency=null,this._vibratoGain.dispose(),this._vibratoGain=null,this._vibrato=null,this.harmonicity.dispose(),this.harmonicity=null,this.vibratoAmount.dispose(),this.vibratoAmount=null,this.vibratoRate=null,this},t.DuoSynth}),e(function(t){return t.FMSynth=function(e){e=this.defaultArg(e,t.FMSynth.defaults),t.Monophonic.call(this,e),this._carrier=new t.Synth(e.carrier),this._carrier.volume.value=-10,this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope.set(e.envelope),this._modulator=new t.Synth(e.modulator),this._modulator.volume.value=-10,this.modulation=this._modulator.oscillator.set(e.modulation),this.modulationEnvelope=this._modulator.envelope.set(e.modulationEnvelope),this.frequency=new t.Signal(440,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this.modulationIndex=new t.Multiply(e.modulationIndex),this.modulationIndex.units=t.Type.Positive,this._modulationNode=new t.Gain(0),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this._readOnly(["frequency","harmonicity","modulationIndex","oscillator","envelope","modulation","modulationEnvelope","detune"])},t.extend(t.FMSynth,t.Monophonic),t.FMSynth.defaults={harmonicity:3,modulationIndex:10,detune:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},moduation:{type:"square"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}},t.FMSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.envelope.triggerAttack(t,e),this.modulationEnvelope.triggerAttack(t),this},t.FMSynth.prototype._triggerEnvelopeRelease=function(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this.modulationEnvelope.triggerRelease(t),this},t.FMSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["frequency","harmonicity","modulationIndex","oscillator","envelope","modulation","modulationEnvelope","detune"]),this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this.modulationIndex.dispose(),this.modulationIndex=null,this.harmonicity.dispose(),this.harmonicity=null,this._modulationNode.dispose(),this._modulationNode=null,this.oscillator=null,this.envelope=null,this.modulationEnvelope=null,this.modulation=null,this},t.FMSynth}),e(function(t){return t.MembraneSynth=function(e){e=this.defaultArg(e,t.MembraneSynth.defaults),t.Instrument.call(this,e),this.oscillator=new t.Oscillator(e.oscillator).start(),this.envelope=new t.AmplitudeEnvelope(e.envelope),this.octaves=e.octaves,this.pitchDecay=e.pitchDecay,this.oscillator.chain(this.envelope,this.output),this._readOnly(["oscillator","envelope"])},t.extend(t.MembraneSynth,t.Instrument),t.MembraneSynth.defaults={pitchDecay:.05,octaves:10,oscillator:{type:"sine"},envelope:{attack:.001,decay:.4,sustain:.01,release:1.4,attackCurve:"exponential"}},t.MembraneSynth.prototype.triggerAttack=function(t,e,i){e=this.toSeconds(e),t=this.toFrequency(t);var n=t*this.octaves;return this.oscillator.frequency.setValueAtTime(n,e),this.oscillator.frequency.exponentialRampToValueAtTime(t,e+this.toSeconds(this.pitchDecay)),this.envelope.triggerAttack(e,i),this},t.MembraneSynth.prototype.triggerRelease=function(t){return this.envelope.triggerRelease(t),this},t.MembraneSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._writable(["oscillator","envelope"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this},t.MembraneSynth}),e(function(t){var e=[1,1.483,1.932,2.546,2.63,3.897];return t.MetalSynth=function(i){i=this.defaultArg(i,t.MetalSynth.defaults),t.Instrument.call(this,i),this.frequency=new t.Signal(i.frequency,t.Type.Frequency),this._oscillators=[],this._freqMultipliers=[],this._amplitue=new t.Gain(0).connect(this.output),this._highpass=new t.Filter({type:"highpass",Q:0}).connect(this._amplitue),this._octaves=i.octaves,this._filterFreqScaler=new t.Scale(i.resonance,7e3),this.envelope=new t.Envelope({attack:i.envelope.attack,attackCurve:"exponential",decay:i.envelope.decay,sustain:0,release:i.envelope.release}).chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitue.gain);for(var n=0;n<e.length;n++){var s=new t.FMOscillator({type:"square",modulationType:"square",harmonicity:i.harmonicity,modulationIndex:i.modulationIndex});s.connect(this._highpass).start(0),this._oscillators[n]=s;var o=new t.Multiply(e[n]);this._freqMultipliers[n]=o,this.frequency.chain(o,s.frequency)}this.octaves=i.octaves},t.extend(t.MetalSynth,t.Instrument),t.MetalSynth.defaults={frequency:200,envelope:{attack:.0015,decay:1.4,release:.2},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1.5},t.MetalSynth.prototype.triggerAttack=function(t,e){return t=this.toSeconds(t),e=this.defaultArg(e,1),this.envelope.triggerAttack(t,e),this},t.MetalSynth.prototype.triggerRelease=function(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this},t.MetalSynth.prototype.triggerAttackRelease=function(t,e,i){return e=this.toSeconds(e),t=this.toSeconds(t),this.triggerAttack(e,i),this.triggerRelease(e+t),this},Object.defineProperty(t.MetalSynth.prototype,"modulationIndex",{get:function(){return this._oscillators[0].modulationIndex.value},set:function(t){for(var e=0;e<this._oscillators.length;e++)this._oscillators[e].modulationIndex.value=t}}),Object.defineProperty(t.MetalSynth.prototype,"harmonicity",{get:function(){return this._oscillators[0].harmonicity.value},set:function(t){for(var e=0;e<this._oscillators.length;e++)this._oscillators[e].harmonicity.value=t}}),Object.defineProperty(t.MetalSynth.prototype,"resonance",{get:function(){return this._filterFreqScaler.min},set:function(t){this._filterFreqScaler.min=t,this.octaves=this._octaves}}),Object.defineProperty(t.MetalSynth.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,t)}}),t.MetalSynth.prototype.dispose=function(){t.Instrument.prototype.dispose.call(this);for(var e=0;e<this._oscillators.length;e++)this._oscillators[e].dispose(),this._freqMultipliers[e].dispose();this._oscillators=null,this._freqMultipliers=null,this.frequency.dispose(),this.frequency=null,this._filterFreqScaler.dispose(),this._filterFreqScaler=null,this._amplitue.dispose(),this._amplitue=null,this.envelope.dispose(),this.envelope=null,this._highpass.dispose(),this._highpass=null},t.MetalSynth}),e(function(t){t.Noise=function(){var e=this.optionsObject(arguments,["type"],t.Noise.defaults);t.Source.call(this,e),this._source=null,this._buffer=null,this._playbackRate=e.playbackRate,this.type=e.type},t.extend(t.Noise,t.Source),t.Noise.defaults={type:"white",playbackRate:1},Object.defineProperty(t.Noise.prototype,"type",{get:function(){return this._buffer===n?"white":this._buffer===i?"brown":this._buffer===e?"pink":void 0},set:function(s){if(this.type!==s){switch(s){case"white":this._buffer=n;break;case"pink":this._buffer=e;break;case"brown":this._buffer=i;break;default:throw new TypeError("Tone.Noise: invalid type: "+s)}if(this.state===t.State.Started){var o=this.now()+this.blockTime;this._stop(o),this._start(o)}}}}),Object.defineProperty(t.Noise.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}}),t.Noise.prototype._start=function(t){this._source=this.context.createBufferSource(),this._source.buffer=this._buffer,this._source.loop=!0,this._source.playbackRate.value=this._playbackRate,this._source.connect(this.output),this._source.start(this.toSeconds(t),Math.random()*(this._buffer.duration-.001))},t.Noise.prototype._stop=function(t){this._source&&this._source.stop(this.toSeconds(t))},t.Noise.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),null!==this._source&&(this._source.disconnect(),this._source=null),this._buffer=null,this};var e=null,i=null,n=null;return t._initAudioContext(function(t){var s=t.sampleRate,o=4*s;e=function(){for(var e=t.createBuffer(2,o,s),i=0;i<e.numberOfChannels;i++){var n,r,a,h,l,u,c,p=e.getChannelData(i);n=r=a=h=l=u=c=0;for(var f=0;f<o;f++){var d=2*Math.random()-1;n=.99886*n+.0555179*d,r=.99332*r+.0750759*d,a=.969*a+.153852*d,h=.8665*h+.3104856*d,l=.55*l+.5329522*d,u=-.7616*u-.016898*d,p[f]=n+r+a+h+l+u+c+.5362*d,p[f]*=.11,c=.115926*d}}return e}(),i=function(){for(var e=t.createBuffer(2,o,s),i=0;i<e.numberOfChannels;i++)for(var n=e.getChannelData(i),r=0,a=0;a<o;a++){var h=2*Math.random()-1;n[a]=(r+.02*h)/1.02,r=n[a],n[a]*=3.5}return e}(),n=function(){for(var e=t.createBuffer(2,o,s),i=0;i<e.numberOfChannels;i++)for(var n=e.getChannelData(i),r=0;r<o;r++)n[r]=2*Math.random()-1;return e}()}),t.Noise}),e(function(t){return t.NoiseSynth=function(e){e=this.defaultArg(e,t.NoiseSynth.defaults),t.Instrument.call(this,e),this.noise=new t.Noise,this.envelope=new t.AmplitudeEnvelope(e.envelope),this.noise.chain(this.envelope,this.output),this.noise.start(),this._readOnly(["noise","envelope"])},t.extend(t.NoiseSynth,t.Instrument),t.NoiseSynth.defaults={noise:{type:"white"},envelope:{attack:.005,decay:.1,sustain:0}},t.NoiseSynth.prototype.triggerAttack=function(t,e){return this.envelope.triggerAttack(t,e),this},t.NoiseSynth.prototype.triggerRelease=function(t){return this.envelope.triggerRelease(t),this},t.NoiseSynth.prototype.triggerAttackRelease=function(t,e,i){return e=this.toSeconds(e),t=this.toSeconds(t),this.triggerAttack(e,i),this.triggerRelease(e+t),this},t.NoiseSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._writable(["noise","envelope"]),this.noise.dispose(),this.noise=null,this.envelope.dispose(),this.envelope=null,this},t.NoiseSynth}),e(function(t){return t.PluckSynth=function(e){e=this.defaultArg(e,t.PluckSynth.defaults),t.Instrument.call(this,e),this._noise=new t.Noise("pink"),this.attackNoise=1,this._lfcf=new t.LowpassCombFilter({resonance:e.resonance,dampening:e.dampening}),this.resonance=this._lfcf.resonance,this.dampening=this._lfcf.dampening,this._noise.connect(this._lfcf),this._lfcf.connect(this.output),this._readOnly(["resonance","dampening"])},t.extend(t.PluckSynth,t.Instrument),t.PluckSynth.defaults={attackNoise:1,dampening:4e3,resonance:.9},t.PluckSynth.prototype.triggerAttack=function(t,e){t=this.toFrequency(t),e=this.toSeconds(e);var i=1/t;return this._lfcf.delayTime.setValueAtTime(i,e),this._noise.start(e),this._noise.stop(e+i*this.attackNoise),this},t.PluckSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._noise.dispose(),this._lfcf.dispose(),this._noise=null,this._lfcf=null,this._writable(["resonance","dampening"]),this.dampening=null,this.resonance=null,this},t.PluckSynth}),e(function(t){return t.PolySynth=function(){t.Instrument.call(this);var e=this.optionsObject(arguments,["polyphony","voice"],t.PolySynth.defaults);e=this.defaultArg(e,t.Instrument.defaults),e.polyphony=Math.min(t.PolySynth.MAX_POLYPHONY,e.polyphony),this.voices=new Array(e.polyphony),this._triggers=new Array(e.polyphony),this.detune=new t.Signal(e.detune,t.Type.Cents),this._readOnly("detune");for(var i=0;i<e.polyphony;i++){var n=new e.voice(arguments[2],arguments[3]);this.voices[i]=n,n.connect(this.output),n.hasOwnProperty("detune")&&this.detune.connect(n.detune),this._triggers[i]={release:-1,note:null,voice:n}}this.volume.value=e.volume},t.extend(t.PolySynth,t.Instrument),t.PolySynth.defaults={polyphony:4,volume:0,detune:0,voice:t.Synth},t.PolySynth.prototype.triggerAttack=function(t,e,i){Array.isArray(t)||(t=[t]),e=this.toSeconds(e);for(var n=0;n<t.length;n++){for(var s=t[n],o=this._triggers[0],r=0,a=1;a<this._triggers.length;a++)this._triggers[a].release<o.release&&(o=this._triggers[a],r=a);o.release=1/0,o.note=JSON.stringify(s),o.voice.triggerAttack(s,e,i)}return this},t.PolySynth.prototype.triggerAttackRelease=function(t,e,i,n){if(i=this.toSeconds(i),this.triggerAttack(t,i,n),this.isArray(e)&&this.isArray(t))for(var s=0;s<t.length;s++){var o=e[Math.min(s,e.length-1)];this.triggerRelease(t[s],i+this.toSeconds(o))}else this.triggerRelease(t,i+this.toSeconds(e));return this},t.PolySynth.prototype.triggerRelease=function(t,e){Array.isArray(t)||(t=[t]),e=this.toSeconds(e);for(var i=0;i<t.length;i++)for(var n=JSON.stringify(t[i]),s=0;s<this._triggers.length;s++){var o=this._triggers[s];o.note===n&&o.release>e&&(o.voice.triggerRelease(e),o.release=e)}return this},t.PolySynth.prototype.set=function(t,e,i){for(var n=0;n<this.voices.length;n++)this.voices[n].set(t,e,i);return this},t.PolySynth.prototype.get=function(t){return this.voices[0].get(t)},t.PolySynth.prototype.releaseAll=function(t){t=this.toSeconds(t);for(var e=0;e<this._triggers.length;e++){var i=this._triggers[e];i.release>t&&(i.release=t,i.voice.triggerRelease(t))}return this},t.PolySynth.prototype.dispose=function(){t.Instrument.prototype.dispose.call(this);for(var e=0;e<this.voices.length;e++)this.voices[e].dispose(),this.voices[e]=null;return this._writable("detune"),this.detune.dispose(),this.detune=null,this.voices=null,this._triggers=null,this},t.PolySynth.MAX_POLYPHONY=20,t.PolySynth}),e(function(t){return t.Player=function(e){var i;e instanceof t.Buffer?(e=e.get(),i=t.Player.defaults):i=this.optionsObject(arguments,["url","onload"],t.Player.defaults),t.Source.call(this,i),this._source=null,this.autostart=i.autostart,this._buffer=new t.Buffer({url:i.url,onload:this._onload.bind(this,i.onload),reverse:i.reverse}),e instanceof AudioBuffer&&this._buffer.set(e),this._loop=i.loop,this._loopStart=i.loopStart,this._loopEnd=i.loopEnd,this._playbackRate=i.playbackRate,this.retrigger=i.retrigger},t.extend(t.Player,t.Source),t.Player.defaults={onload:t.noOp,playbackRate:1,loop:!1,autostart:!1,loopStart:0,loopEnd:0,retrigger:!1,reverse:!1},t.Player.prototype.load=function(t,e){return this._buffer.load(t,this._onload.bind(this,e)),this},t.Player.prototype._onload=function(t){t(this),this.autostart&&this.start()},t.Player.prototype._start=function(e,i,n){if(!this._buffer.loaded)throw Error("Tone.Player: tried to start Player before the buffer was loaded");if(i=this._loop?this.defaultArg(i,this._loopStart):this.defaultArg(i,0),i=this.toSeconds(i),n=this.defaultArg(n,Math.max(this._buffer.duration-i,0)),n=this.toSeconds(n),e=this.toSeconds(e),this._source=this.context.createBufferSource(),this._source.buffer=this._buffer.get(),this._loop?(this._source.loop=this._loop,this._source.loopStart=this.toSeconds(this._loopStart),this._source.loopEnd=this.toSeconds(this._loopEnd)):this._state.setStateAtTime(t.State.Stopped,e+n),this._source.playbackRate.value=this._playbackRate,this._source.connect(this.output),this._loop){var s=this._source.loopEnd||this._buffer.duration,o=this._source.loopStart,r=s-o;i>r&&(i=o+i%r,i>s&&(i-=r)),this._source.start(e,i)}else this._source.start(e,i,n);return this},t.Player.prototype._stop=function(t){return this._source&&(this._source.stop(this.toSeconds(t)),this._source=null),this},t.Player.prototype.seek=function(e,i){return i=this.toSeconds(i),this._state.getStateAtTime(i)===t.State.Started&&(e=this.toSeconds(e),this._stop(i),this._start(i,e)),this},t.Player.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(t.Player.prototype,"loopStart",{get:function(){return this._loopStart},set:function(t){this._loopStart=t,this._source&&(this._source.loopStart=this.toSeconds(t))}}),Object.defineProperty(t.Player.prototype,"loopEnd",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=t,this._source&&(this._source.loopEnd=this.toSeconds(t))}}),Object.defineProperty(t.Player.prototype,"buffer",{get:function(){return this._buffer},set:function(t){this._buffer.set(t)}}),Object.defineProperty(t.Player.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._source&&(this._source.loop=t)}}),Object.defineProperty(t.Player.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}}),Object.defineProperty(t.Player.prototype,"reverse",{get:function(){return this._buffer.reverse},set:function(t){this._buffer.reverse=t}}),t.Player.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),null!==this._source&&(this._source.disconnect(),this._source=null),this._buffer.dispose(),this._buffer=null,this},t.Player}),e(function(t){return t.Sampler=function(){var e=this.optionsObject(arguments,["url","onload"],t.Sampler.defaults);t.Instrument.call(this,e),this.player=new t.Player(e.url,e.onload),this.player.retrigger=!0,this.envelope=new t.AmplitudeEnvelope(e.envelope),this.player.chain(this.envelope,this.output),this._readOnly(["player","envelope"]),this.loop=e.loop,this.reverse=e.reverse},t.extend(t.Sampler,t.Instrument),t.Sampler.defaults={onload:t.noOp,loop:!1,reverse:!1,envelope:{attack:.001,decay:0,sustain:1,release:.1}},t.Sampler.prototype.triggerAttack=function(t,e,i){return e=this.toSeconds(e),t=this.defaultArg(t,0),this.player.playbackRate=this.intervalToFrequencyRatio(t),this.player.start(e),this.envelope.triggerAttack(e,i),this},t.Sampler.prototype.triggerRelease=function(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this.player.stop(this.toSeconds(this.envelope.release)+t),this},Object.defineProperty(t.Sampler.prototype,"loop",{get:function(){return this.player.loop},set:function(t){this.player.loop=t}}),Object.defineProperty(t.Sampler.prototype,"reverse",{get:function(){return this.player.reverse},set:function(t){this.player.reverse=t}}),Object.defineProperty(t.Sampler.prototype,"buffer",{get:function(){return this.player.buffer},set:function(t){this.player.buffer=t}}),t.Sampler.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._writable(["player","envelope"]),this.player.dispose(),this.player=null,this.envelope.dispose(),this.envelope=null,this},t.Sampler}),e(function(t){return t.SimpleSynth=function(e){console.warn("Tone.SimpleSynth is now called Tone.Synth"),t.Synth.call(this,e)},t.extend(t.SimpleSynth,t.Synth),t.SimpleSynth}),e(function(t){return t.GainToAudio=function(){this._norm=this.input=this.output=new t.WaveShaper(function(t){return 2*Math.abs(t)-1})},t.extend(t.GainToAudio,t.SignalBase),t.GainToAudio.prototype.dispose=function(){return t.prototype.dispose.call(this),this._norm.dispose(),this._norm=null,this},t.GainToAudio}),e(function(t){return t.Normalize=function(e,i){this._inputMin=this.defaultArg(e,0),this._inputMax=this.defaultArg(i,1),this._sub=this.input=new t.Add(0),this._div=this.output=new t.Multiply(1),this._sub.connect(this._div),this._setRange()},t.extend(t.Normalize,t.SignalBase),Object.defineProperty(t.Normalize.prototype,"min",{
get:function(){return this._inputMin},set:function(t){this._inputMin=t,this._setRange()}}),Object.defineProperty(t.Normalize.prototype,"max",{get:function(){return this._inputMax},set:function(t){this._inputMax=t,this._setRange()}}),t.Normalize.prototype._setRange=function(){this._sub.value=-this._inputMin,this._div.value=1/(this._inputMax-this._inputMin)},t.Normalize.prototype.dispose=function(){return t.prototype.dispose.call(this),this._sub.dispose(),this._sub=null,this._div.dispose(),this._div=null,this},t.Normalize}),e(function(t){return t.BufferSource=function(){var e=this.optionsObject(arguments,["buffer","onended"],t.BufferSource.defaults);this.onended=e.onended,this._startTime=-1,this._gainNode=this.output=new t.Gain,this._source=this.context.createBufferSource(),this._source.connect(this._gainNode),this._source.onended=this._onended.bind(this),this.playbackRate=new t.Param(this._source.playbackRate,t.Type.Positive),this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut,this._gain=1,this.isUndef(e.buffer)||(this.buffer=e.buffer),this.loop=e.loop},t.extend(t.BufferSource),t.BufferSource.defaults={onended:t.noOp,fadeIn:0,fadeOut:0},Object.defineProperty(t.BufferSource.prototype,"state",{get:function(){var e=this.now();return this._startTime!==-1&&e>this._startTime?t.State.Started:t.State.Stopped}}),t.BufferSource.prototype.start=function(t,e,i,n,s){if(this._startTime!==-1)throw new Error("Tone.BufferSource: can only be started once.");return this.buffer&&(t=this.toSeconds(t),e=this.loop?this.defaultArg(e,this.loopStart):this.defaultArg(e,0),e=this.toSeconds(e),t=this.toSeconds(t),this._source.start(t,e),n=this.defaultArg(n,1),this._gain=n,s=this.isUndef(s)?this.toSeconds(this.fadeIn):this.toSeconds(s),s>0?(this._gainNode.gain.setValueAtTime(0,t),this._gainNode.gain.linearRampToValueAtTime(this._gain,t+s)):this._gainNode.gain.setValueAtTime(n,t),this._startTime=t+s,this.isUndef(i)||(i=this.defaultArg(i,this.buffer.duration-e),i=this.toSeconds(i),this.stop(t+i+s,s))),this},t.BufferSource.prototype.stop=function(t,e){return this.buffer&&(t=this.toSeconds(t),e=this.isUndef(e)?this.toSeconds(this.fadeOut):this.toSeconds(e),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),e>0?(this._gainNode.gain.setValueAtTime(this._gain,t),this._gainNode.gain.linearRampToValueAtTime(0,t+e),t+=e):this._gainNode.gain.setValueAtTime(0,t),this.isNumber(this._source.playbackState)&&2!==this._source.playbackState||this._source.stop(t)),this},t.BufferSource.prototype._onended=function(){this.onended(this),this.dispose()},Object.defineProperty(t.BufferSource.prototype,"loopStart",{get:function(){return this._source.loopStart},set:function(t){this._source.loopStart=this.toSeconds(t)}}),Object.defineProperty(t.BufferSource.prototype,"loopEnd",{get:function(){return this._source.loopEnd},set:function(t){this._source.loopEnd=this.toSeconds(t)}}),Object.defineProperty(t.BufferSource.prototype,"buffer",{get:function(){return this._source?this._source.buffer:null},set:function(e){e instanceof t.Buffer?this._source.buffer=e.get():this._source.buffer=e}}),Object.defineProperty(t.BufferSource.prototype,"loop",{get:function(){return this._source.loop},set:function(t){this._source.loop=t}}),t.BufferSource.prototype.dispose=function(){return this.onended=null,this._source&&(this._source.onended=null,this._source.disconnect(),this._source=null),this._gainNode&&(this._gainNode.dispose(),this._gainNode=null),this._startTime=-1,this.playbackRate=null,this.output=null,this},t.BufferSource}),e(function(t){return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,t.ExternalInput=function(){var e=this.optionsObject(arguments,["inputNum"],t.ExternalInput.defaults);t.Source.call(this,e),this._mediaStream=null,this._stream=null,this._constraints={audio:!0},this._inputNum=e.inputNum,this._gate=new t.Gain(0).connect(this.output)},t.extend(t.ExternalInput,t.Source),t.ExternalInput.defaults={inputNum:0},t.ExternalInput.prototype._getUserMedia=function(e,i){t.ExternalInput.supported||i("browser does not support 'getUserMedia'"),t.ExternalInput.sources[this._inputNum]&&(this._constraints={audio:{optional:[{sourceId:t.ExternalInput.sources[this._inputNum].id}]}}),navigator.getUserMedia(this._constraints,function(t){this._onStream(t),e()}.bind(this),function(t){i(t)})},t.ExternalInput.prototype._onStream=function(t){if(!this.isFunction(this.context.createMediaStreamSource))throw new Error("Tone.ExternalInput: browser does not support the 'MediaStreamSourceNode'");this._stream||(this._stream=t,this._mediaStream=this.context.createMediaStreamSource(t),this._mediaStream.connect(this._gate))},t.ExternalInput.prototype.open=function(e,i){return e=this.defaultArg(e,t.noOp),i=this.defaultArg(i,t.noOp),t.ExternalInput.getSources(function(){this._getUserMedia(e,i)}.bind(this)),this},t.ExternalInput.prototype.close=function(){if(this._stream){var t=this._stream.getTracks()[this._inputNum];this.isUndef(t)||t.stop(),this._stream=null}return this},t.ExternalInput.prototype._start=function(t){return t=this.toSeconds(t),this._gate.gain.setValueAtTime(1,t),this},t.ExternalInput.prototype._stop=function(t){return t=this.toSeconds(t),this._gate.gain.setValueAtTime(0,t),this},t.ExternalInput.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this.close(),this._mediaStream&&(this._mediaStream.disconnect(),this._mediaStream=null),this._constraints=null,this._gate.dispose(),this._gate=null,this},t.ExternalInput.sources=[],t.ExternalInput._canGetSources=!t.prototype.isUndef(window.MediaStreamTrack)&&t.prototype.isFunction(MediaStreamTrack.getSources),Object.defineProperty(t.ExternalInput,"supported",{get:function(){return t.prototype.isFunction(navigator.getUserMedia)}}),t.ExternalInput.getSources=function(e){return 0===t.ExternalInput.sources.length&&t.ExternalInput._canGetSources?MediaStreamTrack.getSources(function(i){for(var n=0;n<i.length;n++)"audio"===i[n].kind&&(t.ExternalInput.sources[n]=i[n]);e(t.ExternalInput.sources)}):e(t.ExternalInput.sources),this},t.ExternalInput}),e(function(t){return t.MultiPlayer=function(){var e=this.optionsObject(arguments,["urls","onload"],t.MultiPlayer.defaults);e.urls instanceof t.Buffers?this.buffers=e.urls:this.buffers=new t.Buffers(e.urls,e.onload),this._activeSources=[],this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut,this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._readOnly("volume"),this._volume.output.output.channelCount=2,this._volume.output.output.channelCountMode="explicit",this.mute=e.mute},t.extend(t.MultiPlayer,t.Source),t.MultiPlayer.defaults={onload:t.noOp,fadeIn:0,fadeOut:0},t.MultiPlayer.prototype._getBuffer=function(e){return this.isNumber(e)||this.isString(e)?this.buffers.get(e).get():e instanceof t.Buffer?e.get():e},t.MultiPlayer.prototype.start=function(e,i,n,s,o,r){e=this._getBuffer(e);var a=new t.BufferSource(e).connect(this.output);return this._activeSources.push(a),i=this.toSeconds(i),a.start(i,n,s,this.defaultArg(r,1),this.fadeIn),s&&a.stop(i+this.toSeconds(s),this.fadeOut),a.onended=this._onended.bind(this),o=this.defaultArg(o,0),a.playbackRate.value=this.intervalToFrequencyRatio(o),this},t.MultiPlayer.prototype.startLoop=function(e,i,n,s,o,r,a){e=this._getBuffer(e);var h=new t.BufferSource(e).connect(this.output);return this._activeSources.push(h),i=this.toSeconds(i),h.loop=!0,h.loopStart=this.toSeconds(this.defaultArg(s,0)),h.loopEnd=this.toSeconds(this.defaultArg(o,0)),h.start(i,n,void 0,this.defaultArg(a,1),this.fadeIn),h.onended=this._onended.bind(this),r=this.defaultArg(r,0),h.playbackRate.value=this.intervalToFrequencyRatio(r),this},t.MultiPlayer.prototype._onended=function(t){var e=this._activeSources.indexOf(t);this._activeSources.splice(e,1)},t.MultiPlayer.prototype.stop=function(t,e){t=this._getBuffer(t),e=this.toSeconds(e);for(var i=0;i<this._activeSources.length;i++)this._activeSources[i].buffer===t&&this._activeSources[i].stop(e,this.fadeOut);return this},t.MultiPlayer.prototype.stopAll=function(t){t=this.toSeconds(t);for(var e=0;e<this._activeSources.length;e++)this._activeSources[e].stop(t,this.fadeOut);return this},t.MultiPlayer.prototype.add=function(t,e,i){return this.buffers.add(t,e,i),this},Object.defineProperty(t.MultiPlayer.prototype,"state",{get:function(){return this._activeSources.length>0?t.State.Started:t.State.Stopped}}),Object.defineProperty(t.MultiPlayer.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.MultiPlayer.prototype.dispose=function(){t.prototype.dispose.call(this),this._volume.dispose(),this._volume=null,this._writable("volume"),this.volume=null,this.buffers.dispose(),this.buffers=null;for(var e=0;e<this._activeSources.length;e++)this._activeSources[e].dispose();return this._activeSources=null,this},t.MultiPlayer}),e(function(t){return t.GrainPlayer=function(){var e=this.optionsObject(arguments,["url","onload"],t.GrainPlayer.defaults);t.Source.call(this),this.buffer=new t.Buffer(e.url,e.onload),this._player=this.output=new t.MultiPlayer,this._clock=new t.Clock(this._tick.bind(this),1),this._loopStart=0,this._loopEnd=0,this._playbackRate=e.playbackRate,this._grainSize=e.grainSize,this._overlap=e.overlap,this.detune=e.detune,this.drift=e.drift,this.overlap=e.overlap,this.loop=e.loop,this.playbackRate=e.playbackRate,this.grainSize=e.grainSize,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.reverse=e.reverse},t.extend(t.GrainPlayer,t.Source),t.GrainPlayer.defaults={onload:t.noOp,overlap:.1,grainSize:.2,drift:0,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1},t.GrainPlayer.prototype._start=function(t,e){e=this.defaultArg(e,0),e=this.toSeconds(e),t=this.toSeconds(t),this._offset=e,this._clock.start(t)},t.GrainPlayer.prototype._stop=function(t){this._clock.stop(t),this._player.stop(this.buffer,t),this._offset=0},t.GrainPlayer.prototype._tick=function(t){var e=this.buffer.duration;this.loop&&this._loopEnd>0&&(e=this._loopEnd);var i=(2*Math.random()-1)*this.drift,n=this._offset-this._overlap+i,s=this.detune/100,o=this._player.fadeIn;if(this.loop&&this._offset>e){var r=this._offset-e;this._player.start(this.buffer,t,n,r+this._overlap,s),n=this._offset%e,this._offset=this._loopStart,this._player.fadeIn=0,this._player.start(this.buffer,t+r,this._offset,n+this._overlap,s)}else this._offset>e?this.stop(t):(n<0&&(this._player.fadeIn=Math.max(this._player.fadeIn+n,0),n=0),this._player.start(this.buffer,t,n,this.grainSize+this._overlap,s));this._player.fadeIn=o;var a=this._clock._nextTick-t;this._offset+=a*this._playbackRate},t.GrainPlayer.prototype.scrub=function(t,e){return this._offset=this.toSeconds(t),this._tick(this.toSeconds(e)),this},Object.defineProperty(t.GrainPlayer.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this.grainSize=this._grainSize}}),Object.defineProperty(t.GrainPlayer.prototype,"loopStart",{get:function(){return this._loopStart},set:function(t){this._loopStart=this.toSeconds(t)}}),Object.defineProperty(t.GrainPlayer.prototype,"loopEnd",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=this.toSeconds(t)}}),Object.defineProperty(t.GrainPlayer.prototype,"reverse",{get:function(){return this.buffer.reverse},set:function(t){this.buffer.reverse=t}}),Object.defineProperty(t.GrainPlayer.prototype,"grainSize",{get:function(){return this._grainSize},set:function(t){this._grainSize=this.toSeconds(t),this._clock.frequency.value=this._playbackRate/this._grainSize}}),Object.defineProperty(t.GrainPlayer.prototype,"overlap",{get:function(){return this._overlap},set:function(t){t=this.toSeconds(t),this._overlap=t,this._overlap<0?(this._player.fadeIn=.01,this._player.fadeOut=.01):(this._player.fadeIn=t,this._player.fadeOut=t)}}),t.GrainPlayer.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this.buffer.dispose(),this.buffer=null,this._player.dispose(),this._player=null,this._clock.dispose(),this._clock=null,this},t.GrainPlayer}),e(function(t){return t.Microphone=function(){t.ExternalInput.call(this,0)},t.extend(t.Microphone,t.ExternalInput),Object.defineProperty(t.Microphone,"supported",{get:function(){return t.ExternalInput.supported}}),t.Microphone}),i})},{}],9:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var s=t("jquery"),o=n(s),r=t("tone"),a=n(r),h=t("interface.js"),l=n(h),u=t("startaudiocontext"),c=n(u),p=t("./widget/drumWidget"),f=n(p),d=t("query-string"),y=d.parse(location.search);console.log(y),window.$=o.default,window.jQuery=o.default,window.Tone=a.default,window.Interface=l.default,(0,c.default)(a.default.context).then(function(){console.log("Begun")});new f.default(y)},{"./widget/drumWidget":10,"interface.js":1,jquery:3,"query-string":5,startaudiocontext:6,tone:8}],10:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(){function t(e){var i=this;n(this,t),console.log("new widget");var s=void 0!=e.bpm?e.bpm/240:.5,o=e.swing||0,r=new Interface.Panel({container:document.querySelector(".charanga_drum_widget")});this.play=new Interface.Button({bounds:[.9,.05,.1,.1],label:"Play",type:"toggle",onvaluechange:function(){i.startstop()}});var a=new Interface.Knob({bounds:[0,.05,.05],value:s,usesRotation:!1,centerZero:!1,label:"BPM",onvaluechange:function(){var t=Math.round(240*this.value);l.setValue(t),window.Tone.Transport.bpm.value=t}}),h=new Interface.Knob({bounds:[.1,.05,.05],value:0,usesRotation:!1,centerZero:!1,label:"Swing",onvaluechange:function(){window.Tone.Transport.swing=this.value/2,u.setValue(Math.round(25*this.value)+50)}}),l=new Interface.Label({bounds:[0,0,.05,.1],hAlign:"center",value:Math.round(240*s)}),u=new Interface.Label({bounds:[.1,0,.05,.1],hAlign:"center",value:Math.round(25*o)+50}),c=new Interface.Label({bounds:[0,.375,.05,.1],hAlign:"right",value:"oh"}),p=new Interface.Label({bounds:[0,.55,.05,.1],hAlign:"right",value:"hh"}),f=new Interface.Label({bounds:[0,.725,.05,.1],hAlign:"right",value:"sd"}),d=new Interface.Label({bounds:[0,.9,.05,.1],hAlign:"right",value:"kd"});this.multiButton=new Interface.MultiButton({rows:4,columns:16,bounds:[.1,.3,.9,.7],onvaluechange:function(t,e,n){i.multiButtonChanged(t,e,n)}}),r.add(l,u,a,h,this.multiButton,this.play,c,p,f,d),this.initSequence(e)}return s(t,[{key:"parseqs",value:function(t){t=t.split("")||[];for(var e=0;e<16;e++)t[e]?0==t[e]&&(t[e]=null):t[e]=null;return console.log(t),t}},{key:"initSequence",value:function(t){Tone.Transport.bpm.value=t.bpm||120,Tone.Transport.swing=t.swing||0,Tone.Transport.swingSubdivision="8n",Tone.Transport.timeSignature=4,Tone.Transport.loopStart=0,Tone.Transport.loopEnd="4m",Tone.Transport.PPQ=192;var e=new Tone.MetalSynth({harmonicity:24,resonance:800,modulationIndex:20,envelope:{decay:.4},volume:-15}).toMaster(),i=new Tone.Sequence(function(t,i){e.frequency.setValueAtTime(900,t,.5*Math.random()+.5),e.triggerAttack(t)},this.parseqs(t.r0),"16n").start(0),n=(new Tone.MetalSynth({harmonicity:12,resonance:800,modulationIndex:20,envelope:{decay:.1},volume:-15}).toMaster(),new Tone.Sequence(function(t,i){e.frequency.setValueAtTime(1700,t,.5*Math.random()+.5),e.triggerAttack(t)},this.parseqs(t.r1),"16n").start(0)),s=new Tone.MembraneSynth({pitchDecay:.08,octaves:-2,envelope:{attack:6e-4,decay:.5,sustain:0}}).toMaster(),o=new Tone.Sequence(function(t,e){s.triggerAttack(100,t,.5*Math.random()+.5)},this.parseqs(t.r2),"16n").start(0),r=new Tone.MembraneSynth({pitchDecay:.008,octaves:1,envelope:{attack:6e-4,decay:.4,sustain:0}}).toMaster(),a=new Tone.Sequence(function(t,e){r.triggerAttack(40,t,.5*Math.random()+.5)},this.parseqs(t.r3),"16n").start(0);this.sequenceList=[i,n,o,a],this.multiButton,console.log(this.multiButton,this.multiButton.serialiseMe);for(var h in this.sequenceList)for(var l=0;l<16;l++)this.multiButton.setValue(h,l,this.sequenceList[h].at(l))}},{key:"startstop",value:function(){this.play._value?Tone.Transport.start("+0.1"):Tone.Transport.stop()}},{key:"stop",value:function(){console.log(this.play._value)}},{key:"multiButtonChanged",value:function(t,e,i){console.log(t,e,i),console.log(this.sequenceList[t]),t<this.sequenceList.length&&(0===i?this.sequenceList[t].remove(e):this.sequenceList[t].add(e,i))}}]),t}();i.default=o},{}]},{},[9]);
